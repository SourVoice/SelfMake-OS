     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_init_pit
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_init_keyboard
    15 00000000                                 	EXTERN	_enable_mouse
    16 00000000                                 	EXTERN	_memtest
    17 00000000                                 	EXTERN	_memman_init
    18 00000000                                 	EXTERN	_memman_free
    19 00000000                                 	EXTERN	_init_palette
    20 00000000                                 	EXTERN	_shtctl_init
    21 00000000                                 	EXTERN	_sheet_alloc
    22 00000000                                 	EXTERN	_memman_alloc_4k
    23 00000000                                 	EXTERN	_sheet_setbuf
    24 00000000                                 	EXTERN	_init_screen
    25 00000000                                 	EXTERN	_init_mouse_cursor8
    26 00000000                                 	EXTERN	_putfonts8_asc
    27 00000000                                 	EXTERN	_sheet_slide
    28 00000000                                 	EXTERN	_sheet_updown
    29 00000000                                 	EXTERN	_sprintf
    30 00000000                                 	EXTERN	_memman_total
    31 00000000                                 	EXTERN	_sheet_refresh
    32 00000000                                 	EXTERN	_boxfill8
    33 00000000                                 	EXTERN	_io_cli
    34 00000000                                 	EXTERN	_fifo8_status
    35 00000000                                 	EXTERN	_fifo8_get
    36 00000000                                 	EXTERN	_mouse_decode
    37 00000000                                 	EXTERN	_io_stihlt
    38 00000000                                 [FILE "bootpack.c"]
    39                                          [SECTION .data]
    40 00000000                                 LC0:
    41 00000000 77 69 6E 64 6F 77 00            	DB	"window",0x00
    42 00000007                                 LC1:
    43 00000007 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       00000011 00 
    44 00000012                                 LC2:
    45 00000012 54 68 69 73 20 4F 53 21 00      	DB	"This OS!",0x00
    46 0000001B                                 LC3:
    47 0000001B 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       00000025 00 
    48 00000026                                 LC4:
    49 00000026 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB free : %dKB",0x00
       00000030 42 20 66 72 65 65 20 3A 20 25 
       0000003A 64 4B 42 00 
    50 0000003E                                 LC5:
    51 0000003E 25 30 31 30 64 00               	DB	"%010d",0x00
    52 00000044                                 LC7:
    53 00000044 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000004E 34 64 5D 00 
    54 00000052                                 LC8:
    55 00000052 28 25 33 64 2C 25 33 64 29 00   	DB	"(%3d,%3d)",0x00
    56 0000005C                                 LC6:
    57 0000005C 25 30 32 78 00                  	DB	"%02x",0x00
    58                                          [SECTION .text]
    59 00000000                                 	GLOBAL	_HariMain
    60 00000000                                 _HariMain:
    61 00000000 55                              	PUSH	EBP
    62 00000001 89 E5                           	MOV	EBP,ESP
    63 00000003 57                              	PUSH	EDI
    64 00000004 56                              	PUSH	ESI
    65 00000005 53                              	PUSH	EBX
    66 00000006 81 EC 0000020C                  	SUB	ESP,524
    67 0000000C 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    68 00000013 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    69 0000001A 89 95 FFFFFE0C                  	MOV	DWORD [-500+EBP],EDX
    70 00000020 89 85 FFFFFE10                  	MOV	DWORD [-496+EBP],EAX
    71 00000026 8B 1D 00000FF8                  	MOV	EBX,DWORD [4088]
    72 0000002C C7 85 FFFFFE04 00000000         	MOV	DWORD [-508+EBP],0
    73 00000036 E8 [00000000]                   	CALL	_init_gdtidt
    74 0000003B E8 [00000000]                   	CALL	_init_pic
    75 00000040 E8 [00000000]                   	CALL	_io_sti
    76 00000045 8D 45 A4                        	LEA	EAX,DWORD [-92+EBP]
    77 00000048 50                              	PUSH	EAX
    78 00000049 6A 20                           	PUSH	32
    79 0000004B 68 [00000000]                   	PUSH	_keyfifo
    80 00000050 E8 [00000000]                   	CALL	_fifo8_init
    81 00000055 8D 85 FFFFFF24                  	LEA	EAX,DWORD [-220+EBP]
    82 0000005B 50                              	PUSH	EAX
    83 0000005C 68 00000080                     	PUSH	128
    84 00000061 68 [00000000]                   	PUSH	_mousefifo
    85 00000066 E8 [00000000]                   	CALL	_fifo8_init
    86 0000006B E8 [00000000]                   	CALL	_init_pit
    87 00000070 68 000000F9                     	PUSH	249
    88 00000075 6A 21                           	PUSH	33
    89 00000077 E8 [00000000]                   	CALL	_io_out8
    90 0000007C 83 C4 20                        	ADD	ESP,32
    91 0000007F 68 000000EF                     	PUSH	239
    92 00000084 68 000000A1                     	PUSH	161
    93 00000089 E8 [00000000]                   	CALL	_io_out8
    94 0000008E E8 [00000000]                   	CALL	_init_keyboard
    95 00000093 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
    96 00000099 50                              	PUSH	EAX
    97 0000009A E8 [00000000]                   	CALL	_enable_mouse
    98 0000009F 68 BFFFFFFF                     	PUSH	-1073741825
    99 000000A4 68 00400000                     	PUSH	4194304
   100 000000A9 E8 [00000000]                   	CALL	_memtest
   101 000000AE 68 003C0000                     	PUSH	3932160
   102 000000B3 89 85 FFFFFE08                  	MOV	DWORD [-504+EBP],EAX
   103 000000B9 E8 [00000000]                   	CALL	_memman_init
   104 000000BE 68 0009E000                     	PUSH	647168
   105 000000C3 68 00001000                     	PUSH	4096
   106 000000C8 68 003C0000                     	PUSH	3932160
   107 000000CD E8 [00000000]                   	CALL	_memman_free
   108 000000D2 8B 85 FFFFFE08                  	MOV	EAX,DWORD [-504+EBP]
   109 000000D8 83 C4 24                        	ADD	ESP,36
   110 000000DB 2D 00400000                     	SUB	EAX,4194304
   111 000000E0 50                              	PUSH	EAX
   112 000000E1 68 00400000                     	PUSH	4194304
   113 000000E6 68 003C0000                     	PUSH	3932160
   114 000000EB E8 [00000000]                   	CALL	_memman_free
   115 000000F0 E8 [00000000]                   	CALL	_init_palette
   116 000000F5 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   117 000000FC 50                              	PUSH	EAX
   118 000000FD 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   119 00000104 50                              	PUSH	EAX
   120 00000105 53                              	PUSH	EBX
   121 00000106 68 003C0000                     	PUSH	3932160
   122 0000010B E8 [00000000]                   	CALL	_shtctl_init
   123 00000110 89 C3                           	MOV	EBX,EAX
   124 00000112 50                              	PUSH	EAX
   125 00000113 E8 [00000000]                   	CALL	_sheet_alloc
   126 00000118 83 C4 20                        	ADD	ESP,32
   127 0000011B 53                              	PUSH	EBX
   128 0000011C 89 85 FFFFFE00                  	MOV	DWORD [-512+EBP],EAX
   129 00000122 E8 [00000000]                   	CALL	_sheet_alloc
   130 00000127 53                              	PUSH	EBX
   131 00000128 89 85 FFFFFDFC                  	MOV	DWORD [-516+EBP],EAX
   132 0000012E E8 [00000000]                   	CALL	_sheet_alloc
   133 00000133 0F BF 1D 00000FF6               	MOVSX	EBX,WORD [4086]
   134 0000013A 89 85 FFFFFDF8                  	MOV	DWORD [-520+EBP],EAX
   135 00000140 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   136 00000147 0F AF C3                        	IMUL	EAX,EBX
   137 0000014A 50                              	PUSH	EAX
   138 0000014B 8D 9D FFFFFE14                  	LEA	EBX,DWORD [-492+EBP]
   139 00000151 68 003C0000                     	PUSH	3932160
   140 00000156 E8 [00000000]                   	CALL	_memman_alloc_4k
   141 0000015B 68 00002A80                     	PUSH	10880
   142 00000160 68 003C0000                     	PUSH	3932160
   143 00000165 89 85 FFFFFDF4                  	MOV	DWORD [-524+EBP],EAX
   144 0000016B E8 [00000000]                   	CALL	_memman_alloc_4k
   145 00000170 6A FF                           	PUSH	-1
   146 00000172 89 85 FFFFFDF0                  	MOV	DWORD [-528+EBP],EAX
   147 00000178 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   148 0000017F 50                              	PUSH	EAX
   149 00000180 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   150 00000187 50                              	PUSH	EAX
   151 00000188 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   152 0000018E FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   153 00000194 E8 [00000000]                   	CALL	_sheet_setbuf
   154 00000199 83 C4 2C                        	ADD	ESP,44
   155 0000019C 6A 63                           	PUSH	99
   156 0000019E 6A 10                           	PUSH	16
   157 000001A0 6A 10                           	PUSH	16
   158 000001A2 53                              	PUSH	EBX
   159 000001A3 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   160 000001A9 E8 [00000000]                   	CALL	_sheet_setbuf
   161 000001AE 6A FF                           	PUSH	-1
   162 000001B0 6A 44                           	PUSH	68
   163 000001B2 68 000000A0                     	PUSH	160
   164 000001B7 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   165 000001BD FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   166 000001C3 E8 [00000000]                   	CALL	_sheet_setbuf
   167 000001C8 83 C4 28                        	ADD	ESP,40
   168 000001CB 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   169 000001D2 50                              	PUSH	EAX
   170 000001D3 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   171 000001DA 50                              	PUSH	EAX
   172 000001DB FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   173 000001E1 E8 [00000000]                   	CALL	_init_screen
   174 000001E6 6A 63                           	PUSH	99
   175 000001E8 53                              	PUSH	EBX
   176 000001E9 BB 00000002                     	MOV	EBX,2
   177 000001EE E8 [00000000]                   	CALL	_init_mouse_cursor8
   178 000001F3 68 [00000000]                   	PUSH	LC0
   179 000001F8 6A 44                           	PUSH	68
   180 000001FA 68 000000A0                     	PUSH	160
   181 000001FF FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   182 00000205 E8 000003C7                     	CALL	_make_window
   183 0000020A 83 C4 24                        	ADD	ESP,36
   184 0000020D 68 [00000007]                   	PUSH	LC1
   185 00000212 6A 1C                           	PUSH	28
   186 00000214 6A 18                           	PUSH	24
   187 00000216 6A 00                           	PUSH	0
   188 00000218 68 000000A0                     	PUSH	160
   189 0000021D FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   190 00000223 E8 [00000000]                   	CALL	_putfonts8_asc
   191 00000228 68 [00000012]                   	PUSH	LC2
   192 0000022D 6A 2C                           	PUSH	44
   193 0000022F 6A 18                           	PUSH	24
   194 00000231 6A 00                           	PUSH	0
   195 00000233 68 000000A0                     	PUSH	160
   196 00000238 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   197 0000023E E8 [00000000]                   	CALL	_putfonts8_asc
   198 00000243 83 C4 30                        	ADD	ESP,48
   199 00000246 6A 00                           	PUSH	0
   200 00000248 6A 00                           	PUSH	0
   201 0000024A FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   202 00000250 E8 [00000000]                   	CALL	_sheet_slide
   203 00000255 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   204 0000025C 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   205 0000025F 89 C8                           	MOV	EAX,ECX
   206 00000261 99                              	CDQ
   207 00000262 F7 FB                           	IDIV	EBX
   208 00000264 89 C6                           	MOV	ESI,EAX
   209 00000266 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   210 0000026D 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   211 00000270 89 C8                           	MOV	EAX,ECX
   212 00000272 99                              	CDQ
   213 00000273 F7 FB                           	IDIV	EBX
   214 00000275 50                              	PUSH	EAX
   215 00000276 89 C7                           	MOV	EDI,EAX
   216 00000278 56                              	PUSH	ESI
   217 00000279 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   218 0000027C FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   219 00000282 E8 [00000000]                   	CALL	_sheet_slide
   220 00000287 6A 48                           	PUSH	72
   221 00000289 6A 50                           	PUSH	80
   222 0000028B FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   223 00000291 E8 [00000000]                   	CALL	_sheet_slide
   224 00000296 83 C4 24                        	ADD	ESP,36
   225 00000299 6A 00                           	PUSH	0
   226 0000029B FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   227 000002A1 E8 [00000000]                   	CALL	_sheet_updown
   228 000002A6 6A 01                           	PUSH	1
   229 000002A8 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   230 000002AE E8 [00000000]                   	CALL	_sheet_updown
   231 000002B3 6A 02                           	PUSH	2
   232 000002B5 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   233 000002BB E8 [00000000]                   	CALL	_sheet_updown
   234 000002C0 57                              	PUSH	EDI
   235 000002C1 56                              	PUSH	ESI
   236 000002C2 68 [0000001B]                   	PUSH	LC3
   237 000002C7 53                              	PUSH	EBX
   238 000002C8 E8 [00000000]                   	CALL	_sprintf
   239 000002CD 83 C4 28                        	ADD	ESP,40
   240 000002D0 53                              	PUSH	EBX
   241 000002D1 6A 00                           	PUSH	0
   242 000002D3 6A 00                           	PUSH	0
   243 000002D5 6A 07                           	PUSH	7
   244 000002D7 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   245 000002DE 50                              	PUSH	EAX
   246 000002DF FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   247 000002E5 E8 [00000000]                   	CALL	_putfonts8_asc
   248 000002EA 68 003C0000                     	PUSH	3932160
   249 000002EF E8 [00000000]                   	CALL	_memman_total
   250 000002F4 C1 AD FFFFFE08 14               	SHR	DWORD [-504+EBP],20
   251 000002FB C1 E8 0A                        	SHR	EAX,10
   252 000002FE 89 04 24                        	MOV	DWORD [ESP],EAX
   253 00000301 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   254 00000307 68 [00000026]                   	PUSH	LC4
   255 0000030C 53                              	PUSH	EBX
   256 0000030D E8 [00000000]                   	CALL	_sprintf
   257 00000312 83 C4 28                        	ADD	ESP,40
   258 00000315 53                              	PUSH	EBX
   259 00000316 6A 20                           	PUSH	32
   260 00000318 6A 00                           	PUSH	0
   261 0000031A 6A 07                           	PUSH	7
   262 0000031C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   263 00000323 50                              	PUSH	EAX
   264 00000324                                 L18:
   265 00000324 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   266 0000032A E8 [00000000]                   	CALL	_putfonts8_asc
   267 0000032F 6A 30                           	PUSH	48
   268 00000331 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   269 00000337 6A 00                           	PUSH	0
   270 00000339 6A 00                           	PUSH	0
   271 0000033B FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   272 00000341 E8 [00000000]                   	CALL	_sheet_refresh
   273 00000346 83 C4 2C                        	ADD	ESP,44
   274 00000349                                 L2:
   275 00000349 FF 85 FFFFFE04                  	INC	DWORD [-508+EBP]
   276 0000034F 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   277 00000352 FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   278 00000358 68 [0000003E]                   	PUSH	LC5
   279 0000035D 53                              	PUSH	EBX
   280 0000035E E8 [00000000]                   	CALL	_sprintf
   281 00000363 6A 2B                           	PUSH	43
   282 00000365 6A 77                           	PUSH	119
   283 00000367 6A 1C                           	PUSH	28
   284 00000369 6A 28                           	PUSH	40
   285 0000036B 6A 00                           	PUSH	0
   286 0000036D 68 000000A0                     	PUSH	160
   287 00000372 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   288 00000378 E8 [00000000]                   	CALL	_boxfill8
   289 0000037D 83 C4 28                        	ADD	ESP,40
   290 00000380 53                              	PUSH	EBX
   291 00000381 6A 1C                           	PUSH	28
   292 00000383 6A 28                           	PUSH	40
   293 00000385 6A 08                           	PUSH	8
   294 00000387 68 000000A0                     	PUSH	160
   295 0000038C FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   296 00000392 E8 [00000000]                   	CALL	_putfonts8_asc
   297 00000397 6A 2C                           	PUSH	44
   298 00000399 6A 78                           	PUSH	120
   299 0000039B 6A 1C                           	PUSH	28
   300 0000039D 6A 28                           	PUSH	40
   301 0000039F FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   302 000003A5 E8 [00000000]                   	CALL	_sheet_refresh
   303 000003AA 83 C4 2C                        	ADD	ESP,44
   304 000003AD E8 [00000000]                   	CALL	_io_cli
   305 000003B2 68 [00000000]                   	PUSH	_keyfifo
   306 000003B7 E8 [00000000]                   	CALL	_fifo8_status
   307 000003BC 68 [00000000]                   	PUSH	_mousefifo
   308 000003C1 89 C3                           	MOV	EBX,EAX
   309 000003C3 E8 [00000000]                   	CALL	_fifo8_status
   310 000003C8 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   311 000003CB 5B                              	POP	EBX
   312 000003CC 5A                              	POP	EDX
   313 000003CD 85 C0                           	TEST	EAX,EAX
   314 000003CF 0F 84 000001F2                  	JE	L19
   315 000003D5 68 [00000000]                   	PUSH	_keyfifo
   316 000003DA E8 [00000000]                   	CALL	_fifo8_status
   317 000003DF 59                              	POP	ECX
   318 000003E0 85 C0                           	TEST	EAX,EAX
   319 000003E2 0F 85 00000189                  	JNE	L20
   320 000003E8 68 [00000000]                   	PUSH	_mousefifo
   321 000003ED E8 [00000000]                   	CALL	_fifo8_status
   322 000003F2 5A                              	POP	EDX
   323 000003F3 85 C0                           	TEST	EAX,EAX
   324 000003F5 0F 84 FFFFFF4E                  	JE	L2
   325 000003FB 68 [00000000]                   	PUSH	_mousefifo
   326 00000400 E8 [00000000]                   	CALL	_fifo8_get
   327 00000405 88 C3                           	MOV	BL,AL
   328 00000407 E8 [00000000]                   	CALL	_io_sti
   329 0000040C 0F B6 C3                        	MOVZX	EAX,BL
   330 0000040F 50                              	PUSH	EAX
   331 00000410 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
   332 00000416 50                              	PUSH	EAX
   333 00000417 E8 [00000000]                   	CALL	_mouse_decode
   334 0000041C 83 C4 0C                        	ADD	ESP,12
   335 0000041F 85 C0                           	TEST	EAX,EAX
   336 00000421 0F 84 FFFFFF22                  	JE	L2
   337 00000427 FF B5 FFFFFF1C                  	PUSH	DWORD [-228+EBP]
   338 0000042D FF B5 FFFFFF18                  	PUSH	DWORD [-232+EBP]
   339 00000433 68 [00000044]                   	PUSH	LC7
   340 00000438 8D 45 C4                        	LEA	EAX,DWORD [-60+EBP]
   341 0000043B 50                              	PUSH	EAX
   342 0000043C E8 [00000000]                   	CALL	_sprintf
   343 00000441 83 C4 10                        	ADD	ESP,16
   344 00000444 8B 85 FFFFFF20                  	MOV	EAX,DWORD [-224+EBP]
   345 0000044A A9 00000001                     	TEST	EAX,1
   346 0000044F 74 04                           	JE	L11
   347 00000451 C6 45 C5 4C                     	MOV	BYTE [-59+EBP],76
   348 00000455                                 L11:
   349 00000455 A9 00000002                     	TEST	EAX,2
   350 0000045A 74 04                           	JE	L12
   351 0000045C C6 45 C7 52                     	MOV	BYTE [-57+EBP],82
   352 00000460                                 L12:
   353 00000460 83 E0 04                        	AND	EAX,4
   354 00000463 74 04                           	JE	L13
   355 00000465 C6 45 C6 43                     	MOV	BYTE [-58+EBP],67
   356 00000469                                 L13:
   357 00000469 6A 1F                           	PUSH	31
   358 0000046B 68 00000097                     	PUSH	151
   359 00000470 6A 10                           	PUSH	16
   360 00000472 6A 20                           	PUSH	32
   361 00000474 6A 0E                           	PUSH	14
   362 00000476 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   363 0000047C FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   364 00000482 E8 [00000000]                   	CALL	_boxfill8
   365 00000487 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   366 0000048A 52                              	PUSH	EDX
   367 0000048B 6A 10                           	PUSH	16
   368 0000048D 6A 20                           	PUSH	32
   369 0000048F 6A 07                           	PUSH	7
   370 00000491 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   371 00000497 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   372 0000049D E8 [00000000]                   	CALL	_putfonts8_asc
   373 000004A2 83 C4 34                        	ADD	ESP,52
   374 000004A5 6A 20                           	PUSH	32
   375 000004A7 68 00000098                     	PUSH	152
   376 000004AC 6A 10                           	PUSH	16
   377 000004AE 6A 20                           	PUSH	32
   378 000004B0 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   379 000004B6 E8 [00000000]                   	CALL	_sheet_refresh
   380 000004BB 83 C4 14                        	ADD	ESP,20
   381 000004BE 03 BD FFFFFF1C                  	ADD	EDI,DWORD [-228+EBP]
   382 000004C4 03 B5 FFFFFF18                  	ADD	ESI,DWORD [-232+EBP]
   383 000004CA 0F 88 0000009A                  	JS	L21
   384 000004D0                                 L14:
   385 000004D0 85 FF                           	TEST	EDI,EDI
   386 000004D2 0F 88 0000008B                  	JS	L22
   387 000004D8                                 L15:
   388 000004D8 8B 85 FFFFFE10                  	MOV	EAX,DWORD [-496+EBP]
   389 000004DE 48                              	DEC	EAX
   390 000004DF 39 C6                           	CMP	ESI,EAX
   391 000004E1 7E 02                           	JLE	L16
   392 000004E3 89 C6                           	MOV	ESI,EAX
   393 000004E5                                 L16:
   394 000004E5 8B 85 FFFFFE0C                  	MOV	EAX,DWORD [-500+EBP]
   395 000004EB 48                              	DEC	EAX
   396 000004EC 39 C7                           	CMP	EDI,EAX
   397 000004EE 7E 02                           	JLE	L17
   398 000004F0 89 C7                           	MOV	EDI,EAX
   399 000004F2                                 L17:
   400 000004F2 57                              	PUSH	EDI
   401 000004F3 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   402 000004F6 56                              	PUSH	ESI
   403 000004F7 68 [00000052]                   	PUSH	LC8
   404 000004FC 53                              	PUSH	EBX
   405 000004FD E8 [00000000]                   	CALL	_sprintf
   406 00000502 6A 0F                           	PUSH	15
   407 00000504 6A 4F                           	PUSH	79
   408 00000506 6A 00                           	PUSH	0
   409 00000508 6A 00                           	PUSH	0
   410 0000050A 6A 0E                           	PUSH	14
   411 0000050C FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   412 00000512 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   413 00000518 E8 [00000000]                   	CALL	_boxfill8
   414 0000051D 83 C4 2C                        	ADD	ESP,44
   415 00000520 53                              	PUSH	EBX
   416 00000521 6A 00                           	PUSH	0
   417 00000523 6A 00                           	PUSH	0
   418 00000525 6A 07                           	PUSH	7
   419 00000527 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   420 0000052D FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   421 00000533 E8 [00000000]                   	CALL	_putfonts8_asc
   422 00000538 6A 10                           	PUSH	16
   423 0000053A 6A 50                           	PUSH	80
   424 0000053C 6A 00                           	PUSH	0
   425 0000053E 6A 00                           	PUSH	0
   426 00000540 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   427 00000546 E8 [00000000]                   	CALL	_sheet_refresh
   428 0000054B 83 C4 2C                        	ADD	ESP,44
   429 0000054E 57                              	PUSH	EDI
   430 0000054F 56                              	PUSH	ESI
   431 00000550 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   432 00000556 E8 [00000000]                   	CALL	_sheet_slide
   433 0000055B 83 C4 0C                        	ADD	ESP,12
   434 0000055E E9 FFFFFDE6                     	JMP	L2
   435 00000563                                 L22:
   436 00000563 31 FF                           	XOR	EDI,EDI
   437 00000565 E9 FFFFFF6E                     	JMP	L15
   438 0000056A                                 L21:
   439 0000056A 31 F6                           	XOR	ESI,ESI
   440 0000056C E9 FFFFFF5F                     	JMP	L14
   441 00000571                                 L20:
   442 00000571 68 [00000000]                   	PUSH	_keyfifo
   443 00000576 E8 [00000000]                   	CALL	_fifo8_get
   444 0000057B 88 C3                           	MOV	BL,AL
   445 0000057D E8 [00000000]                   	CALL	_io_sti
   446 00000582 0F B6 C3                        	MOVZX	EAX,BL
   447 00000585 50                              	PUSH	EAX
   448 00000586 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   449 00000589 68 [0000005C]                   	PUSH	LC6
   450 0000058E 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   451 00000591 52                              	PUSH	EDX
   452 00000592 E8 [00000000]                   	CALL	_sprintf
   453 00000597 6A 1F                           	PUSH	31
   454 00000599 6A 0F                           	PUSH	15
   455 0000059B 6A 10                           	PUSH	16
   456 0000059D 6A 00                           	PUSH	0
   457 0000059F 6A 0E                           	PUSH	14
   458 000005A1 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   459 000005A7 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   460 000005AD E8 [00000000]                   	CALL	_boxfill8
   461 000005B2 83 C4 2C                        	ADD	ESP,44
   462 000005B5 53                              	PUSH	EBX
   463 000005B6 6A 10                           	PUSH	16
   464 000005B8 6A 00                           	PUSH	0
   465 000005BA 6A 07                           	PUSH	7
   466 000005BC FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   467 000005C2 E9 FFFFFD5D                     	JMP	L18
   468 000005C7                                 L19:
   469 000005C7 E8 [00000000]                   	CALL	_io_stihlt
   470 000005CC E9 FFFFFD78                     	JMP	L2
   471                                          [SECTION .data]
   472 00000061                                 _closebtn.0:
   473 00000061 4F 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"OOOOOOOOOOOOOOO@"
       0000006B 4F 4F 4F 4F 4F 40 
   474 00000071 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000007B 51 51 51 51 24 40 
   475 00000081 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000008B 51 51 51 51 24 40 
   476 00000091 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       0000009B 40 40 51 51 24 40 
   477 000000A1 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000AB 40 51 51 51 24 40 
   478 000000B1 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000BB 51 51 51 51 24 40 
   479 000000C1 4F 51 51 51 51 51 51 40 40 51   	DB	"OQQQQQQ@@QQQQQ$@"
       000000CB 51 51 51 51 24 40 
   480 000000D1 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000DB 51 51 51 51 24 40 
   481 000000E1 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000EB 40 51 51 51 24 40 
   482 000000F1 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       000000FB 40 40 51 51 24 40 
   483 00000101 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000010B 51 51 51 51 24 40 
   484 00000111 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000011B 51 51 51 51 24 40 
   485 00000121 4F 24 24 24 24 24 24 24 24 24   	DB	"O$$$$$$$$$$$$$$@"
       0000012B 24 24 24 24 24 40 
   486 00000131 40 40 40 40 40 40 40 40 40 40   	DB	"@@@@@@@@@@@@@@@@"
       0000013B 40 40 40 40 40 40 
   487                                          [SECTION .text]
   488 000005D1                                 	GLOBAL	_make_window
   489 000005D1                                 _make_window:
   490 000005D1 55                              	PUSH	EBP
   491 000005D2 89 E5                           	MOV	EBP,ESP
   492 000005D4 57                              	PUSH	EDI
   493 000005D5 56                              	PUSH	ESI
   494 000005D6 53                              	PUSH	EBX
   495 000005D7 83 EC 14                        	SUB	ESP,20
   496 000005DA 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   497 000005DD 6A 00                           	PUSH	0
   498 000005DF 8D 43 FF                        	LEA	EAX,DWORD [-1+EBX]
   499 000005E2 8D 7B FE                        	LEA	EDI,DWORD [-2+EBX]
   500 000005E5 50                              	PUSH	EAX
   501 000005E6 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   502 000005E9 6A 00                           	PUSH	0
   503 000005EB 6A 00                           	PUSH	0
   504 000005ED 6A 08                           	PUSH	8
   505 000005EF 53                              	PUSH	EBX
   506 000005F0 FF 75 08                        	PUSH	DWORD [8+EBP]
   507 000005F3 E8 [00000000]                   	CALL	_boxfill8
   508 000005F8 6A 01                           	PUSH	1
   509 000005FA 57                              	PUSH	EDI
   510 000005FB 6A 01                           	PUSH	1
   511 000005FD 6A 01                           	PUSH	1
   512 000005FF 6A 07                           	PUSH	7
   513 00000601 53                              	PUSH	EBX
   514 00000602 FF 75 08                        	PUSH	DWORD [8+EBP]
   515 00000605 E8 [00000000]                   	CALL	_boxfill8
   516 0000060A 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   517 0000060D 83 C4 38                        	ADD	ESP,56
   518 00000610 4A                              	DEC	EDX
   519 00000611 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   520 00000614 52                              	PUSH	EDX
   521 00000615 6A 00                           	PUSH	0
   522 00000617 6A 00                           	PUSH	0
   523 00000619 6A 00                           	PUSH	0
   524 0000061B 6A 08                           	PUSH	8
   525 0000061D 53                              	PUSH	EBX
   526 0000061E FF 75 08                        	PUSH	DWORD [8+EBP]
   527 00000621 E8 [00000000]                   	CALL	_boxfill8
   528 00000626 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   529 00000629 83 EE 02                        	SUB	ESI,2
   530 0000062C 56                              	PUSH	ESI
   531 0000062D 6A 01                           	PUSH	1
   532 0000062F 6A 01                           	PUSH	1
   533 00000631 6A 01                           	PUSH	1
   534 00000633 6A 07                           	PUSH	7
   535 00000635 53                              	PUSH	EBX
   536 00000636 FF 75 08                        	PUSH	DWORD [8+EBP]
   537 00000639 E8 [00000000]                   	CALL	_boxfill8
   538 0000063E 83 C4 38                        	ADD	ESP,56
   539 00000641 56                              	PUSH	ESI
   540 00000642 57                              	PUSH	EDI
   541 00000643 6A 01                           	PUSH	1
   542 00000645 57                              	PUSH	EDI
   543 00000646 6A 0F                           	PUSH	15
   544 00000648 53                              	PUSH	EBX
   545 00000649 FF 75 08                        	PUSH	DWORD [8+EBP]
   546 0000064C E8 [00000000]                   	CALL	_boxfill8
   547 00000651 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   548 00000654 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   549 00000657 6A 00                           	PUSH	0
   550 00000659 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   551 0000065C 6A 00                           	PUSH	0
   552 0000065E 53                              	PUSH	EBX
   553 0000065F FF 75 08                        	PUSH	DWORD [8+EBP]
   554 00000662 E8 [00000000]                   	CALL	_boxfill8
   555 00000667 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   556 0000066A 83 C4 38                        	ADD	ESP,56
   557 0000066D 83 E8 03                        	SUB	EAX,3
   558 00000670 50                              	PUSH	EAX
   559 00000671 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   560 00000674 50                              	PUSH	EAX
   561 00000675 6A 02                           	PUSH	2
   562 00000677 6A 02                           	PUSH	2
   563 00000679 6A 08                           	PUSH	8
   564 0000067B 53                              	PUSH	EBX
   565 0000067C FF 75 08                        	PUSH	DWORD [8+EBP]
   566 0000067F E8 [00000000]                   	CALL	_boxfill8
   567 00000684 8D 43 FC                        	LEA	EAX,DWORD [-4+EBX]
   568 00000687 6A 14                           	PUSH	20
   569 00000689 50                              	PUSH	EAX
   570 0000068A 6A 03                           	PUSH	3
   571 0000068C 6A 03                           	PUSH	3
   572 0000068E 6A 0C                           	PUSH	12
   573 00000690 53                              	PUSH	EBX
   574 00000691 FF 75 08                        	PUSH	DWORD [8+EBP]
   575 00000694 E8 [00000000]                   	CALL	_boxfill8
   576 00000699 83 C4 38                        	ADD	ESP,56
   577 0000069C 56                              	PUSH	ESI
   578 0000069D 57                              	PUSH	EDI
   579 0000069E 56                              	PUSH	ESI
   580 0000069F 6A 01                           	PUSH	1
   581 000006A1 6A 0F                           	PUSH	15
   582 000006A3 53                              	PUSH	EBX
   583 000006A4 FF 75 08                        	PUSH	DWORD [8+EBP]
   584 000006A7 E8 [00000000]                   	CALL	_boxfill8
   585 000006AC FF 75 E8                        	PUSH	DWORD [-24+EBP]
   586 000006AF FF 75 EC                        	PUSH	DWORD [-20+EBP]
   587 000006B2 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   588 000006B5 6A 00                           	PUSH	0
   589 000006B7 6A 00                           	PUSH	0
   590 000006B9 6B F3 05                        	IMUL	ESI,EBX,5
   591 000006BC 53                              	PUSH	EBX
   592 000006BD FF 75 08                        	PUSH	DWORD [8+EBP]
   593 000006C0 E8 [00000000]                   	CALL	_boxfill8
   594 000006C5 83 C4 38                        	ADD	ESP,56
   595 000006C8 FF 75 14                        	PUSH	DWORD [20+EBP]
   596 000006CB 6A 04                           	PUSH	4
   597 000006CD 6A 18                           	PUSH	24
   598 000006CF 6A 07                           	PUSH	7
   599 000006D1 53                              	PUSH	EBX
   600 000006D2 FF 75 08                        	PUSH	DWORD [8+EBP]
   601 000006D5 E8 [00000000]                   	CALL	_putfonts8_asc
   602 000006DA 83 C4 18                        	ADD	ESP,24
   603 000006DD C7 45 F0 00000000               	MOV	DWORD [-16+EBP],0
   604 000006E4 C7 45 E0 00000000               	MOV	DWORD [-32+EBP],0
   605 000006EB                                 L39:
   606 000006EB 8D 04 1E                        	LEA	EAX,DWORD [ESI+EBX*1]
   607 000006EE 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   608 000006F1 31 FF                           	XOR	EDI,EDI
   609 000006F3 8D 4C 02 EB                     	LEA	ECX,DWORD [-21+EDX+EAX*1]
   610 000006F7                                 L38:
   611 000006F7 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   612 000006FA 8A 94 07 [00000061]             	MOV	DL,BYTE [_closebtn.0+EDI+EAX*1]
   613 00000701 80 FA 40                        	CMP	DL,64
   614 00000704 74 33                           	JE	L44
   615 00000706 80 FA 24                        	CMP	DL,36
   616 00000709 74 2A                           	JE	L45
   617 0000070B 80 FA 51                        	CMP	DL,81
   618 0000070E B2 08                           	MOV	DL,8
   619 00000710 0F 95 C0                        	SETNE	AL
   620 00000713 28 C2                           	SUB	DL,AL
   621 00000715                                 L33:
   622 00000715 47                              	INC	EDI
   623 00000716 88 11                           	MOV	BYTE [ECX],DL
   624 00000718 41                              	INC	ECX
   625 00000719 83 FF 0F                        	CMP	EDI,15
   626 0000071C 7E D9                           	JLE	L38
   627 0000071E FF 45 F0                        	INC	DWORD [-16+EBP]
   628 00000721 01 DE                           	ADD	ESI,EBX
   629 00000723 83 45 E0 10                     	ADD	DWORD [-32+EBP],16
   630 00000727 83 7D F0 0D                     	CMP	DWORD [-16+EBP],13
   631 0000072B 7E BE                           	JLE	L39
   632 0000072D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   633 00000730 5B                              	POP	EBX
   634 00000731 5E                              	POP	ESI
   635 00000732 5F                              	POP	EDI
   636 00000733 5D                              	POP	EBP
   637 00000734 C3                              	RET
   638 00000735                                 L45:
   639 00000735 B2 0F                           	MOV	DL,15
   640 00000737 EB DC                           	JMP	L33
   641 00000739                                 L44:
   642 00000739 31 D2                           	XOR	EDX,EDX
   643 0000073B EB D8                           	JMP	L33
