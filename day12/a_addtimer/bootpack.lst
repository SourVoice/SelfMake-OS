     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_io_out8
    13 00000000                                 	EXTERN	_init_keyboard
    14 00000000                                 	EXTERN	_enable_mouse
    15 00000000                                 	EXTERN	_memtest
    16 00000000                                 	EXTERN	_memman_init
    17 00000000                                 	EXTERN	_memman_free
    18 00000000                                 	EXTERN	_init_palette
    19 00000000                                 	EXTERN	_shtctl_init
    20 00000000                                 	EXTERN	_sheet_alloc
    21 00000000                                 	EXTERN	_memman_alloc_4k
    22 00000000                                 	EXTERN	_sheet_setbuf
    23 00000000                                 	EXTERN	_init_screen
    24 00000000                                 	EXTERN	_init_mouse_cursor8
    25 00000000                                 	EXTERN	_putfonts8_asc
    26 00000000                                 	EXTERN	_sheet_slide
    27 00000000                                 	EXTERN	_sheet_updown
    28 00000000                                 	EXTERN	_sprintf
    29 00000000                                 	EXTERN	_memman_total
    30 00000000                                 	EXTERN	_sheet_refresh
    31 00000000                                 	EXTERN	_boxfill8
    32 00000000                                 	EXTERN	_io_cli
    33 00000000                                 	EXTERN	_fifo8_status
    34 00000000                                 	EXTERN	_fifo8_get
    35 00000000                                 	EXTERN	_mouse_decode
    36 00000000                                 	EXTERN	_io_stihlt
    37 00000000                                 [FILE "bootpack.c"]
    38                                          [SECTION .data]
    39 00000000                                 LC0:
    40 00000000 77 69 6E 64 6F 77 00            	DB	"window",0x00
    41 00000007                                 LC1:
    42 00000007 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       00000011 00 
    43 00000012                                 LC2:
    44 00000012 54 68 69 73 20 4F 53 21 00      	DB	"This OS!",0x00
    45 0000001B                                 LC3:
    46 0000001B 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       00000025 00 
    47 00000026                                 LC4:
    48 00000026 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB free : %dKB",0x00
       00000030 42 20 66 72 65 65 20 3A 20 25 
       0000003A 64 4B 42 00 
    49 0000003E                                 LC5:
    50 0000003E 25 30 31 30 64 00               	DB	"%010d",0x00
    51 00000044                                 LC7:
    52 00000044 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000004E 34 64 5D 00 
    53 00000052                                 LC8:
    54 00000052 28 25 33 64 2C 25 33 64 29 00   	DB	"(%3d,%3d)",0x00
    55 0000005C                                 LC6:
    56 0000005C 25 30 32 78 00                  	DB	"%02x",0x00
    57                                          [SECTION .text]
    58 00000000                                 	GLOBAL	_HariMain
    59 00000000                                 _HariMain:
    60 00000000 55                              	PUSH	EBP
    61 00000001 89 E5                           	MOV	EBP,ESP
    62 00000003 57                              	PUSH	EDI
    63 00000004 56                              	PUSH	ESI
    64 00000005 53                              	PUSH	EBX
    65 00000006 81 EC 0000020C                  	SUB	ESP,524
    66 0000000C 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    67 00000013 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    68 0000001A 89 95 FFFFFE0C                  	MOV	DWORD [-500+EBP],EDX
    69 00000020 89 85 FFFFFE10                  	MOV	DWORD [-496+EBP],EAX
    70 00000026 8B 1D 00000FF8                  	MOV	EBX,DWORD [4088]
    71 0000002C C7 85 FFFFFE04 00000000         	MOV	DWORD [-508+EBP],0
    72 00000036 E8 [00000000]                   	CALL	_init_gdtidt
    73 0000003B E8 [00000000]                   	CALL	_init_pic
    74 00000040 E8 [00000000]                   	CALL	_io_sti
    75 00000045 8D 45 A4                        	LEA	EAX,DWORD [-92+EBP]
    76 00000048 50                              	PUSH	EAX
    77 00000049 6A 20                           	PUSH	32
    78 0000004B 68 [00000000]                   	PUSH	_keyfifo
    79 00000050 E8 [00000000]                   	CALL	_fifo8_init
    80 00000055 8D 85 FFFFFF24                  	LEA	EAX,DWORD [-220+EBP]
    81 0000005B 50                              	PUSH	EAX
    82 0000005C 68 00000080                     	PUSH	128
    83 00000061 68 [00000000]                   	PUSH	_mousefifo
    84 00000066 E8 [00000000]                   	CALL	_fifo8_init
    85 0000006B 68 000000F9                     	PUSH	249
    86 00000070 6A 21                           	PUSH	33
    87 00000072 E8 [00000000]                   	CALL	_io_out8
    88 00000077 83 C4 20                        	ADD	ESP,32
    89 0000007A 68 000000EF                     	PUSH	239
    90 0000007F 68 000000A1                     	PUSH	161
    91 00000084 E8 [00000000]                   	CALL	_io_out8
    92 00000089 E8 [00000000]                   	CALL	_init_keyboard
    93 0000008E 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
    94 00000094 50                              	PUSH	EAX
    95 00000095 E8 [00000000]                   	CALL	_enable_mouse
    96 0000009A 68 BFFFFFFF                     	PUSH	-1073741825
    97 0000009F 68 00400000                     	PUSH	4194304
    98 000000A4 E8 [00000000]                   	CALL	_memtest
    99 000000A9 68 003C0000                     	PUSH	3932160
   100 000000AE 89 85 FFFFFE08                  	MOV	DWORD [-504+EBP],EAX
   101 000000B4 E8 [00000000]                   	CALL	_memman_init
   102 000000B9 68 0009E000                     	PUSH	647168
   103 000000BE 68 00001000                     	PUSH	4096
   104 000000C3 68 003C0000                     	PUSH	3932160
   105 000000C8 E8 [00000000]                   	CALL	_memman_free
   106 000000CD 8B 85 FFFFFE08                  	MOV	EAX,DWORD [-504+EBP]
   107 000000D3 83 C4 24                        	ADD	ESP,36
   108 000000D6 2D 00400000                     	SUB	EAX,4194304
   109 000000DB 50                              	PUSH	EAX
   110 000000DC 68 00400000                     	PUSH	4194304
   111 000000E1 68 003C0000                     	PUSH	3932160
   112 000000E6 E8 [00000000]                   	CALL	_memman_free
   113 000000EB E8 [00000000]                   	CALL	_init_palette
   114 000000F0 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   115 000000F7 50                              	PUSH	EAX
   116 000000F8 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   117 000000FF 50                              	PUSH	EAX
   118 00000100 53                              	PUSH	EBX
   119 00000101 68 003C0000                     	PUSH	3932160
   120 00000106 E8 [00000000]                   	CALL	_shtctl_init
   121 0000010B 89 C3                           	MOV	EBX,EAX
   122 0000010D 50                              	PUSH	EAX
   123 0000010E E8 [00000000]                   	CALL	_sheet_alloc
   124 00000113 83 C4 20                        	ADD	ESP,32
   125 00000116 53                              	PUSH	EBX
   126 00000117 89 85 FFFFFE00                  	MOV	DWORD [-512+EBP],EAX
   127 0000011D E8 [00000000]                   	CALL	_sheet_alloc
   128 00000122 53                              	PUSH	EBX
   129 00000123 89 85 FFFFFDFC                  	MOV	DWORD [-516+EBP],EAX
   130 00000129 E8 [00000000]                   	CALL	_sheet_alloc
   131 0000012E 0F BF 1D 00000FF6               	MOVSX	EBX,WORD [4086]
   132 00000135 89 85 FFFFFDF8                  	MOV	DWORD [-520+EBP],EAX
   133 0000013B 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   134 00000142 0F AF C3                        	IMUL	EAX,EBX
   135 00000145 50                              	PUSH	EAX
   136 00000146 8D 9D FFFFFE14                  	LEA	EBX,DWORD [-492+EBP]
   137 0000014C 68 003C0000                     	PUSH	3932160
   138 00000151 E8 [00000000]                   	CALL	_memman_alloc_4k
   139 00000156 68 00002A80                     	PUSH	10880
   140 0000015B 68 003C0000                     	PUSH	3932160
   141 00000160 89 85 FFFFFDF4                  	MOV	DWORD [-524+EBP],EAX
   142 00000166 E8 [00000000]                   	CALL	_memman_alloc_4k
   143 0000016B 6A FF                           	PUSH	-1
   144 0000016D 89 85 FFFFFDF0                  	MOV	DWORD [-528+EBP],EAX
   145 00000173 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   146 0000017A 50                              	PUSH	EAX
   147 0000017B 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   148 00000182 50                              	PUSH	EAX
   149 00000183 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   150 00000189 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   151 0000018F E8 [00000000]                   	CALL	_sheet_setbuf
   152 00000194 83 C4 2C                        	ADD	ESP,44
   153 00000197 6A 63                           	PUSH	99
   154 00000199 6A 10                           	PUSH	16
   155 0000019B 6A 10                           	PUSH	16
   156 0000019D 53                              	PUSH	EBX
   157 0000019E FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   158 000001A4 E8 [00000000]                   	CALL	_sheet_setbuf
   159 000001A9 6A FF                           	PUSH	-1
   160 000001AB 6A 44                           	PUSH	68
   161 000001AD 68 000000A0                     	PUSH	160
   162 000001B2 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   163 000001B8 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   164 000001BE E8 [00000000]                   	CALL	_sheet_setbuf
   165 000001C3 83 C4 28                        	ADD	ESP,40
   166 000001C6 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   167 000001CD 50                              	PUSH	EAX
   168 000001CE 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   169 000001D5 50                              	PUSH	EAX
   170 000001D6 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   171 000001DC E8 [00000000]                   	CALL	_init_screen
   172 000001E1 6A 63                           	PUSH	99
   173 000001E3 53                              	PUSH	EBX
   174 000001E4 BB 00000002                     	MOV	EBX,2
   175 000001E9 E8 [00000000]                   	CALL	_init_mouse_cursor8
   176 000001EE 68 [00000000]                   	PUSH	LC0
   177 000001F3 6A 44                           	PUSH	68
   178 000001F5 68 000000A0                     	PUSH	160
   179 000001FA FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   180 00000200 E8 000003C7                     	CALL	_make_window
   181 00000205 83 C4 24                        	ADD	ESP,36
   182 00000208 68 [00000007]                   	PUSH	LC1
   183 0000020D 6A 1C                           	PUSH	28
   184 0000020F 6A 18                           	PUSH	24
   185 00000211 6A 00                           	PUSH	0
   186 00000213 68 000000A0                     	PUSH	160
   187 00000218 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   188 0000021E E8 [00000000]                   	CALL	_putfonts8_asc
   189 00000223 68 [00000012]                   	PUSH	LC2
   190 00000228 6A 2C                           	PUSH	44
   191 0000022A 6A 18                           	PUSH	24
   192 0000022C 6A 00                           	PUSH	0
   193 0000022E 68 000000A0                     	PUSH	160
   194 00000233 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   195 00000239 E8 [00000000]                   	CALL	_putfonts8_asc
   196 0000023E 83 C4 30                        	ADD	ESP,48
   197 00000241 6A 00                           	PUSH	0
   198 00000243 6A 00                           	PUSH	0
   199 00000245 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   200 0000024B E8 [00000000]                   	CALL	_sheet_slide
   201 00000250 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   202 00000257 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   203 0000025A 89 C8                           	MOV	EAX,ECX
   204 0000025C 99                              	CDQ
   205 0000025D F7 FB                           	IDIV	EBX
   206 0000025F 89 C6                           	MOV	ESI,EAX
   207 00000261 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   208 00000268 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   209 0000026B 89 C8                           	MOV	EAX,ECX
   210 0000026D 99                              	CDQ
   211 0000026E F7 FB                           	IDIV	EBX
   212 00000270 50                              	PUSH	EAX
   213 00000271 89 C7                           	MOV	EDI,EAX
   214 00000273 56                              	PUSH	ESI
   215 00000274 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   216 00000277 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   217 0000027D E8 [00000000]                   	CALL	_sheet_slide
   218 00000282 6A 48                           	PUSH	72
   219 00000284 6A 50                           	PUSH	80
   220 00000286 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   221 0000028C E8 [00000000]                   	CALL	_sheet_slide
   222 00000291 83 C4 24                        	ADD	ESP,36
   223 00000294 6A 00                           	PUSH	0
   224 00000296 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   225 0000029C E8 [00000000]                   	CALL	_sheet_updown
   226 000002A1 6A 01                           	PUSH	1
   227 000002A3 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   228 000002A9 E8 [00000000]                   	CALL	_sheet_updown
   229 000002AE 6A 02                           	PUSH	2
   230 000002B0 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   231 000002B6 E8 [00000000]                   	CALL	_sheet_updown
   232 000002BB 57                              	PUSH	EDI
   233 000002BC 56                              	PUSH	ESI
   234 000002BD 68 [0000001B]                   	PUSH	LC3
   235 000002C2 53                              	PUSH	EBX
   236 000002C3 E8 [00000000]                   	CALL	_sprintf
   237 000002C8 83 C4 28                        	ADD	ESP,40
   238 000002CB 53                              	PUSH	EBX
   239 000002CC 6A 00                           	PUSH	0
   240 000002CE 6A 00                           	PUSH	0
   241 000002D0 6A 07                           	PUSH	7
   242 000002D2 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   243 000002D9 50                              	PUSH	EAX
   244 000002DA FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   245 000002E0 E8 [00000000]                   	CALL	_putfonts8_asc
   246 000002E5 68 003C0000                     	PUSH	3932160
   247 000002EA E8 [00000000]                   	CALL	_memman_total
   248 000002EF C1 AD FFFFFE08 14               	SHR	DWORD [-504+EBP],20
   249 000002F6 C1 E8 0A                        	SHR	EAX,10
   250 000002F9 89 04 24                        	MOV	DWORD [ESP],EAX
   251 000002FC FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   252 00000302 68 [00000026]                   	PUSH	LC4
   253 00000307 53                              	PUSH	EBX
   254 00000308 E8 [00000000]                   	CALL	_sprintf
   255 0000030D 83 C4 28                        	ADD	ESP,40
   256 00000310 53                              	PUSH	EBX
   257 00000311 6A 20                           	PUSH	32
   258 00000313 6A 00                           	PUSH	0
   259 00000315 6A 07                           	PUSH	7
   260 00000317 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   261 0000031E 50                              	PUSH	EAX
   262 0000031F                                 L18:
   263 0000031F FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   264 00000325 E8 [00000000]                   	CALL	_putfonts8_asc
   265 0000032A 6A 30                           	PUSH	48
   266 0000032C FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   267 00000332 6A 00                           	PUSH	0
   268 00000334 6A 00                           	PUSH	0
   269 00000336 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   270 0000033C E8 [00000000]                   	CALL	_sheet_refresh
   271 00000341 83 C4 2C                        	ADD	ESP,44
   272 00000344                                 L2:
   273 00000344 FF 85 FFFFFE04                  	INC	DWORD [-508+EBP]
   274 0000034A 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   275 0000034D FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   276 00000353 68 [0000003E]                   	PUSH	LC5
   277 00000358 53                              	PUSH	EBX
   278 00000359 E8 [00000000]                   	CALL	_sprintf
   279 0000035E 6A 2B                           	PUSH	43
   280 00000360 6A 77                           	PUSH	119
   281 00000362 6A 1C                           	PUSH	28
   282 00000364 6A 28                           	PUSH	40
   283 00000366 6A 00                           	PUSH	0
   284 00000368 68 000000A0                     	PUSH	160
   285 0000036D FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   286 00000373 E8 [00000000]                   	CALL	_boxfill8
   287 00000378 83 C4 28                        	ADD	ESP,40
   288 0000037B 53                              	PUSH	EBX
   289 0000037C 6A 1C                           	PUSH	28
   290 0000037E 6A 28                           	PUSH	40
   291 00000380 6A 08                           	PUSH	8
   292 00000382 68 000000A0                     	PUSH	160
   293 00000387 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   294 0000038D E8 [00000000]                   	CALL	_putfonts8_asc
   295 00000392 6A 2C                           	PUSH	44
   296 00000394 6A 78                           	PUSH	120
   297 00000396 6A 1C                           	PUSH	28
   298 00000398 6A 28                           	PUSH	40
   299 0000039A FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   300 000003A0 E8 [00000000]                   	CALL	_sheet_refresh
   301 000003A5 83 C4 2C                        	ADD	ESP,44
   302 000003A8 E8 [00000000]                   	CALL	_io_cli
   303 000003AD 68 [00000000]                   	PUSH	_keyfifo
   304 000003B2 E8 [00000000]                   	CALL	_fifo8_status
   305 000003B7 68 [00000000]                   	PUSH	_mousefifo
   306 000003BC 89 C3                           	MOV	EBX,EAX
   307 000003BE E8 [00000000]                   	CALL	_fifo8_status
   308 000003C3 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   309 000003C6 5B                              	POP	EBX
   310 000003C7 5A                              	POP	EDX
   311 000003C8 85 C0                           	TEST	EAX,EAX
   312 000003CA 0F 84 000001F2                  	JE	L19
   313 000003D0 68 [00000000]                   	PUSH	_keyfifo
   314 000003D5 E8 [00000000]                   	CALL	_fifo8_status
   315 000003DA 59                              	POP	ECX
   316 000003DB 85 C0                           	TEST	EAX,EAX
   317 000003DD 0F 85 00000189                  	JNE	L20
   318 000003E3 68 [00000000]                   	PUSH	_mousefifo
   319 000003E8 E8 [00000000]                   	CALL	_fifo8_status
   320 000003ED 5A                              	POP	EDX
   321 000003EE 85 C0                           	TEST	EAX,EAX
   322 000003F0 0F 84 FFFFFF4E                  	JE	L2
   323 000003F6 68 [00000000]                   	PUSH	_mousefifo
   324 000003FB E8 [00000000]                   	CALL	_fifo8_get
   325 00000400 88 C3                           	MOV	BL,AL
   326 00000402 E8 [00000000]                   	CALL	_io_sti
   327 00000407 0F B6 C3                        	MOVZX	EAX,BL
   328 0000040A 50                              	PUSH	EAX
   329 0000040B 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
   330 00000411 50                              	PUSH	EAX
   331 00000412 E8 [00000000]                   	CALL	_mouse_decode
   332 00000417 83 C4 0C                        	ADD	ESP,12
   333 0000041A 85 C0                           	TEST	EAX,EAX
   334 0000041C 0F 84 FFFFFF22                  	JE	L2
   335 00000422 FF B5 FFFFFF1C                  	PUSH	DWORD [-228+EBP]
   336 00000428 FF B5 FFFFFF18                  	PUSH	DWORD [-232+EBP]
   337 0000042E 68 [00000044]                   	PUSH	LC7
   338 00000433 8D 45 C4                        	LEA	EAX,DWORD [-60+EBP]
   339 00000436 50                              	PUSH	EAX
   340 00000437 E8 [00000000]                   	CALL	_sprintf
   341 0000043C 83 C4 10                        	ADD	ESP,16
   342 0000043F 8B 85 FFFFFF20                  	MOV	EAX,DWORD [-224+EBP]
   343 00000445 A9 00000001                     	TEST	EAX,1
   344 0000044A 74 04                           	JE	L11
   345 0000044C C6 45 C5 4C                     	MOV	BYTE [-59+EBP],76
   346 00000450                                 L11:
   347 00000450 A9 00000002                     	TEST	EAX,2
   348 00000455 74 04                           	JE	L12
   349 00000457 C6 45 C7 52                     	MOV	BYTE [-57+EBP],82
   350 0000045B                                 L12:
   351 0000045B 83 E0 04                        	AND	EAX,4
   352 0000045E 74 04                           	JE	L13
   353 00000460 C6 45 C6 43                     	MOV	BYTE [-58+EBP],67
   354 00000464                                 L13:
   355 00000464 6A 1F                           	PUSH	31
   356 00000466 68 00000097                     	PUSH	151
   357 0000046B 6A 10                           	PUSH	16
   358 0000046D 6A 20                           	PUSH	32
   359 0000046F 6A 0E                           	PUSH	14
   360 00000471 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   361 00000477 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   362 0000047D E8 [00000000]                   	CALL	_boxfill8
   363 00000482 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   364 00000485 52                              	PUSH	EDX
   365 00000486 6A 10                           	PUSH	16
   366 00000488 6A 20                           	PUSH	32
   367 0000048A 6A 07                           	PUSH	7
   368 0000048C FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   369 00000492 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   370 00000498 E8 [00000000]                   	CALL	_putfonts8_asc
   371 0000049D 83 C4 34                        	ADD	ESP,52
   372 000004A0 6A 20                           	PUSH	32
   373 000004A2 68 00000098                     	PUSH	152
   374 000004A7 6A 10                           	PUSH	16
   375 000004A9 6A 20                           	PUSH	32
   376 000004AB FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   377 000004B1 E8 [00000000]                   	CALL	_sheet_refresh
   378 000004B6 83 C4 14                        	ADD	ESP,20
   379 000004B9 03 BD FFFFFF1C                  	ADD	EDI,DWORD [-228+EBP]
   380 000004BF 03 B5 FFFFFF18                  	ADD	ESI,DWORD [-232+EBP]
   381 000004C5 0F 88 0000009A                  	JS	L21
   382 000004CB                                 L14:
   383 000004CB 85 FF                           	TEST	EDI,EDI
   384 000004CD 0F 88 0000008B                  	JS	L22
   385 000004D3                                 L15:
   386 000004D3 8B 85 FFFFFE10                  	MOV	EAX,DWORD [-496+EBP]
   387 000004D9 48                              	DEC	EAX
   388 000004DA 39 C6                           	CMP	ESI,EAX
   389 000004DC 7E 02                           	JLE	L16
   390 000004DE 89 C6                           	MOV	ESI,EAX
   391 000004E0                                 L16:
   392 000004E0 8B 85 FFFFFE0C                  	MOV	EAX,DWORD [-500+EBP]
   393 000004E6 48                              	DEC	EAX
   394 000004E7 39 C7                           	CMP	EDI,EAX
   395 000004E9 7E 02                           	JLE	L17
   396 000004EB 89 C7                           	MOV	EDI,EAX
   397 000004ED                                 L17:
   398 000004ED 57                              	PUSH	EDI
   399 000004EE 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   400 000004F1 56                              	PUSH	ESI
   401 000004F2 68 [00000052]                   	PUSH	LC8
   402 000004F7 53                              	PUSH	EBX
   403 000004F8 E8 [00000000]                   	CALL	_sprintf
   404 000004FD 6A 0F                           	PUSH	15
   405 000004FF 6A 4F                           	PUSH	79
   406 00000501 6A 00                           	PUSH	0
   407 00000503 6A 00                           	PUSH	0
   408 00000505 6A 0E                           	PUSH	14
   409 00000507 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   410 0000050D FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   411 00000513 E8 [00000000]                   	CALL	_boxfill8
   412 00000518 83 C4 2C                        	ADD	ESP,44
   413 0000051B 53                              	PUSH	EBX
   414 0000051C 6A 00                           	PUSH	0
   415 0000051E 6A 00                           	PUSH	0
   416 00000520 6A 07                           	PUSH	7
   417 00000522 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   418 00000528 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   419 0000052E E8 [00000000]                   	CALL	_putfonts8_asc
   420 00000533 6A 10                           	PUSH	16
   421 00000535 6A 50                           	PUSH	80
   422 00000537 6A 00                           	PUSH	0
   423 00000539 6A 00                           	PUSH	0
   424 0000053B FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   425 00000541 E8 [00000000]                   	CALL	_sheet_refresh
   426 00000546 83 C4 2C                        	ADD	ESP,44
   427 00000549 57                              	PUSH	EDI
   428 0000054A 56                              	PUSH	ESI
   429 0000054B FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   430 00000551 E8 [00000000]                   	CALL	_sheet_slide
   431 00000556 83 C4 0C                        	ADD	ESP,12
   432 00000559 E9 FFFFFDE6                     	JMP	L2
   433 0000055E                                 L22:
   434 0000055E 31 FF                           	XOR	EDI,EDI
   435 00000560 E9 FFFFFF6E                     	JMP	L15
   436 00000565                                 L21:
   437 00000565 31 F6                           	XOR	ESI,ESI
   438 00000567 E9 FFFFFF5F                     	JMP	L14
   439 0000056C                                 L20:
   440 0000056C 68 [00000000]                   	PUSH	_keyfifo
   441 00000571 E8 [00000000]                   	CALL	_fifo8_get
   442 00000576 88 C3                           	MOV	BL,AL
   443 00000578 E8 [00000000]                   	CALL	_io_sti
   444 0000057D 0F B6 C3                        	MOVZX	EAX,BL
   445 00000580 50                              	PUSH	EAX
   446 00000581 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   447 00000584 68 [0000005C]                   	PUSH	LC6
   448 00000589 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   449 0000058C 52                              	PUSH	EDX
   450 0000058D E8 [00000000]                   	CALL	_sprintf
   451 00000592 6A 1F                           	PUSH	31
   452 00000594 6A 0F                           	PUSH	15
   453 00000596 6A 10                           	PUSH	16
   454 00000598 6A 00                           	PUSH	0
   455 0000059A 6A 0E                           	PUSH	14
   456 0000059C FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   457 000005A2 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   458 000005A8 E8 [00000000]                   	CALL	_boxfill8
   459 000005AD 83 C4 2C                        	ADD	ESP,44
   460 000005B0 53                              	PUSH	EBX
   461 000005B1 6A 10                           	PUSH	16
   462 000005B3 6A 00                           	PUSH	0
   463 000005B5 6A 07                           	PUSH	7
   464 000005B7 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   465 000005BD E9 FFFFFD5D                     	JMP	L18
   466 000005C2                                 L19:
   467 000005C2 E8 [00000000]                   	CALL	_io_stihlt
   468 000005C7 E9 FFFFFD78                     	JMP	L2
   469                                          [SECTION .data]
   470 00000061                                 _closebtn.0:
   471 00000061 4F 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"OOOOOOOOOOOOOOO@"
       0000006B 4F 4F 4F 4F 4F 40 
   472 00000071 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000007B 51 51 51 51 24 40 
   473 00000081 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000008B 51 51 51 51 24 40 
   474 00000091 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       0000009B 40 40 51 51 24 40 
   475 000000A1 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000AB 40 51 51 51 24 40 
   476 000000B1 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000BB 51 51 51 51 24 40 
   477 000000C1 4F 51 51 51 51 51 51 40 40 51   	DB	"OQQQQQQ@@QQQQQ$@"
       000000CB 51 51 51 51 24 40 
   478 000000D1 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000DB 51 51 51 51 24 40 
   479 000000E1 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000EB 40 51 51 51 24 40 
   480 000000F1 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       000000FB 40 40 51 51 24 40 
   481 00000101 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000010B 51 51 51 51 24 40 
   482 00000111 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000011B 51 51 51 51 24 40 
   483 00000121 4F 24 24 24 24 24 24 24 24 24   	DB	"O$$$$$$$$$$$$$$@"
       0000012B 24 24 24 24 24 40 
   484 00000131 40 40 40 40 40 40 40 40 40 40   	DB	"@@@@@@@@@@@@@@@@"
       0000013B 40 40 40 40 40 40 
   485                                          [SECTION .text]
   486 000005CC                                 	GLOBAL	_make_window
   487 000005CC                                 _make_window:
   488 000005CC 55                              	PUSH	EBP
   489 000005CD 89 E5                           	MOV	EBP,ESP
   490 000005CF 57                              	PUSH	EDI
   491 000005D0 56                              	PUSH	ESI
   492 000005D1 53                              	PUSH	EBX
   493 000005D2 83 EC 14                        	SUB	ESP,20
   494 000005D5 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   495 000005D8 6A 00                           	PUSH	0
   496 000005DA 8D 43 FF                        	LEA	EAX,DWORD [-1+EBX]
   497 000005DD 8D 7B FE                        	LEA	EDI,DWORD [-2+EBX]
   498 000005E0 50                              	PUSH	EAX
   499 000005E1 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   500 000005E4 6A 00                           	PUSH	0
   501 000005E6 6A 00                           	PUSH	0
   502 000005E8 6A 08                           	PUSH	8
   503 000005EA 53                              	PUSH	EBX
   504 000005EB FF 75 08                        	PUSH	DWORD [8+EBP]
   505 000005EE E8 [00000000]                   	CALL	_boxfill8
   506 000005F3 6A 01                           	PUSH	1
   507 000005F5 57                              	PUSH	EDI
   508 000005F6 6A 01                           	PUSH	1
   509 000005F8 6A 01                           	PUSH	1
   510 000005FA 6A 07                           	PUSH	7
   511 000005FC 53                              	PUSH	EBX
   512 000005FD FF 75 08                        	PUSH	DWORD [8+EBP]
   513 00000600 E8 [00000000]                   	CALL	_boxfill8
   514 00000605 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   515 00000608 83 C4 38                        	ADD	ESP,56
   516 0000060B 4A                              	DEC	EDX
   517 0000060C 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   518 0000060F 52                              	PUSH	EDX
   519 00000610 6A 00                           	PUSH	0
   520 00000612 6A 00                           	PUSH	0
   521 00000614 6A 00                           	PUSH	0
   522 00000616 6A 08                           	PUSH	8
   523 00000618 53                              	PUSH	EBX
   524 00000619 FF 75 08                        	PUSH	DWORD [8+EBP]
   525 0000061C E8 [00000000]                   	CALL	_boxfill8
   526 00000621 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   527 00000624 83 EE 02                        	SUB	ESI,2
   528 00000627 56                              	PUSH	ESI
   529 00000628 6A 01                           	PUSH	1
   530 0000062A 6A 01                           	PUSH	1
   531 0000062C 6A 01                           	PUSH	1
   532 0000062E 6A 07                           	PUSH	7
   533 00000630 53                              	PUSH	EBX
   534 00000631 FF 75 08                        	PUSH	DWORD [8+EBP]
   535 00000634 E8 [00000000]                   	CALL	_boxfill8
   536 00000639 83 C4 38                        	ADD	ESP,56
   537 0000063C 56                              	PUSH	ESI
   538 0000063D 57                              	PUSH	EDI
   539 0000063E 6A 01                           	PUSH	1
   540 00000640 57                              	PUSH	EDI
   541 00000641 6A 0F                           	PUSH	15
   542 00000643 53                              	PUSH	EBX
   543 00000644 FF 75 08                        	PUSH	DWORD [8+EBP]
   544 00000647 E8 [00000000]                   	CALL	_boxfill8
   545 0000064C FF 75 E8                        	PUSH	DWORD [-24+EBP]
   546 0000064F FF 75 EC                        	PUSH	DWORD [-20+EBP]
   547 00000652 6A 00                           	PUSH	0
   548 00000654 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   549 00000657 6A 00                           	PUSH	0
   550 00000659 53                              	PUSH	EBX
   551 0000065A FF 75 08                        	PUSH	DWORD [8+EBP]
   552 0000065D E8 [00000000]                   	CALL	_boxfill8
   553 00000662 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   554 00000665 83 C4 38                        	ADD	ESP,56
   555 00000668 83 E8 03                        	SUB	EAX,3
   556 0000066B 50                              	PUSH	EAX
   557 0000066C 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   558 0000066F 50                              	PUSH	EAX
   559 00000670 6A 02                           	PUSH	2
   560 00000672 6A 02                           	PUSH	2
   561 00000674 6A 08                           	PUSH	8
   562 00000676 53                              	PUSH	EBX
   563 00000677 FF 75 08                        	PUSH	DWORD [8+EBP]
   564 0000067A E8 [00000000]                   	CALL	_boxfill8
   565 0000067F 8D 43 FC                        	LEA	EAX,DWORD [-4+EBX]
   566 00000682 6A 14                           	PUSH	20
   567 00000684 50                              	PUSH	EAX
   568 00000685 6A 03                           	PUSH	3
   569 00000687 6A 03                           	PUSH	3
   570 00000689 6A 0C                           	PUSH	12
   571 0000068B 53                              	PUSH	EBX
   572 0000068C FF 75 08                        	PUSH	DWORD [8+EBP]
   573 0000068F E8 [00000000]                   	CALL	_boxfill8
   574 00000694 83 C4 38                        	ADD	ESP,56
   575 00000697 56                              	PUSH	ESI
   576 00000698 57                              	PUSH	EDI
   577 00000699 56                              	PUSH	ESI
   578 0000069A 6A 01                           	PUSH	1
   579 0000069C 6A 0F                           	PUSH	15
   580 0000069E 53                              	PUSH	EBX
   581 0000069F FF 75 08                        	PUSH	DWORD [8+EBP]
   582 000006A2 E8 [00000000]                   	CALL	_boxfill8
   583 000006A7 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   584 000006AA FF 75 EC                        	PUSH	DWORD [-20+EBP]
   585 000006AD FF 75 E8                        	PUSH	DWORD [-24+EBP]
   586 000006B0 6A 00                           	PUSH	0
   587 000006B2 6A 00                           	PUSH	0
   588 000006B4 6B F3 05                        	IMUL	ESI,EBX,5
   589 000006B7 53                              	PUSH	EBX
   590 000006B8 FF 75 08                        	PUSH	DWORD [8+EBP]
   591 000006BB E8 [00000000]                   	CALL	_boxfill8
   592 000006C0 83 C4 38                        	ADD	ESP,56
   593 000006C3 FF 75 14                        	PUSH	DWORD [20+EBP]
   594 000006C6 6A 04                           	PUSH	4
   595 000006C8 6A 18                           	PUSH	24
   596 000006CA 6A 07                           	PUSH	7
   597 000006CC 53                              	PUSH	EBX
   598 000006CD FF 75 08                        	PUSH	DWORD [8+EBP]
   599 000006D0 E8 [00000000]                   	CALL	_putfonts8_asc
   600 000006D5 83 C4 18                        	ADD	ESP,24
   601 000006D8 C7 45 F0 00000000               	MOV	DWORD [-16+EBP],0
   602 000006DF C7 45 E0 00000000               	MOV	DWORD [-32+EBP],0
   603 000006E6                                 L39:
   604 000006E6 8D 04 1E                        	LEA	EAX,DWORD [ESI+EBX*1]
   605 000006E9 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   606 000006EC 31 FF                           	XOR	EDI,EDI
   607 000006EE 8D 4C 02 EB                     	LEA	ECX,DWORD [-21+EDX+EAX*1]
   608 000006F2                                 L38:
   609 000006F2 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   610 000006F5 8A 94 07 [00000061]             	MOV	DL,BYTE [_closebtn.0+EDI+EAX*1]
   611 000006FC 80 FA 40                        	CMP	DL,64
   612 000006FF 74 33                           	JE	L44
   613 00000701 80 FA 24                        	CMP	DL,36
   614 00000704 74 2A                           	JE	L45
   615 00000706 80 FA 51                        	CMP	DL,81
   616 00000709 B2 08                           	MOV	DL,8
   617 0000070B 0F 95 C0                        	SETNE	AL
   618 0000070E 28 C2                           	SUB	DL,AL
   619 00000710                                 L33:
   620 00000710 47                              	INC	EDI
   621 00000711 88 11                           	MOV	BYTE [ECX],DL
   622 00000713 41                              	INC	ECX
   623 00000714 83 FF 0F                        	CMP	EDI,15
   624 00000717 7E D9                           	JLE	L38
   625 00000719 FF 45 F0                        	INC	DWORD [-16+EBP]
   626 0000071C 01 DE                           	ADD	ESI,EBX
   627 0000071E 83 45 E0 10                     	ADD	DWORD [-32+EBP],16
   628 00000722 83 7D F0 0D                     	CMP	DWORD [-16+EBP],13
   629 00000726 7E BE                           	JLE	L39
   630 00000728 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   631 0000072B 5B                              	POP	EBX
   632 0000072C 5E                              	POP	ESI
   633 0000072D 5F                              	POP	EDI
   634 0000072E 5D                              	POP	EBP
   635 0000072F C3                              	RET
   636 00000730                                 L45:
   637 00000730 B2 0F                           	MOV	DL,15
   638 00000732 EB DC                           	JMP	L33
   639 00000734                                 L44:
   640 00000734 31 D2                           	XOR	EDX,EDX
   641 00000736 EB D8                           	JMP	L33
