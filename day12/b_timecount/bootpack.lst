     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_init_pit
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_init_keyboard
    15 00000000                                 	EXTERN	_enable_mouse
    16 00000000                                 	EXTERN	_memtest
    17 00000000                                 	EXTERN	_memman_init
    18 00000000                                 	EXTERN	_memman_free
    19 00000000                                 	EXTERN	_init_palette
    20 00000000                                 	EXTERN	_shtctl_init
    21 00000000                                 	EXTERN	_sheet_alloc
    22 00000000                                 	EXTERN	_memman_alloc_4k
    23 00000000                                 	EXTERN	_sheet_setbuf
    24 00000000                                 	EXTERN	_init_screen
    25 00000000                                 	EXTERN	_init_mouse_cursor8
    26 00000000                                 	EXTERN	_putfonts8_asc
    27 00000000                                 	EXTERN	_sheet_slide
    28 00000000                                 	EXTERN	_sheet_updown
    29 00000000                                 	EXTERN	_sprintf
    30 00000000                                 	EXTERN	_memman_total
    31 00000000                                 	EXTERN	_sheet_refresh
    32 00000000                                 	EXTERN	_timerctl
    33 00000000                                 	EXTERN	_boxfill8
    34 00000000                                 	EXTERN	_io_cli
    35 00000000                                 	EXTERN	_fifo8_status
    36 00000000                                 	EXTERN	_fifo8_get
    37 00000000                                 	EXTERN	_mouse_decode
    38 00000000                                 	EXTERN	_io_stihlt
    39 00000000                                 [FILE "bootpack.c"]
    40                                          [SECTION .data]
    41 00000000                                 LC0:
    42 00000000 77 69 6E 64 6F 77 00            	DB	"window",0x00
    43 00000007                                 LC1:
    44 00000007 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       00000011 00 
    45 00000012                                 LC2:
    46 00000012 54 68 69 73 20 4F 53 21 00      	DB	"This OS!",0x00
    47 0000001B                                 LC3:
    48 0000001B 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       00000025 00 
    49 00000026                                 LC4:
    50 00000026 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB free : %dKB",0x00
       00000030 42 20 66 72 65 65 20 3A 20 25 
       0000003A 64 4B 42 00 
    51 0000003E                                 LC5:
    52 0000003E 25 30 31 30 64 00               	DB	"%010d",0x00
    53 00000044                                 LC7:
    54 00000044 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000004E 34 64 5D 00 
    55 00000052                                 LC8:
    56 00000052 28 25 33 64 2C 25 33 64 29 00   	DB	"(%3d,%3d)",0x00
    57 0000005C                                 LC6:
    58 0000005C 25 30 32 78 00                  	DB	"%02x",0x00
    59                                          [SECTION .text]
    60 00000000                                 	GLOBAL	_HariMain
    61 00000000                                 _HariMain:
    62 00000000 55                              	PUSH	EBP
    63 00000001 89 E5                           	MOV	EBP,ESP
    64 00000003 57                              	PUSH	EDI
    65 00000004 56                              	PUSH	ESI
    66 00000005 53                              	PUSH	EBX
    67 00000006 81 EC 00000208                  	SUB	ESP,520
    68 0000000C 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    69 00000013 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    70 0000001A 89 95 FFFFFE0C                  	MOV	DWORD [-500+EBP],EDX
    71 00000020 89 85 FFFFFE10                  	MOV	DWORD [-496+EBP],EAX
    72 00000026 8B 1D 00000FF8                  	MOV	EBX,DWORD [4088]
    73 0000002C E8 [00000000]                   	CALL	_init_gdtidt
    74 00000031 E8 [00000000]                   	CALL	_init_pic
    75 00000036 E8 [00000000]                   	CALL	_io_sti
    76 0000003B 8D 45 A4                        	LEA	EAX,DWORD [-92+EBP]
    77 0000003E 50                              	PUSH	EAX
    78 0000003F 6A 20                           	PUSH	32
    79 00000041 68 [00000000]                   	PUSH	_keyfifo
    80 00000046 E8 [00000000]                   	CALL	_fifo8_init
    81 0000004B 8D 85 FFFFFF24                  	LEA	EAX,DWORD [-220+EBP]
    82 00000051 50                              	PUSH	EAX
    83 00000052 68 00000080                     	PUSH	128
    84 00000057 68 [00000000]                   	PUSH	_mousefifo
    85 0000005C E8 [00000000]                   	CALL	_fifo8_init
    86 00000061 E8 [00000000]                   	CALL	_init_pit
    87 00000066 68 000000F8                     	PUSH	248
    88 0000006B 6A 21                           	PUSH	33
    89 0000006D E8 [00000000]                   	CALL	_io_out8
    90 00000072 83 C4 20                        	ADD	ESP,32
    91 00000075 68 000000EF                     	PUSH	239
    92 0000007A 68 000000A1                     	PUSH	161
    93 0000007F E8 [00000000]                   	CALL	_io_out8
    94 00000084 E8 [00000000]                   	CALL	_init_keyboard
    95 00000089 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
    96 0000008F 50                              	PUSH	EAX
    97 00000090 E8 [00000000]                   	CALL	_enable_mouse
    98 00000095 68 BFFFFFFF                     	PUSH	-1073741825
    99 0000009A 68 00400000                     	PUSH	4194304
   100 0000009F E8 [00000000]                   	CALL	_memtest
   101 000000A4 68 003C0000                     	PUSH	3932160
   102 000000A9 89 85 FFFFFE08                  	MOV	DWORD [-504+EBP],EAX
   103 000000AF E8 [00000000]                   	CALL	_memman_init
   104 000000B4 68 0009E000                     	PUSH	647168
   105 000000B9 68 00001000                     	PUSH	4096
   106 000000BE 68 003C0000                     	PUSH	3932160
   107 000000C3 E8 [00000000]                   	CALL	_memman_free
   108 000000C8 8B 85 FFFFFE08                  	MOV	EAX,DWORD [-504+EBP]
   109 000000CE 83 C4 24                        	ADD	ESP,36
   110 000000D1 2D 00400000                     	SUB	EAX,4194304
   111 000000D6 50                              	PUSH	EAX
   112 000000D7 68 00400000                     	PUSH	4194304
   113 000000DC 68 003C0000                     	PUSH	3932160
   114 000000E1 E8 [00000000]                   	CALL	_memman_free
   115 000000E6 E8 [00000000]                   	CALL	_init_palette
   116 000000EB 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   117 000000F2 50                              	PUSH	EAX
   118 000000F3 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   119 000000FA 50                              	PUSH	EAX
   120 000000FB 53                              	PUSH	EBX
   121 000000FC 68 003C0000                     	PUSH	3932160
   122 00000101 E8 [00000000]                   	CALL	_shtctl_init
   123 00000106 89 C3                           	MOV	EBX,EAX
   124 00000108 50                              	PUSH	EAX
   125 00000109 E8 [00000000]                   	CALL	_sheet_alloc
   126 0000010E 83 C4 20                        	ADD	ESP,32
   127 00000111 53                              	PUSH	EBX
   128 00000112 89 85 FFFFFE04                  	MOV	DWORD [-508+EBP],EAX
   129 00000118 E8 [00000000]                   	CALL	_sheet_alloc
   130 0000011D 53                              	PUSH	EBX
   131 0000011E 89 85 FFFFFE00                  	MOV	DWORD [-512+EBP],EAX
   132 00000124 E8 [00000000]                   	CALL	_sheet_alloc
   133 00000129 0F BF 1D 00000FF6               	MOVSX	EBX,WORD [4086]
   134 00000130 89 85 FFFFFDFC                  	MOV	DWORD [-516+EBP],EAX
   135 00000136 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   136 0000013D 0F AF C3                        	IMUL	EAX,EBX
   137 00000140 50                              	PUSH	EAX
   138 00000141 8D 9D FFFFFE14                  	LEA	EBX,DWORD [-492+EBP]
   139 00000147 68 003C0000                     	PUSH	3932160
   140 0000014C E8 [00000000]                   	CALL	_memman_alloc_4k
   141 00000151 68 00002A80                     	PUSH	10880
   142 00000156 68 003C0000                     	PUSH	3932160
   143 0000015B 89 85 FFFFFDF8                  	MOV	DWORD [-520+EBP],EAX
   144 00000161 E8 [00000000]                   	CALL	_memman_alloc_4k
   145 00000166 6A FF                           	PUSH	-1
   146 00000168 89 85 FFFFFDF4                  	MOV	DWORD [-524+EBP],EAX
   147 0000016E 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   148 00000175 50                              	PUSH	EAX
   149 00000176 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   150 0000017D 50                              	PUSH	EAX
   151 0000017E FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   152 00000184 FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   153 0000018A E8 [00000000]                   	CALL	_sheet_setbuf
   154 0000018F 83 C4 2C                        	ADD	ESP,44
   155 00000192 6A 63                           	PUSH	99
   156 00000194 6A 10                           	PUSH	16
   157 00000196 6A 10                           	PUSH	16
   158 00000198 53                              	PUSH	EBX
   159 00000199 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   160 0000019F E8 [00000000]                   	CALL	_sheet_setbuf
   161 000001A4 6A FF                           	PUSH	-1
   162 000001A6 6A 44                           	PUSH	68
   163 000001A8 68 000000A0                     	PUSH	160
   164 000001AD FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   165 000001B3 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   166 000001B9 E8 [00000000]                   	CALL	_sheet_setbuf
   167 000001BE 83 C4 28                        	ADD	ESP,40
   168 000001C1 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   169 000001C8 50                              	PUSH	EAX
   170 000001C9 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   171 000001D0 50                              	PUSH	EAX
   172 000001D1 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   173 000001D7 E8 [00000000]                   	CALL	_init_screen
   174 000001DC 6A 63                           	PUSH	99
   175 000001DE 53                              	PUSH	EBX
   176 000001DF BB 00000002                     	MOV	EBX,2
   177 000001E4 E8 [00000000]                   	CALL	_init_mouse_cursor8
   178 000001E9 68 [00000000]                   	PUSH	LC0
   179 000001EE 6A 44                           	PUSH	68
   180 000001F0 68 000000A0                     	PUSH	160
   181 000001F5 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   182 000001FB E8 000003C1                     	CALL	_make_window
   183 00000200 83 C4 24                        	ADD	ESP,36
   184 00000203 68 [00000007]                   	PUSH	LC1
   185 00000208 6A 1C                           	PUSH	28
   186 0000020A 6A 18                           	PUSH	24
   187 0000020C 6A 00                           	PUSH	0
   188 0000020E 68 000000A0                     	PUSH	160
   189 00000213 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   190 00000219 E8 [00000000]                   	CALL	_putfonts8_asc
   191 0000021E 68 [00000012]                   	PUSH	LC2
   192 00000223 6A 2C                           	PUSH	44
   193 00000225 6A 18                           	PUSH	24
   194 00000227 6A 00                           	PUSH	0
   195 00000229 68 000000A0                     	PUSH	160
   196 0000022E FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   197 00000234 E8 [00000000]                   	CALL	_putfonts8_asc
   198 00000239 83 C4 30                        	ADD	ESP,48
   199 0000023C 6A 00                           	PUSH	0
   200 0000023E 6A 00                           	PUSH	0
   201 00000240 FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   202 00000246 E8 [00000000]                   	CALL	_sheet_slide
   203 0000024B 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   204 00000252 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   205 00000255 89 C8                           	MOV	EAX,ECX
   206 00000257 99                              	CDQ
   207 00000258 F7 FB                           	IDIV	EBX
   208 0000025A 89 C6                           	MOV	ESI,EAX
   209 0000025C 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   210 00000263 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   211 00000266 89 C8                           	MOV	EAX,ECX
   212 00000268 99                              	CDQ
   213 00000269 F7 FB                           	IDIV	EBX
   214 0000026B 50                              	PUSH	EAX
   215 0000026C 89 C7                           	MOV	EDI,EAX
   216 0000026E 56                              	PUSH	ESI
   217 0000026F 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   218 00000272 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   219 00000278 E8 [00000000]                   	CALL	_sheet_slide
   220 0000027D 6A 48                           	PUSH	72
   221 0000027F 6A 50                           	PUSH	80
   222 00000281 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   223 00000287 E8 [00000000]                   	CALL	_sheet_slide
   224 0000028C 83 C4 24                        	ADD	ESP,36
   225 0000028F 6A 00                           	PUSH	0
   226 00000291 FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   227 00000297 E8 [00000000]                   	CALL	_sheet_updown
   228 0000029C 6A 01                           	PUSH	1
   229 0000029E FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   230 000002A4 E8 [00000000]                   	CALL	_sheet_updown
   231 000002A9 6A 02                           	PUSH	2
   232 000002AB FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   233 000002B1 E8 [00000000]                   	CALL	_sheet_updown
   234 000002B6 57                              	PUSH	EDI
   235 000002B7 56                              	PUSH	ESI
   236 000002B8 68 [0000001B]                   	PUSH	LC3
   237 000002BD 53                              	PUSH	EBX
   238 000002BE E8 [00000000]                   	CALL	_sprintf
   239 000002C3 83 C4 28                        	ADD	ESP,40
   240 000002C6 53                              	PUSH	EBX
   241 000002C7 6A 00                           	PUSH	0
   242 000002C9 6A 00                           	PUSH	0
   243 000002CB 6A 07                           	PUSH	7
   244 000002CD 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   245 000002D4 50                              	PUSH	EAX
   246 000002D5 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   247 000002DB E8 [00000000]                   	CALL	_putfonts8_asc
   248 000002E0 68 003C0000                     	PUSH	3932160
   249 000002E5 E8 [00000000]                   	CALL	_memman_total
   250 000002EA C1 AD FFFFFE08 14               	SHR	DWORD [-504+EBP],20
   251 000002F1 C1 E8 0A                        	SHR	EAX,10
   252 000002F4 89 04 24                        	MOV	DWORD [ESP],EAX
   253 000002F7 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   254 000002FD 68 [00000026]                   	PUSH	LC4
   255 00000302 53                              	PUSH	EBX
   256 00000303 E8 [00000000]                   	CALL	_sprintf
   257 00000308 83 C4 28                        	ADD	ESP,40
   258 0000030B 53                              	PUSH	EBX
   259 0000030C 6A 20                           	PUSH	32
   260 0000030E 6A 00                           	PUSH	0
   261 00000310 6A 07                           	PUSH	7
   262 00000312 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   263 00000319 50                              	PUSH	EAX
   264 0000031A                                 L18:
   265 0000031A FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   266 00000320 E8 [00000000]                   	CALL	_putfonts8_asc
   267 00000325 6A 30                           	PUSH	48
   268 00000327 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   269 0000032D 6A 00                           	PUSH	0
   270 0000032F 6A 00                           	PUSH	0
   271 00000331 FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   272 00000337 E8 [00000000]                   	CALL	_sheet_refresh
   273 0000033C 83 C4 2C                        	ADD	ESP,44
   274 0000033F                                 L2:
   275 0000033F FF 35 [00000000]                	PUSH	DWORD [_timerctl]
   276 00000345 68 [0000003E]                   	PUSH	LC5
   277 0000034A 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   278 0000034D 53                              	PUSH	EBX
   279 0000034E E8 [00000000]                   	CALL	_sprintf
   280 00000353 6A 2B                           	PUSH	43
   281 00000355 6A 77                           	PUSH	119
   282 00000357 6A 1C                           	PUSH	28
   283 00000359 6A 28                           	PUSH	40
   284 0000035B 6A 00                           	PUSH	0
   285 0000035D 68 000000A0                     	PUSH	160
   286 00000362 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   287 00000368 E8 [00000000]                   	CALL	_boxfill8
   288 0000036D 83 C4 28                        	ADD	ESP,40
   289 00000370 53                              	PUSH	EBX
   290 00000371 6A 1C                           	PUSH	28
   291 00000373 6A 28                           	PUSH	40
   292 00000375 6A 08                           	PUSH	8
   293 00000377 68 000000A0                     	PUSH	160
   294 0000037C FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   295 00000382 E8 [00000000]                   	CALL	_putfonts8_asc
   296 00000387 6A 2C                           	PUSH	44
   297 00000389 6A 78                           	PUSH	120
   298 0000038B 6A 1C                           	PUSH	28
   299 0000038D 6A 28                           	PUSH	40
   300 0000038F FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   301 00000395 E8 [00000000]                   	CALL	_sheet_refresh
   302 0000039A 83 C4 2C                        	ADD	ESP,44
   303 0000039D E8 [00000000]                   	CALL	_io_cli
   304 000003A2 68 [00000000]                   	PUSH	_keyfifo
   305 000003A7 E8 [00000000]                   	CALL	_fifo8_status
   306 000003AC 68 [00000000]                   	PUSH	_mousefifo
   307 000003B1 89 C3                           	MOV	EBX,EAX
   308 000003B3 E8 [00000000]                   	CALL	_fifo8_status
   309 000003B8 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   310 000003BB 5B                              	POP	EBX
   311 000003BC 5A                              	POP	EDX
   312 000003BD 85 C0                           	TEST	EAX,EAX
   313 000003BF 0F 84 000001F2                  	JE	L19
   314 000003C5 68 [00000000]                   	PUSH	_keyfifo
   315 000003CA E8 [00000000]                   	CALL	_fifo8_status
   316 000003CF 59                              	POP	ECX
   317 000003D0 85 C0                           	TEST	EAX,EAX
   318 000003D2 0F 85 00000189                  	JNE	L20
   319 000003D8 68 [00000000]                   	PUSH	_mousefifo
   320 000003DD E8 [00000000]                   	CALL	_fifo8_status
   321 000003E2 5A                              	POP	EDX
   322 000003E3 85 C0                           	TEST	EAX,EAX
   323 000003E5 0F 84 FFFFFF54                  	JE	L2
   324 000003EB 68 [00000000]                   	PUSH	_mousefifo
   325 000003F0 E8 [00000000]                   	CALL	_fifo8_get
   326 000003F5 88 C3                           	MOV	BL,AL
   327 000003F7 E8 [00000000]                   	CALL	_io_sti
   328 000003FC 0F B6 C3                        	MOVZX	EAX,BL
   329 000003FF 50                              	PUSH	EAX
   330 00000400 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
   331 00000406 50                              	PUSH	EAX
   332 00000407 E8 [00000000]                   	CALL	_mouse_decode
   333 0000040C 83 C4 0C                        	ADD	ESP,12
   334 0000040F 85 C0                           	TEST	EAX,EAX
   335 00000411 0F 84 FFFFFF28                  	JE	L2
   336 00000417 FF B5 FFFFFF1C                  	PUSH	DWORD [-228+EBP]
   337 0000041D FF B5 FFFFFF18                  	PUSH	DWORD [-232+EBP]
   338 00000423 68 [00000044]                   	PUSH	LC7
   339 00000428 8D 45 C4                        	LEA	EAX,DWORD [-60+EBP]
   340 0000042B 50                              	PUSH	EAX
   341 0000042C E8 [00000000]                   	CALL	_sprintf
   342 00000431 83 C4 10                        	ADD	ESP,16
   343 00000434 8B 85 FFFFFF20                  	MOV	EAX,DWORD [-224+EBP]
   344 0000043A A9 00000001                     	TEST	EAX,1
   345 0000043F 74 04                           	JE	L11
   346 00000441 C6 45 C5 4C                     	MOV	BYTE [-59+EBP],76
   347 00000445                                 L11:
   348 00000445 A9 00000002                     	TEST	EAX,2
   349 0000044A 74 04                           	JE	L12
   350 0000044C C6 45 C7 52                     	MOV	BYTE [-57+EBP],82
   351 00000450                                 L12:
   352 00000450 83 E0 04                        	AND	EAX,4
   353 00000453 74 04                           	JE	L13
   354 00000455 C6 45 C6 43                     	MOV	BYTE [-58+EBP],67
   355 00000459                                 L13:
   356 00000459 6A 1F                           	PUSH	31
   357 0000045B 68 00000097                     	PUSH	151
   358 00000460 6A 10                           	PUSH	16
   359 00000462 6A 20                           	PUSH	32
   360 00000464 6A 0E                           	PUSH	14
   361 00000466 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   362 0000046C FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   363 00000472 E8 [00000000]                   	CALL	_boxfill8
   364 00000477 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   365 0000047A 52                              	PUSH	EDX
   366 0000047B 6A 10                           	PUSH	16
   367 0000047D 6A 20                           	PUSH	32
   368 0000047F 6A 07                           	PUSH	7
   369 00000481 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   370 00000487 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   371 0000048D E8 [00000000]                   	CALL	_putfonts8_asc
   372 00000492 83 C4 34                        	ADD	ESP,52
   373 00000495 6A 20                           	PUSH	32
   374 00000497 68 00000098                     	PUSH	152
   375 0000049C 6A 10                           	PUSH	16
   376 0000049E 6A 20                           	PUSH	32
   377 000004A0 FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   378 000004A6 E8 [00000000]                   	CALL	_sheet_refresh
   379 000004AB 83 C4 14                        	ADD	ESP,20
   380 000004AE 03 BD FFFFFF1C                  	ADD	EDI,DWORD [-228+EBP]
   381 000004B4 03 B5 FFFFFF18                  	ADD	ESI,DWORD [-232+EBP]
   382 000004BA 0F 88 0000009A                  	JS	L21
   383 000004C0                                 L14:
   384 000004C0 85 FF                           	TEST	EDI,EDI
   385 000004C2 0F 88 0000008B                  	JS	L22
   386 000004C8                                 L15:
   387 000004C8 8B 85 FFFFFE10                  	MOV	EAX,DWORD [-496+EBP]
   388 000004CE 48                              	DEC	EAX
   389 000004CF 39 C6                           	CMP	ESI,EAX
   390 000004D1 7E 02                           	JLE	L16
   391 000004D3 89 C6                           	MOV	ESI,EAX
   392 000004D5                                 L16:
   393 000004D5 8B 85 FFFFFE0C                  	MOV	EAX,DWORD [-500+EBP]
   394 000004DB 48                              	DEC	EAX
   395 000004DC 39 C7                           	CMP	EDI,EAX
   396 000004DE 7E 02                           	JLE	L17
   397 000004E0 89 C7                           	MOV	EDI,EAX
   398 000004E2                                 L17:
   399 000004E2 57                              	PUSH	EDI
   400 000004E3 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   401 000004E6 56                              	PUSH	ESI
   402 000004E7 68 [00000052]                   	PUSH	LC8
   403 000004EC 53                              	PUSH	EBX
   404 000004ED E8 [00000000]                   	CALL	_sprintf
   405 000004F2 6A 0F                           	PUSH	15
   406 000004F4 6A 4F                           	PUSH	79
   407 000004F6 6A 00                           	PUSH	0
   408 000004F8 6A 00                           	PUSH	0
   409 000004FA 6A 0E                           	PUSH	14
   410 000004FC FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   411 00000502 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   412 00000508 E8 [00000000]                   	CALL	_boxfill8
   413 0000050D 83 C4 2C                        	ADD	ESP,44
   414 00000510 53                              	PUSH	EBX
   415 00000511 6A 00                           	PUSH	0
   416 00000513 6A 00                           	PUSH	0
   417 00000515 6A 07                           	PUSH	7
   418 00000517 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   419 0000051D FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   420 00000523 E8 [00000000]                   	CALL	_putfonts8_asc
   421 00000528 6A 10                           	PUSH	16
   422 0000052A 6A 50                           	PUSH	80
   423 0000052C 6A 00                           	PUSH	0
   424 0000052E 6A 00                           	PUSH	0
   425 00000530 FF B5 FFFFFE04                  	PUSH	DWORD [-508+EBP]
   426 00000536 E8 [00000000]                   	CALL	_sheet_refresh
   427 0000053B 83 C4 2C                        	ADD	ESP,44
   428 0000053E 57                              	PUSH	EDI
   429 0000053F 56                              	PUSH	ESI
   430 00000540 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   431 00000546 E8 [00000000]                   	CALL	_sheet_slide
   432 0000054B 83 C4 0C                        	ADD	ESP,12
   433 0000054E E9 FFFFFDEC                     	JMP	L2
   434 00000553                                 L22:
   435 00000553 31 FF                           	XOR	EDI,EDI
   436 00000555 E9 FFFFFF6E                     	JMP	L15
   437 0000055A                                 L21:
   438 0000055A 31 F6                           	XOR	ESI,ESI
   439 0000055C E9 FFFFFF5F                     	JMP	L14
   440 00000561                                 L20:
   441 00000561 68 [00000000]                   	PUSH	_keyfifo
   442 00000566 E8 [00000000]                   	CALL	_fifo8_get
   443 0000056B 88 C3                           	MOV	BL,AL
   444 0000056D E8 [00000000]                   	CALL	_io_sti
   445 00000572 0F B6 C3                        	MOVZX	EAX,BL
   446 00000575 50                              	PUSH	EAX
   447 00000576 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   448 00000579 68 [0000005C]                   	PUSH	LC6
   449 0000057E 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   450 00000581 52                              	PUSH	EDX
   451 00000582 E8 [00000000]                   	CALL	_sprintf
   452 00000587 6A 1F                           	PUSH	31
   453 00000589 6A 0F                           	PUSH	15
   454 0000058B 6A 10                           	PUSH	16
   455 0000058D 6A 00                           	PUSH	0
   456 0000058F 6A 0E                           	PUSH	14
   457 00000591 FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   458 00000597 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   459 0000059D E8 [00000000]                   	CALL	_boxfill8
   460 000005A2 83 C4 2C                        	ADD	ESP,44
   461 000005A5 53                              	PUSH	EBX
   462 000005A6 6A 10                           	PUSH	16
   463 000005A8 6A 00                           	PUSH	0
   464 000005AA 6A 07                           	PUSH	7
   465 000005AC FF B5 FFFFFE10                  	PUSH	DWORD [-496+EBP]
   466 000005B2 E9 FFFFFD63                     	JMP	L18
   467 000005B7                                 L19:
   468 000005B7 E8 [00000000]                   	CALL	_io_stihlt
   469 000005BC E9 FFFFFD7E                     	JMP	L2
   470                                          [SECTION .data]
   471 00000061                                 _closebtn.0:
   472 00000061 4F 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"OOOOOOOOOOOOOOO@"
       0000006B 4F 4F 4F 4F 4F 40 
   473 00000071 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000007B 51 51 51 51 24 40 
   474 00000081 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000008B 51 51 51 51 24 40 
   475 00000091 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       0000009B 40 40 51 51 24 40 
   476 000000A1 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000AB 40 51 51 51 24 40 
   477 000000B1 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000BB 51 51 51 51 24 40 
   478 000000C1 4F 51 51 51 51 51 51 40 40 51   	DB	"OQQQQQQ@@QQQQQ$@"
       000000CB 51 51 51 51 24 40 
   479 000000D1 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000DB 51 51 51 51 24 40 
   480 000000E1 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000EB 40 51 51 51 24 40 
   481 000000F1 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       000000FB 40 40 51 51 24 40 
   482 00000101 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000010B 51 51 51 51 24 40 
   483 00000111 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000011B 51 51 51 51 24 40 
   484 00000121 4F 24 24 24 24 24 24 24 24 24   	DB	"O$$$$$$$$$$$$$$@"
       0000012B 24 24 24 24 24 40 
   485 00000131 40 40 40 40 40 40 40 40 40 40   	DB	"@@@@@@@@@@@@@@@@"
       0000013B 40 40 40 40 40 40 
   486                                          [SECTION .text]
   487 000005C1                                 	GLOBAL	_make_window
   488 000005C1                                 _make_window:
   489 000005C1 55                              	PUSH	EBP
   490 000005C2 89 E5                           	MOV	EBP,ESP
   491 000005C4 57                              	PUSH	EDI
   492 000005C5 56                              	PUSH	ESI
   493 000005C6 53                              	PUSH	EBX
   494 000005C7 83 EC 14                        	SUB	ESP,20
   495 000005CA 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   496 000005CD 6A 00                           	PUSH	0
   497 000005CF 8D 43 FF                        	LEA	EAX,DWORD [-1+EBX]
   498 000005D2 8D 7B FE                        	LEA	EDI,DWORD [-2+EBX]
   499 000005D5 50                              	PUSH	EAX
   500 000005D6 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   501 000005D9 6A 00                           	PUSH	0
   502 000005DB 6A 00                           	PUSH	0
   503 000005DD 6A 08                           	PUSH	8
   504 000005DF 53                              	PUSH	EBX
   505 000005E0 FF 75 08                        	PUSH	DWORD [8+EBP]
   506 000005E3 E8 [00000000]                   	CALL	_boxfill8
   507 000005E8 6A 01                           	PUSH	1
   508 000005EA 57                              	PUSH	EDI
   509 000005EB 6A 01                           	PUSH	1
   510 000005ED 6A 01                           	PUSH	1
   511 000005EF 6A 07                           	PUSH	7
   512 000005F1 53                              	PUSH	EBX
   513 000005F2 FF 75 08                        	PUSH	DWORD [8+EBP]
   514 000005F5 E8 [00000000]                   	CALL	_boxfill8
   515 000005FA 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   516 000005FD 83 C4 38                        	ADD	ESP,56
   517 00000600 4A                              	DEC	EDX
   518 00000601 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   519 00000604 52                              	PUSH	EDX
   520 00000605 6A 00                           	PUSH	0
   521 00000607 6A 00                           	PUSH	0
   522 00000609 6A 00                           	PUSH	0
   523 0000060B 6A 08                           	PUSH	8
   524 0000060D 53                              	PUSH	EBX
   525 0000060E FF 75 08                        	PUSH	DWORD [8+EBP]
   526 00000611 E8 [00000000]                   	CALL	_boxfill8
   527 00000616 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   528 00000619 83 EE 02                        	SUB	ESI,2
   529 0000061C 56                              	PUSH	ESI
   530 0000061D 6A 01                           	PUSH	1
   531 0000061F 6A 01                           	PUSH	1
   532 00000621 6A 01                           	PUSH	1
   533 00000623 6A 07                           	PUSH	7
   534 00000625 53                              	PUSH	EBX
   535 00000626 FF 75 08                        	PUSH	DWORD [8+EBP]
   536 00000629 E8 [00000000]                   	CALL	_boxfill8
   537 0000062E 83 C4 38                        	ADD	ESP,56
   538 00000631 56                              	PUSH	ESI
   539 00000632 57                              	PUSH	EDI
   540 00000633 6A 01                           	PUSH	1
   541 00000635 57                              	PUSH	EDI
   542 00000636 6A 0F                           	PUSH	15
   543 00000638 53                              	PUSH	EBX
   544 00000639 FF 75 08                        	PUSH	DWORD [8+EBP]
   545 0000063C E8 [00000000]                   	CALL	_boxfill8
   546 00000641 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   547 00000644 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   548 00000647 6A 00                           	PUSH	0
   549 00000649 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   550 0000064C 6A 00                           	PUSH	0
   551 0000064E 53                              	PUSH	EBX
   552 0000064F FF 75 08                        	PUSH	DWORD [8+EBP]
   553 00000652 E8 [00000000]                   	CALL	_boxfill8
   554 00000657 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   555 0000065A 83 C4 38                        	ADD	ESP,56
   556 0000065D 83 E8 03                        	SUB	EAX,3
   557 00000660 50                              	PUSH	EAX
   558 00000661 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   559 00000664 50                              	PUSH	EAX
   560 00000665 6A 02                           	PUSH	2
   561 00000667 6A 02                           	PUSH	2
   562 00000669 6A 08                           	PUSH	8
   563 0000066B 53                              	PUSH	EBX
   564 0000066C FF 75 08                        	PUSH	DWORD [8+EBP]
   565 0000066F E8 [00000000]                   	CALL	_boxfill8
   566 00000674 8D 43 FC                        	LEA	EAX,DWORD [-4+EBX]
   567 00000677 6A 14                           	PUSH	20
   568 00000679 50                              	PUSH	EAX
   569 0000067A 6A 03                           	PUSH	3
   570 0000067C 6A 03                           	PUSH	3
   571 0000067E 6A 0C                           	PUSH	12
   572 00000680 53                              	PUSH	EBX
   573 00000681 FF 75 08                        	PUSH	DWORD [8+EBP]
   574 00000684 E8 [00000000]                   	CALL	_boxfill8
   575 00000689 83 C4 38                        	ADD	ESP,56
   576 0000068C 56                              	PUSH	ESI
   577 0000068D 57                              	PUSH	EDI
   578 0000068E 56                              	PUSH	ESI
   579 0000068F 6A 01                           	PUSH	1
   580 00000691 6A 0F                           	PUSH	15
   581 00000693 53                              	PUSH	EBX
   582 00000694 FF 75 08                        	PUSH	DWORD [8+EBP]
   583 00000697 E8 [00000000]                   	CALL	_boxfill8
   584 0000069C FF 75 E8                        	PUSH	DWORD [-24+EBP]
   585 0000069F FF 75 EC                        	PUSH	DWORD [-20+EBP]
   586 000006A2 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   587 000006A5 6A 00                           	PUSH	0
   588 000006A7 6A 00                           	PUSH	0
   589 000006A9 6B F3 05                        	IMUL	ESI,EBX,5
   590 000006AC 53                              	PUSH	EBX
   591 000006AD FF 75 08                        	PUSH	DWORD [8+EBP]
   592 000006B0 E8 [00000000]                   	CALL	_boxfill8
   593 000006B5 83 C4 38                        	ADD	ESP,56
   594 000006B8 FF 75 14                        	PUSH	DWORD [20+EBP]
   595 000006BB 6A 04                           	PUSH	4
   596 000006BD 6A 18                           	PUSH	24
   597 000006BF 6A 07                           	PUSH	7
   598 000006C1 53                              	PUSH	EBX
   599 000006C2 FF 75 08                        	PUSH	DWORD [8+EBP]
   600 000006C5 E8 [00000000]                   	CALL	_putfonts8_asc
   601 000006CA 83 C4 18                        	ADD	ESP,24
   602 000006CD C7 45 F0 00000000               	MOV	DWORD [-16+EBP],0
   603 000006D4 C7 45 E0 00000000               	MOV	DWORD [-32+EBP],0
   604 000006DB                                 L39:
   605 000006DB 8D 04 1E                        	LEA	EAX,DWORD [ESI+EBX*1]
   606 000006DE 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   607 000006E1 31 FF                           	XOR	EDI,EDI
   608 000006E3 8D 4C 02 EB                     	LEA	ECX,DWORD [-21+EDX+EAX*1]
   609 000006E7                                 L38:
   610 000006E7 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   611 000006EA 8A 94 07 [00000061]             	MOV	DL,BYTE [_closebtn.0+EDI+EAX*1]
   612 000006F1 80 FA 40                        	CMP	DL,64
   613 000006F4 74 33                           	JE	L44
   614 000006F6 80 FA 24                        	CMP	DL,36
   615 000006F9 74 2A                           	JE	L45
   616 000006FB 80 FA 51                        	CMP	DL,81
   617 000006FE B2 08                           	MOV	DL,8
   618 00000700 0F 95 C0                        	SETNE	AL
   619 00000703 28 C2                           	SUB	DL,AL
   620 00000705                                 L33:
   621 00000705 47                              	INC	EDI
   622 00000706 88 11                           	MOV	BYTE [ECX],DL
   623 00000708 41                              	INC	ECX
   624 00000709 83 FF 0F                        	CMP	EDI,15
   625 0000070C 7E D9                           	JLE	L38
   626 0000070E FF 45 F0                        	INC	DWORD [-16+EBP]
   627 00000711 01 DE                           	ADD	ESI,EBX
   628 00000713 83 45 E0 10                     	ADD	DWORD [-32+EBP],16
   629 00000717 83 7D F0 0D                     	CMP	DWORD [-16+EBP],13
   630 0000071B 7E BE                           	JLE	L39
   631 0000071D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   632 00000720 5B                              	POP	EBX
   633 00000721 5E                              	POP	ESI
   634 00000722 5F                              	POP	EDI
   635 00000723 5D                              	POP	EBP
   636 00000724 C3                              	RET
   637 00000725                                 L45:
   638 00000725 B2 0F                           	MOV	DL,15
   639 00000727 EB DC                           	JMP	L33
   640 00000729                                 L44:
   641 00000729 31 D2                           	XOR	EDX,EDX
   642 0000072B EB D8                           	JMP	L33
