     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_init_pit
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_timerfifo
    15 00000000                                 	EXTERN	_settimer
    16 00000000                                 	EXTERN	_init_keyboard
    17 00000000                                 	EXTERN	_enable_mouse
    18 00000000                                 	EXTERN	_memtest
    19 00000000                                 	EXTERN	_memman_init
    20 00000000                                 	EXTERN	_memman_free
    21 00000000                                 	EXTERN	_init_palette
    22 00000000                                 	EXTERN	_shtctl_init
    23 00000000                                 	EXTERN	_sheet_alloc
    24 00000000                                 	EXTERN	_memman_alloc_4k
    25 00000000                                 	EXTERN	_sheet_setbuf
    26 00000000                                 	EXTERN	_init_screen
    27 00000000                                 	EXTERN	_init_mouse_cursor8
    28 00000000                                 	EXTERN	_putfonts8_asc
    29 00000000                                 	EXTERN	_sheet_slide
    30 00000000                                 	EXTERN	_sheet_updown
    31 00000000                                 	EXTERN	_sprintf
    32 00000000                                 	EXTERN	_memman_total
    33 00000000                                 	EXTERN	_sheet_refresh
    34 00000000                                 	EXTERN	_timerctl
    35 00000000                                 	EXTERN	_boxfill8
    36 00000000                                 	EXTERN	_io_cli
    37 00000000                                 	EXTERN	_fifo8_status
    38 00000000                                 	EXTERN	_fifo8_get
    39 00000000                                 	EXTERN	_mouse_decode
    40 00000000                                 [FILE "bootpack.c"]
    41                                          [SECTION .data]
    42 00000000                                 LC0:
    43 00000000 77 69 6E 64 6F 77 00            	DB	"window",0x00
    44 00000007                                 LC1:
    45 00000007 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       00000011 00 
    46 00000012                                 LC2:
    47 00000012 54 68 69 73 20 4F 53 21 00      	DB	"This OS!",0x00
    48 0000001B                                 LC3:
    49 0000001B 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       00000025 00 
    50 00000026                                 LC4:
    51 00000026 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB free : %dKB",0x00
       00000030 42 20 66 72 65 65 20 3A 20 25 
       0000003A 64 4B 42 00 
    52 0000003E                                 LC5:
    53 0000003E 25 30 31 30 64 00               	DB	"%010d",0x00
    54 00000044                                 LC9:
    55 00000044 31 30 5B 73 65 63 5D 00         	DB	"10[sec]",0x00
    56 0000004C                                 LC7:
    57 0000004C 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       00000056 34 64 5D 00 
    58 0000005A                                 LC8:
    59 0000005A 28 25 33 64 2C 25 33 64 29 00   	DB	"(%3d,%3d)",0x00
    60 00000064                                 LC6:
    61 00000064 25 30 32 78 00                  	DB	"%02x",0x00
    62                                          [SECTION .text]
    63 00000000                                 	GLOBAL	_HariMain
    64 00000000                                 _HariMain:
    65 00000000 55                              	PUSH	EBP
    66 00000001 89 E5                           	MOV	EBP,ESP
    67 00000003 57                              	PUSH	EDI
    68 00000004 56                              	PUSH	ESI
    69 00000005 53                              	PUSH	EBX
    70 00000006 81 EC 00000210                  	SUB	ESP,528
    71 0000000C 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    72 00000013 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    73 0000001A 89 95 FFFFFE04                  	MOV	DWORD [-508+EBP],EDX
    74 00000020 89 85 FFFFFE08                  	MOV	DWORD [-504+EBP],EAX
    75 00000026 8B 1D 00000FF8                  	MOV	EBX,DWORD [4088]
    76 0000002C E8 [00000000]                   	CALL	_init_gdtidt
    77 00000031 E8 [00000000]                   	CALL	_init_pic
    78 00000036 E8 [00000000]                   	CALL	_io_sti
    79 0000003B 8D 45 A4                        	LEA	EAX,DWORD [-92+EBP]
    80 0000003E 50                              	PUSH	EAX
    81 0000003F 6A 20                           	PUSH	32
    82 00000041 68 [00000000]                   	PUSH	_keyfifo
    83 00000046 E8 [00000000]                   	CALL	_fifo8_init
    84 0000004B 8D 85 FFFFFF24                  	LEA	EAX,DWORD [-220+EBP]
    85 00000051 50                              	PUSH	EAX
    86 00000052 68 00000080                     	PUSH	128
    87 00000057 68 [00000000]                   	PUSH	_mousefifo
    88 0000005C E8 [00000000]                   	CALL	_fifo8_init
    89 00000061 E8 [00000000]                   	CALL	_init_pit
    90 00000066 68 000000F8                     	PUSH	248
    91 0000006B 6A 21                           	PUSH	33
    92 0000006D E8 [00000000]                   	CALL	_io_out8
    93 00000072 83 C4 20                        	ADD	ESP,32
    94 00000075 68 000000EF                     	PUSH	239
    95 0000007A 68 000000A1                     	PUSH	161
    96 0000007F E8 [00000000]                   	CALL	_io_out8
    97 00000084 8D 85 FFFFFE0C                  	LEA	EAX,DWORD [-500+EBP]
    98 0000008A 50                              	PUSH	EAX
    99 0000008B 6A 08                           	PUSH	8
   100 0000008D 68 [00000000]                   	PUSH	_timerfifo
   101 00000092 E8 [00000000]                   	CALL	_fifo8_init
   102 00000097 6A 01                           	PUSH	1
   103 00000099 68 [00000000]                   	PUSH	_timerfifo
   104 0000009E 6A 64                           	PUSH	100
   105 000000A0 E8 [00000000]                   	CALL	_settimer
   106 000000A5 83 C4 20                        	ADD	ESP,32
   107 000000A8 E8 [00000000]                   	CALL	_init_keyboard
   108 000000AD 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
   109 000000B3 50                              	PUSH	EAX
   110 000000B4 E8 [00000000]                   	CALL	_enable_mouse
   111 000000B9 68 BFFFFFFF                     	PUSH	-1073741825
   112 000000BE 68 00400000                     	PUSH	4194304
   113 000000C3 E8 [00000000]                   	CALL	_memtest
   114 000000C8 68 003C0000                     	PUSH	3932160
   115 000000CD 89 85 FFFFFE00                  	MOV	DWORD [-512+EBP],EAX
   116 000000D3 E8 [00000000]                   	CALL	_memman_init
   117 000000D8 68 0009E000                     	PUSH	647168
   118 000000DD 68 00001000                     	PUSH	4096
   119 000000E2 68 003C0000                     	PUSH	3932160
   120 000000E7 E8 [00000000]                   	CALL	_memman_free
   121 000000EC 8B 85 FFFFFE00                  	MOV	EAX,DWORD [-512+EBP]
   122 000000F2 2D 00400000                     	SUB	EAX,4194304
   123 000000F7 50                              	PUSH	EAX
   124 000000F8 68 00400000                     	PUSH	4194304
   125 000000FD 68 003C0000                     	PUSH	3932160
   126 00000102 E8 [00000000]                   	CALL	_memman_free
   127 00000107 83 C4 28                        	ADD	ESP,40
   128 0000010A E8 [00000000]                   	CALL	_init_palette
   129 0000010F 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   130 00000116 50                              	PUSH	EAX
   131 00000117 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   132 0000011E 50                              	PUSH	EAX
   133 0000011F 53                              	PUSH	EBX
   134 00000120 68 003C0000                     	PUSH	3932160
   135 00000125 E8 [00000000]                   	CALL	_shtctl_init
   136 0000012A 89 C3                           	MOV	EBX,EAX
   137 0000012C 50                              	PUSH	EAX
   138 0000012D E8 [00000000]                   	CALL	_sheet_alloc
   139 00000132 53                              	PUSH	EBX
   140 00000133 89 85 FFFFFDFC                  	MOV	DWORD [-516+EBP],EAX
   141 00000139 E8 [00000000]                   	CALL	_sheet_alloc
   142 0000013E 53                              	PUSH	EBX
   143 0000013F 89 85 FFFFFDF8                  	MOV	DWORD [-520+EBP],EAX
   144 00000145 E8 [00000000]                   	CALL	_sheet_alloc
   145 0000014A 0F BF 1D 00000FF6               	MOVSX	EBX,WORD [4086]
   146 00000151 89 85 FFFFFDF4                  	MOV	DWORD [-524+EBP],EAX
   147 00000157 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   148 0000015E 0F AF C3                        	IMUL	EAX,EBX
   149 00000161 50                              	PUSH	EAX
   150 00000162 8D 9D FFFFFE14                  	LEA	EBX,DWORD [-492+EBP]
   151 00000168 68 003C0000                     	PUSH	3932160
   152 0000016D E8 [00000000]                   	CALL	_memman_alloc_4k
   153 00000172 83 C4 24                        	ADD	ESP,36
   154 00000175 68 00002A80                     	PUSH	10880
   155 0000017A 89 85 FFFFFDF0                  	MOV	DWORD [-528+EBP],EAX
   156 00000180 68 003C0000                     	PUSH	3932160
   157 00000185 E8 [00000000]                   	CALL	_memman_alloc_4k
   158 0000018A 6A FF                           	PUSH	-1
   159 0000018C 89 85 FFFFFDEC                  	MOV	DWORD [-532+EBP],EAX
   160 00000192 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   161 00000199 50                              	PUSH	EAX
   162 0000019A 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   163 000001A1 50                              	PUSH	EAX
   164 000001A2 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   165 000001A8 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   166 000001AE E8 [00000000]                   	CALL	_sheet_setbuf
   167 000001B3 6A 63                           	PUSH	99
   168 000001B5 6A 10                           	PUSH	16
   169 000001B7 6A 10                           	PUSH	16
   170 000001B9 53                              	PUSH	EBX
   171 000001BA FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   172 000001C0 E8 [00000000]                   	CALL	_sheet_setbuf
   173 000001C5 83 C4 30                        	ADD	ESP,48
   174 000001C8 6A FF                           	PUSH	-1
   175 000001CA 6A 44                           	PUSH	68
   176 000001CC 68 000000A0                     	PUSH	160
   177 000001D1 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   178 000001D7 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   179 000001DD E8 [00000000]                   	CALL	_sheet_setbuf
   180 000001E2 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   181 000001E9 50                              	PUSH	EAX
   182 000001EA 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   183 000001F1 50                              	PUSH	EAX
   184 000001F2 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   185 000001F8 E8 [00000000]                   	CALL	_init_screen
   186 000001FD 83 C4 20                        	ADD	ESP,32
   187 00000200 6A 63                           	PUSH	99
   188 00000202 53                              	PUSH	EBX
   189 00000203 BB 00000002                     	MOV	EBX,2
   190 00000208 E8 [00000000]                   	CALL	_init_mouse_cursor8
   191 0000020D 68 [00000000]                   	PUSH	LC0
   192 00000212 6A 44                           	PUSH	68
   193 00000214 68 000000A0                     	PUSH	160
   194 00000219 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   195 0000021F E8 00000423                     	CALL	_make_window
   196 00000224 68 [00000007]                   	PUSH	LC1
   197 00000229 6A 1C                           	PUSH	28
   198 0000022B 6A 18                           	PUSH	24
   199 0000022D 6A 00                           	PUSH	0
   200 0000022F 68 000000A0                     	PUSH	160
   201 00000234 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   202 0000023A E8 [00000000]                   	CALL	_putfonts8_asc
   203 0000023F 83 C4 30                        	ADD	ESP,48
   204 00000242 68 [00000012]                   	PUSH	LC2
   205 00000247 6A 2C                           	PUSH	44
   206 00000249 6A 18                           	PUSH	24
   207 0000024B 6A 00                           	PUSH	0
   208 0000024D 68 000000A0                     	PUSH	160
   209 00000252 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   210 00000258 E8 [00000000]                   	CALL	_putfonts8_asc
   211 0000025D 6A 00                           	PUSH	0
   212 0000025F 6A 00                           	PUSH	0
   213 00000261 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   214 00000267 E8 [00000000]                   	CALL	_sheet_slide
   215 0000026C 83 C4 24                        	ADD	ESP,36
   216 0000026F 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   217 00000276 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   218 00000279 89 C8                           	MOV	EAX,ECX
   219 0000027B 99                              	CDQ
   220 0000027C F7 FB                           	IDIV	EBX
   221 0000027E 89 C6                           	MOV	ESI,EAX
   222 00000280 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   223 00000287 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   224 0000028A 89 C8                           	MOV	EAX,ECX
   225 0000028C 99                              	CDQ
   226 0000028D F7 FB                           	IDIV	EBX
   227 0000028F 50                              	PUSH	EAX
   228 00000290 89 C7                           	MOV	EDI,EAX
   229 00000292 56                              	PUSH	ESI
   230 00000293 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   231 00000296 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   232 0000029C E8 [00000000]                   	CALL	_sheet_slide
   233 000002A1 6A 48                           	PUSH	72
   234 000002A3 6A 50                           	PUSH	80
   235 000002A5 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   236 000002AB E8 [00000000]                   	CALL	_sheet_slide
   237 000002B0 6A 00                           	PUSH	0
   238 000002B2 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   239 000002B8 E8 [00000000]                   	CALL	_sheet_updown
   240 000002BD 83 C4 20                        	ADD	ESP,32
   241 000002C0 6A 01                           	PUSH	1
   242 000002C2 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   243 000002C8 E8 [00000000]                   	CALL	_sheet_updown
   244 000002CD 6A 02                           	PUSH	2
   245 000002CF FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   246 000002D5 E8 [00000000]                   	CALL	_sheet_updown
   247 000002DA 57                              	PUSH	EDI
   248 000002DB 56                              	PUSH	ESI
   249 000002DC 68 [0000001B]                   	PUSH	LC3
   250 000002E1 53                              	PUSH	EBX
   251 000002E2 E8 [00000000]                   	CALL	_sprintf
   252 000002E7 83 C4 20                        	ADD	ESP,32
   253 000002EA 53                              	PUSH	EBX
   254 000002EB 6A 00                           	PUSH	0
   255 000002ED 6A 00                           	PUSH	0
   256 000002EF 6A 07                           	PUSH	7
   257 000002F1 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   258 000002F8 50                              	PUSH	EAX
   259 000002F9 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   260 000002FF E8 [00000000]                   	CALL	_putfonts8_asc
   261 00000304 68 003C0000                     	PUSH	3932160
   262 00000309 E8 [00000000]                   	CALL	_memman_total
   263 0000030E C1 AD FFFFFE00 14               	SHR	DWORD [-512+EBP],20
   264 00000315 C1 E8 0A                        	SHR	EAX,10
   265 00000318 89 04 24                        	MOV	DWORD [ESP],EAX
   266 0000031B FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   267 00000321 68 [00000026]                   	PUSH	LC4
   268 00000326 53                              	PUSH	EBX
   269 00000327 E8 [00000000]                   	CALL	_sprintf
   270 0000032C 83 C4 28                        	ADD	ESP,40
   271 0000032F 53                              	PUSH	EBX
   272 00000330 6A 20                           	PUSH	32
   273 00000332 6A 00                           	PUSH	0
   274 00000334 6A 07                           	PUSH	7
   275 00000336 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   276 0000033D 50                              	PUSH	EAX
   277 0000033E                                 L20:
   278 0000033E FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   279 00000344 E8 [00000000]                   	CALL	_putfonts8_asc
   280 00000349 6A 30                           	PUSH	48
   281 0000034B FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   282 00000351 6A 00                           	PUSH	0
   283 00000353 6A 00                           	PUSH	0
   284 00000355 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   285 0000035B E8 [00000000]                   	CALL	_sheet_refresh
   286 00000360 83 C4 2C                        	ADD	ESP,44
   287 00000363                                 L2:
   288 00000363 FF 35 [00000000]                	PUSH	DWORD [_timerctl]
   289 00000369 68 [0000003E]                   	PUSH	LC5
   290 0000036E 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   291 00000371 53                              	PUSH	EBX
   292 00000372 E8 [00000000]                   	CALL	_sprintf
   293 00000377 6A 2B                           	PUSH	43
   294 00000379 6A 77                           	PUSH	119
   295 0000037B 6A 1C                           	PUSH	28
   296 0000037D 6A 28                           	PUSH	40
   297 0000037F 6A 00                           	PUSH	0
   298 00000381 68 000000A0                     	PUSH	160
   299 00000386 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   300 0000038C E8 [00000000]                   	CALL	_boxfill8
   301 00000391 83 C4 28                        	ADD	ESP,40
   302 00000394 53                              	PUSH	EBX
   303 00000395 6A 1C                           	PUSH	28
   304 00000397 6A 28                           	PUSH	40
   305 00000399 6A 08                           	PUSH	8
   306 0000039B 68 000000A0                     	PUSH	160
   307 000003A0 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   308 000003A6 E8 [00000000]                   	CALL	_putfonts8_asc
   309 000003AB 6A 2C                           	PUSH	44
   310 000003AD 6A 78                           	PUSH	120
   311 000003AF 6A 1C                           	PUSH	28
   312 000003B1 6A 28                           	PUSH	40
   313 000003B3 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   314 000003B9 E8 [00000000]                   	CALL	_sheet_refresh
   315 000003BE 83 C4 2C                        	ADD	ESP,44
   316 000003C1 E8 [00000000]                   	CALL	_io_cli
   317 000003C6 68 [00000000]                   	PUSH	_keyfifo
   318 000003CB E8 [00000000]                   	CALL	_fifo8_status
   319 000003D0 68 [00000000]                   	PUSH	_mousefifo
   320 000003D5 89 C3                           	MOV	EBX,EAX
   321 000003D7 E8 [00000000]                   	CALL	_fifo8_status
   322 000003DC 68 [00000000]                   	PUSH	_timerfifo
   323 000003E1 01 C3                           	ADD	EBX,EAX
   324 000003E3 E8 [00000000]                   	CALL	_fifo8_status
   325 000003E8 83 C4 0C                        	ADD	ESP,12
   326 000003EB 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   327 000003EE 85 C0                           	TEST	EAX,EAX
   328 000003F0 0F 84 00000247                  	JE	L21
   329 000003F6 68 [00000000]                   	PUSH	_keyfifo
   330 000003FB E8 [00000000]                   	CALL	_fifo8_status
   331 00000400 5B                              	POP	EBX
   332 00000401 85 C0                           	TEST	EAX,EAX
   333 00000403 0F 85 000001DE                  	JNE	L22
   334 00000409 68 [00000000]                   	PUSH	_mousefifo
   335 0000040E E8 [00000000]                   	CALL	_fifo8_status
   336 00000413 59                              	POP	ECX
   337 00000414 85 C0                           	TEST	EAX,EAX
   338 00000416 75 59                           	JNE	L23
   339 00000418 68 [00000000]                   	PUSH	_timerfifo
   340 0000041D E8 [00000000]                   	CALL	_fifo8_status
   341 00000422 5A                              	POP	EDX
   342 00000423 85 C0                           	TEST	EAX,EAX
   343 00000425 0F 84 FFFFFF38                  	JE	L2
   344 0000042B 68 [00000000]                   	PUSH	_timerfifo
   345 00000430 E8 [00000000]                   	CALL	_fifo8_get
   346 00000435 E8 [00000000]                   	CALL	_io_sti
   347 0000043A 68 [00000044]                   	PUSH	LC9
   348 0000043F 6A 40                           	PUSH	64
   349 00000441 6A 00                           	PUSH	0
   350 00000443 6A 07                           	PUSH	7
   351 00000445 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   352 0000044B FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   353 00000451 E8 [00000000]                   	CALL	_putfonts8_asc
   354 00000456 6A 50                           	PUSH	80
   355 00000458 6A 38                           	PUSH	56
   356 0000045A 6A 40                           	PUSH	64
   357 0000045C 6A 00                           	PUSH	0
   358 0000045E FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   359 00000464 E8 [00000000]                   	CALL	_sheet_refresh
   360 00000469 83 C4 30                        	ADD	ESP,48
   361 0000046C E9 FFFFFEF2                     	JMP	L2
   362 00000471                                 L23:
   363 00000471 68 [00000000]                   	PUSH	_mousefifo
   364 00000476 E8 [00000000]                   	CALL	_fifo8_get
   365 0000047B 88 C3                           	MOV	BL,AL
   366 0000047D E8 [00000000]                   	CALL	_io_sti
   367 00000482 0F B6 C3                        	MOVZX	EAX,BL
   368 00000485 50                              	PUSH	EAX
   369 00000486 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
   370 0000048C 50                              	PUSH	EAX
   371 0000048D E8 [00000000]                   	CALL	_mouse_decode
   372 00000492 83 C4 0C                        	ADD	ESP,12
   373 00000495 85 C0                           	TEST	EAX,EAX
   374 00000497 0F 84 FFFFFEC6                  	JE	L2
   375 0000049D FF B5 FFFFFF1C                  	PUSH	DWORD [-228+EBP]
   376 000004A3 FF B5 FFFFFF18                  	PUSH	DWORD [-232+EBP]
   377 000004A9 68 [0000004C]                   	PUSH	LC7
   378 000004AE 8D 45 C4                        	LEA	EAX,DWORD [-60+EBP]
   379 000004B1 50                              	PUSH	EAX
   380 000004B2 E8 [00000000]                   	CALL	_sprintf
   381 000004B7 83 C4 10                        	ADD	ESP,16
   382 000004BA 8B 85 FFFFFF20                  	MOV	EAX,DWORD [-224+EBP]
   383 000004C0 A9 00000001                     	TEST	EAX,1
   384 000004C5 74 04                           	JE	L11
   385 000004C7 C6 45 C5 4C                     	MOV	BYTE [-59+EBP],76
   386 000004CB                                 L11:
   387 000004CB A9 00000002                     	TEST	EAX,2
   388 000004D0 74 04                           	JE	L12
   389 000004D2 C6 45 C7 52                     	MOV	BYTE [-57+EBP],82
   390 000004D6                                 L12:
   391 000004D6 83 E0 04                        	AND	EAX,4
   392 000004D9 74 04                           	JE	L13
   393 000004DB C6 45 C6 43                     	MOV	BYTE [-58+EBP],67
   394 000004DF                                 L13:
   395 000004DF 6A 1F                           	PUSH	31
   396 000004E1 68 00000097                     	PUSH	151
   397 000004E6 6A 10                           	PUSH	16
   398 000004E8 6A 20                           	PUSH	32
   399 000004EA 6A 0E                           	PUSH	14
   400 000004EC FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   401 000004F2 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   402 000004F8 E8 [00000000]                   	CALL	_boxfill8
   403 000004FD 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   404 00000500 52                              	PUSH	EDX
   405 00000501 6A 10                           	PUSH	16
   406 00000503 6A 20                           	PUSH	32
   407 00000505 6A 07                           	PUSH	7
   408 00000507 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   409 0000050D FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   410 00000513 E8 [00000000]                   	CALL	_putfonts8_asc
   411 00000518 83 C4 34                        	ADD	ESP,52
   412 0000051B 6A 20                           	PUSH	32
   413 0000051D 68 00000098                     	PUSH	152
   414 00000522 6A 10                           	PUSH	16
   415 00000524 6A 20                           	PUSH	32
   416 00000526 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   417 0000052C E8 [00000000]                   	CALL	_sheet_refresh
   418 00000531 83 C4 14                        	ADD	ESP,20
   419 00000534 03 BD FFFFFF1C                  	ADD	EDI,DWORD [-228+EBP]
   420 0000053A 03 B5 FFFFFF18                  	ADD	ESI,DWORD [-232+EBP]
   421 00000540 0F 88 0000009A                  	JS	L24
   422 00000546                                 L14:
   423 00000546 85 FF                           	TEST	EDI,EDI
   424 00000548 0F 88 0000008B                  	JS	L25
   425 0000054E                                 L15:
   426 0000054E 8B 85 FFFFFE08                  	MOV	EAX,DWORD [-504+EBP]
   427 00000554 48                              	DEC	EAX
   428 00000555 39 C6                           	CMP	ESI,EAX
   429 00000557 7E 02                           	JLE	L16
   430 00000559 89 C6                           	MOV	ESI,EAX
   431 0000055B                                 L16:
   432 0000055B 8B 85 FFFFFE04                  	MOV	EAX,DWORD [-508+EBP]
   433 00000561 48                              	DEC	EAX
   434 00000562 39 C7                           	CMP	EDI,EAX
   435 00000564 7E 02                           	JLE	L17
   436 00000566 89 C7                           	MOV	EDI,EAX
   437 00000568                                 L17:
   438 00000568 57                              	PUSH	EDI
   439 00000569 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   440 0000056C 56                              	PUSH	ESI
   441 0000056D 68 [0000005A]                   	PUSH	LC8
   442 00000572 53                              	PUSH	EBX
   443 00000573 E8 [00000000]                   	CALL	_sprintf
   444 00000578 6A 0F                           	PUSH	15
   445 0000057A 6A 4F                           	PUSH	79
   446 0000057C 6A 00                           	PUSH	0
   447 0000057E 6A 00                           	PUSH	0
   448 00000580 6A 0E                           	PUSH	14
   449 00000582 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   450 00000588 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   451 0000058E E8 [00000000]                   	CALL	_boxfill8
   452 00000593 83 C4 2C                        	ADD	ESP,44
   453 00000596 53                              	PUSH	EBX
   454 00000597 6A 00                           	PUSH	0
   455 00000599 6A 00                           	PUSH	0
   456 0000059B 6A 07                           	PUSH	7
   457 0000059D FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   458 000005A3 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   459 000005A9 E8 [00000000]                   	CALL	_putfonts8_asc
   460 000005AE 6A 10                           	PUSH	16
   461 000005B0 6A 50                           	PUSH	80
   462 000005B2 6A 00                           	PUSH	0
   463 000005B4 6A 00                           	PUSH	0
   464 000005B6 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   465 000005BC E8 [00000000]                   	CALL	_sheet_refresh
   466 000005C1 83 C4 2C                        	ADD	ESP,44
   467 000005C4 57                              	PUSH	EDI
   468 000005C5 56                              	PUSH	ESI
   469 000005C6 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   470 000005CC E8 [00000000]                   	CALL	_sheet_slide
   471 000005D1 83 C4 0C                        	ADD	ESP,12
   472 000005D4 E9 FFFFFD8A                     	JMP	L2
   473 000005D9                                 L25:
   474 000005D9 31 FF                           	XOR	EDI,EDI
   475 000005DB E9 FFFFFF6E                     	JMP	L15
   476 000005E0                                 L24:
   477 000005E0 31 F6                           	XOR	ESI,ESI
   478 000005E2 E9 FFFFFF5F                     	JMP	L14
   479 000005E7                                 L22:
   480 000005E7 68 [00000000]                   	PUSH	_keyfifo
   481 000005EC E8 [00000000]                   	CALL	_fifo8_get
   482 000005F1 88 C3                           	MOV	BL,AL
   483 000005F3 E8 [00000000]                   	CALL	_io_sti
   484 000005F8 0F B6 C3                        	MOVZX	EAX,BL
   485 000005FB 50                              	PUSH	EAX
   486 000005FC 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   487 000005FF 68 [00000064]                   	PUSH	LC6
   488 00000604 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   489 00000607 52                              	PUSH	EDX
   490 00000608 E8 [00000000]                   	CALL	_sprintf
   491 0000060D 6A 1F                           	PUSH	31
   492 0000060F 6A 0F                           	PUSH	15
   493 00000611 6A 10                           	PUSH	16
   494 00000613 6A 00                           	PUSH	0
   495 00000615 6A 0E                           	PUSH	14
   496 00000617 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   497 0000061D FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   498 00000623 E8 [00000000]                   	CALL	_boxfill8
   499 00000628 83 C4 2C                        	ADD	ESP,44
   500 0000062B 53                              	PUSH	EBX
   501 0000062C 6A 10                           	PUSH	16
   502 0000062E 6A 00                           	PUSH	0
   503 00000630 6A 07                           	PUSH	7
   504 00000632 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   505 00000638 E9 FFFFFD01                     	JMP	L20
   506 0000063D                                 L21:
   507 0000063D E8 [00000000]                   	CALL	_io_sti
   508 00000642 E9 FFFFFD1C                     	JMP	L2
   509                                          [SECTION .data]
   510 00000069                                 _closebtn.0:
   511 00000069 4F 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"OOOOOOOOOOOOOOO@"
       00000073 4F 4F 4F 4F 4F 40 
   512 00000079 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       00000083 51 51 51 51 24 40 
   513 00000089 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       00000093 51 51 51 51 24 40 
   514 00000099 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       000000A3 40 40 51 51 24 40 
   515 000000A9 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000B3 40 51 51 51 24 40 
   516 000000B9 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000C3 51 51 51 51 24 40 
   517 000000C9 4F 51 51 51 51 51 51 40 40 51   	DB	"OQQQQQQ@@QQQQQ$@"
       000000D3 51 51 51 51 24 40 
   518 000000D9 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000E3 51 51 51 51 24 40 
   519 000000E9 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000F3 40 51 51 51 24 40 
   520 000000F9 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       00000103 40 40 51 51 24 40 
   521 00000109 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       00000113 51 51 51 51 24 40 
   522 00000119 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       00000123 51 51 51 51 24 40 
   523 00000129 4F 24 24 24 24 24 24 24 24 24   	DB	"O$$$$$$$$$$$$$$@"
       00000133 24 24 24 24 24 40 
   524 00000139 40 40 40 40 40 40 40 40 40 40   	DB	"@@@@@@@@@@@@@@@@"
       00000143 40 40 40 40 40 40 
   525                                          [SECTION .text]
   526 00000647                                 	GLOBAL	_make_window
   527 00000647                                 _make_window:
   528 00000647 55                              	PUSH	EBP
   529 00000648 89 E5                           	MOV	EBP,ESP
   530 0000064A 57                              	PUSH	EDI
   531 0000064B 56                              	PUSH	ESI
   532 0000064C 53                              	PUSH	EBX
   533 0000064D 83 EC 14                        	SUB	ESP,20
   534 00000650 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   535 00000653 6A 00                           	PUSH	0
   536 00000655 8D 43 FF                        	LEA	EAX,DWORD [-1+EBX]
   537 00000658 8D 7B FE                        	LEA	EDI,DWORD [-2+EBX]
   538 0000065B 50                              	PUSH	EAX
   539 0000065C 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   540 0000065F 6A 00                           	PUSH	0
   541 00000661 6A 00                           	PUSH	0
   542 00000663 6A 08                           	PUSH	8
   543 00000665 53                              	PUSH	EBX
   544 00000666 FF 75 08                        	PUSH	DWORD [8+EBP]
   545 00000669 E8 [00000000]                   	CALL	_boxfill8
   546 0000066E 6A 01                           	PUSH	1
   547 00000670 57                              	PUSH	EDI
   548 00000671 6A 01                           	PUSH	1
   549 00000673 6A 01                           	PUSH	1
   550 00000675 6A 07                           	PUSH	7
   551 00000677 53                              	PUSH	EBX
   552 00000678 FF 75 08                        	PUSH	DWORD [8+EBP]
   553 0000067B E8 [00000000]                   	CALL	_boxfill8
   554 00000680 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   555 00000683 83 C4 38                        	ADD	ESP,56
   556 00000686 4A                              	DEC	EDX
   557 00000687 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   558 0000068A 52                              	PUSH	EDX
   559 0000068B 6A 00                           	PUSH	0
   560 0000068D 6A 00                           	PUSH	0
   561 0000068F 6A 00                           	PUSH	0
   562 00000691 6A 08                           	PUSH	8
   563 00000693 53                              	PUSH	EBX
   564 00000694 FF 75 08                        	PUSH	DWORD [8+EBP]
   565 00000697 E8 [00000000]                   	CALL	_boxfill8
   566 0000069C 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   567 0000069F 83 EE 02                        	SUB	ESI,2
   568 000006A2 56                              	PUSH	ESI
   569 000006A3 6A 01                           	PUSH	1
   570 000006A5 6A 01                           	PUSH	1
   571 000006A7 6A 01                           	PUSH	1
   572 000006A9 6A 07                           	PUSH	7
   573 000006AB 53                              	PUSH	EBX
   574 000006AC FF 75 08                        	PUSH	DWORD [8+EBP]
   575 000006AF E8 [00000000]                   	CALL	_boxfill8
   576 000006B4 83 C4 38                        	ADD	ESP,56
   577 000006B7 56                              	PUSH	ESI
   578 000006B8 57                              	PUSH	EDI
   579 000006B9 6A 01                           	PUSH	1
   580 000006BB 57                              	PUSH	EDI
   581 000006BC 6A 0F                           	PUSH	15
   582 000006BE 53                              	PUSH	EBX
   583 000006BF FF 75 08                        	PUSH	DWORD [8+EBP]
   584 000006C2 E8 [00000000]                   	CALL	_boxfill8
   585 000006C7 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   586 000006CA FF 75 EC                        	PUSH	DWORD [-20+EBP]
   587 000006CD 6A 00                           	PUSH	0
   588 000006CF FF 75 EC                        	PUSH	DWORD [-20+EBP]
   589 000006D2 6A 00                           	PUSH	0
   590 000006D4 53                              	PUSH	EBX
   591 000006D5 FF 75 08                        	PUSH	DWORD [8+EBP]
   592 000006D8 E8 [00000000]                   	CALL	_boxfill8
   593 000006DD 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   594 000006E0 83 C4 38                        	ADD	ESP,56
   595 000006E3 83 E8 03                        	SUB	EAX,3
   596 000006E6 50                              	PUSH	EAX
   597 000006E7 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   598 000006EA 50                              	PUSH	EAX
   599 000006EB 6A 02                           	PUSH	2
   600 000006ED 6A 02                           	PUSH	2
   601 000006EF 6A 08                           	PUSH	8
   602 000006F1 53                              	PUSH	EBX
   603 000006F2 FF 75 08                        	PUSH	DWORD [8+EBP]
   604 000006F5 E8 [00000000]                   	CALL	_boxfill8
   605 000006FA 8D 43 FC                        	LEA	EAX,DWORD [-4+EBX]
   606 000006FD 6A 14                           	PUSH	20
   607 000006FF 50                              	PUSH	EAX
   608 00000700 6A 03                           	PUSH	3
   609 00000702 6A 03                           	PUSH	3
   610 00000704 6A 0C                           	PUSH	12
   611 00000706 53                              	PUSH	EBX
   612 00000707 FF 75 08                        	PUSH	DWORD [8+EBP]
   613 0000070A E8 [00000000]                   	CALL	_boxfill8
   614 0000070F 83 C4 38                        	ADD	ESP,56
   615 00000712 56                              	PUSH	ESI
   616 00000713 57                              	PUSH	EDI
   617 00000714 56                              	PUSH	ESI
   618 00000715 6A 01                           	PUSH	1
   619 00000717 6A 0F                           	PUSH	15
   620 00000719 53                              	PUSH	EBX
   621 0000071A FF 75 08                        	PUSH	DWORD [8+EBP]
   622 0000071D E8 [00000000]                   	CALL	_boxfill8
   623 00000722 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   624 00000725 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   625 00000728 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   626 0000072B 6A 00                           	PUSH	0
   627 0000072D 6A 00                           	PUSH	0
   628 0000072F 6B F3 05                        	IMUL	ESI,EBX,5
   629 00000732 53                              	PUSH	EBX
   630 00000733 FF 75 08                        	PUSH	DWORD [8+EBP]
   631 00000736 E8 [00000000]                   	CALL	_boxfill8
   632 0000073B 83 C4 38                        	ADD	ESP,56
   633 0000073E FF 75 14                        	PUSH	DWORD [20+EBP]
   634 00000741 6A 04                           	PUSH	4
   635 00000743 6A 18                           	PUSH	24
   636 00000745 6A 07                           	PUSH	7
   637 00000747 53                              	PUSH	EBX
   638 00000748 FF 75 08                        	PUSH	DWORD [8+EBP]
   639 0000074B E8 [00000000]                   	CALL	_putfonts8_asc
   640 00000750 83 C4 18                        	ADD	ESP,24
   641 00000753 C7 45 F0 00000000               	MOV	DWORD [-16+EBP],0
   642 0000075A C7 45 E0 00000000               	MOV	DWORD [-32+EBP],0
   643 00000761                                 L42:
   644 00000761 8D 04 1E                        	LEA	EAX,DWORD [ESI+EBX*1]
   645 00000764 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   646 00000767 31 FF                           	XOR	EDI,EDI
   647 00000769 8D 4C 02 EB                     	LEA	ECX,DWORD [-21+EDX+EAX*1]
   648 0000076D                                 L41:
   649 0000076D 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   650 00000770 8A 94 07 [00000069]             	MOV	DL,BYTE [_closebtn.0+EDI+EAX*1]
   651 00000777 80 FA 40                        	CMP	DL,64
   652 0000077A 74 33                           	JE	L47
   653 0000077C 80 FA 24                        	CMP	DL,36
   654 0000077F 74 2A                           	JE	L48
   655 00000781 80 FA 51                        	CMP	DL,81
   656 00000784 B2 08                           	MOV	DL,8
   657 00000786 0F 95 C0                        	SETNE	AL
   658 00000789 28 C2                           	SUB	DL,AL
   659 0000078B                                 L36:
   660 0000078B 47                              	INC	EDI
   661 0000078C 88 11                           	MOV	BYTE [ECX],DL
   662 0000078E 41                              	INC	ECX
   663 0000078F 83 FF 0F                        	CMP	EDI,15
   664 00000792 7E D9                           	JLE	L41
   665 00000794 FF 45 F0                        	INC	DWORD [-16+EBP]
   666 00000797 01 DE                           	ADD	ESI,EBX
   667 00000799 83 45 E0 10                     	ADD	DWORD [-32+EBP],16
   668 0000079D 83 7D F0 0D                     	CMP	DWORD [-16+EBP],13
   669 000007A1 7E BE                           	JLE	L42
   670 000007A3 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   671 000007A6 5B                              	POP	EBX
   672 000007A7 5E                              	POP	ESI
   673 000007A8 5F                              	POP	EDI
   674 000007A9 5D                              	POP	EBP
   675 000007AA C3                              	RET
   676 000007AB                                 L48:
   677 000007AB B2 0F                           	MOV	DL,15
   678 000007AD EB DC                           	JMP	L36
   679 000007AF                                 L47:
   680 000007AF 31 D2                           	XOR	EDX,EDX
   681 000007B1 EB D8                           	JMP	L36
