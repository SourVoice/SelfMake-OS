     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_init_pit
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_timerfifo
    15 00000000                                 	EXTERN	_timer_alloc
    16 00000000                                 	EXTERN	_timer_init
    17 00000000                                 	EXTERN	_timer_settime
    18 00000000                                 	EXTERN	_init_keyboard
    19 00000000                                 	EXTERN	_enable_mouse
    20 00000000                                 	EXTERN	_memtest
    21 00000000                                 	EXTERN	_memman_init
    22 00000000                                 	EXTERN	_memman_free
    23 00000000                                 	EXTERN	_init_palette
    24 00000000                                 	EXTERN	_shtctl_init
    25 00000000                                 	EXTERN	_sheet_alloc
    26 00000000                                 	EXTERN	_memman_alloc_4k
    27 00000000                                 	EXTERN	_sheet_setbuf
    28 00000000                                 	EXTERN	_init_screen
    29 00000000                                 	EXTERN	_init_mouse_cursor8
    30 00000000                                 	EXTERN	_putfonts8_asc
    31 00000000                                 	EXTERN	_sheet_slide
    32 00000000                                 	EXTERN	_sheet_updown
    33 00000000                                 	EXTERN	_sprintf
    34 00000000                                 	EXTERN	_memman_total
    35 00000000                                 	EXTERN	_sheet_refresh
    36 00000000                                 	EXTERN	_io_cli
    37 00000000                                 	EXTERN	_fifo8_status
    38 00000000                                 	EXTERN	_fifo8_get
    39 00000000                                 	EXTERN	_boxfill8
    40 00000000                                 	EXTERN	_putfonts_asc_sht
    41 00000000                                 	EXTERN	_mouse_decode
    42 00000000                                 [FILE "bootpack.c"]
    43                                          [SECTION .data]
    44 00000000                                 LC0:
    45 00000000 77 69 6E 64 6F 77 00            	DB	"window",0x00
    46 00000007                                 LC1:
    47 00000007 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       00000011 00 
    48 00000012                                 LC2:
    49 00000012 54 68 69 73 20 4F 53 21 00      	DB	"This OS!",0x00
    50 0000001B                                 LC3:
    51 0000001B 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       00000025 00 
    52 00000026                                 LC4:
    53 00000026 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB free : %dKB",0x00
       00000030 42 20 66 72 65 65 20 3A 20 25 
       0000003A 64 4B 42 00 
    54 0000003E                                 LC10:
    55 0000003E 33 5B 73 65 63 5D 00            	DB	"3[sec]",0x00
    56 00000045                                 LC8:
    57 00000045 31 30 5B 73 65 63 5D 00         	DB	"10[sec]",0x00
    58 0000004D                                 LC9:
    59 0000004D 25 30 31 30 64 00               	DB	"%010d",0x00
    60 00000053                                 LC6:
    61 00000053 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000005D 34 64 5D 00 
    62 00000061                                 LC7:
    63 00000061 28 25 33 64 2C 25 33 64 29 00   	DB	"(%3d,%3d)",0x00
    64 0000006B                                 LC5:
    65 0000006B 25 30 32 78 00                  	DB	"%02x",0x00
    66                                          [SECTION .text]
    67 00000000                                 	GLOBAL	_HariMain
    68 00000000                                 _HariMain:
    69 00000000 55                              	PUSH	EBP
    70 00000001 89 E5                           	MOV	EBP,ESP
    71 00000003 57                              	PUSH	EDI
    72 00000004 56                              	PUSH	ESI
    73 00000005 53                              	PUSH	EBX
    74 00000006 81 EC 00000214                  	SUB	ESP,532
    75 0000000C 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    76 00000013 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    77 0000001A 89 95 FFFFFE04                  	MOV	DWORD [-508+EBP],EDX
    78 00000020 89 85 FFFFFE08                  	MOV	DWORD [-504+EBP],EAX
    79 00000026 8B 35 00000FF8                  	MOV	ESI,DWORD [4088]
    80 0000002C C7 85 FFFFFDFC 00000000         	MOV	DWORD [-516+EBP],0
    81 00000036 E8 [00000000]                   	CALL	_init_gdtidt
    82 0000003B E8 [00000000]                   	CALL	_init_pic
    83 00000040 E8 [00000000]                   	CALL	_io_sti
    84 00000045 8D 45 A4                        	LEA	EAX,DWORD [-92+EBP]
    85 00000048 50                              	PUSH	EAX
    86 00000049 6A 20                           	PUSH	32
    87 0000004B 68 [00000000]                   	PUSH	_keyfifo
    88 00000050 E8 [00000000]                   	CALL	_fifo8_init
    89 00000055 8D 85 FFFFFF24                  	LEA	EAX,DWORD [-220+EBP]
    90 0000005B 50                              	PUSH	EAX
    91 0000005C 68 00000080                     	PUSH	128
    92 00000061 68 [00000000]                   	PUSH	_mousefifo
    93 00000066 E8 [00000000]                   	CALL	_fifo8_init
    94 0000006B E8 [00000000]                   	CALL	_init_pit
    95 00000070 68 000000F8                     	PUSH	248
    96 00000075 6A 21                           	PUSH	33
    97 00000077 E8 [00000000]                   	CALL	_io_out8
    98 0000007C 83 C4 20                        	ADD	ESP,32
    99 0000007F 68 000000EF                     	PUSH	239
   100 00000084 68 000000A1                     	PUSH	161
   101 00000089 E8 [00000000]                   	CALL	_io_out8
   102 0000008E 8D 85 FFFFFE0C                  	LEA	EAX,DWORD [-500+EBP]
   103 00000094 50                              	PUSH	EAX
   104 00000095 6A 08                           	PUSH	8
   105 00000097 68 [00000000]                   	PUSH	_timerfifo
   106 0000009C E8 [00000000]                   	CALL	_fifo8_init
   107 000000A1 E8 [00000000]                   	CALL	_timer_alloc
   108 000000A6 6A 0A                           	PUSH	10
   109 000000A8 68 [00000000]                   	PUSH	_timerfifo
   110 000000AD 89 C3                           	MOV	EBX,EAX
   111 000000AF 50                              	PUSH	EAX
   112 000000B0 E8 [00000000]                   	CALL	_timer_init
   113 000000B5 83 C4 20                        	ADD	ESP,32
   114 000000B8 68 000003E8                     	PUSH	1000
   115 000000BD 53                              	PUSH	EBX
   116 000000BE E8 [00000000]                   	CALL	_timer_settime
   117 000000C3 E8 [00000000]                   	CALL	_timer_alloc
   118 000000C8 6A 03                           	PUSH	3
   119 000000CA 68 [00000000]                   	PUSH	_timerfifo
   120 000000CF 89 C3                           	MOV	EBX,EAX
   121 000000D1 50                              	PUSH	EAX
   122 000000D2 E8 [00000000]                   	CALL	_timer_init
   123 000000D7 68 0000012C                     	PUSH	300
   124 000000DC 53                              	PUSH	EBX
   125 000000DD E8 [00000000]                   	CALL	_timer_settime
   126 000000E2 E8 [00000000]                   	CALL	_timer_alloc
   127 000000E7 6A 01                           	PUSH	1
   128 000000E9 68 [00000000]                   	PUSH	_timerfifo
   129 000000EE 50                              	PUSH	EAX
   130 000000EF 89 85 FFFFFE00                  	MOV	DWORD [-512+EBP],EAX
   131 000000F5 E8 [00000000]                   	CALL	_timer_init
   132 000000FA 83 C4 28                        	ADD	ESP,40
   133 000000FD 6A 32                           	PUSH	50
   134 000000FF FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   135 00000105 E8 [00000000]                   	CALL	_timer_settime
   136 0000010A E8 [00000000]                   	CALL	_init_keyboard
   137 0000010F 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
   138 00000115 50                              	PUSH	EAX
   139 00000116 E8 [00000000]                   	CALL	_enable_mouse
   140 0000011B 68 BFFFFFFF                     	PUSH	-1073741825
   141 00000120 68 00400000                     	PUSH	4194304
   142 00000125 E8 [00000000]                   	CALL	_memtest
   143 0000012A 68 003C0000                     	PUSH	3932160
   144 0000012F 89 85 FFFFFDF8                  	MOV	DWORD [-520+EBP],EAX
   145 00000135 E8 [00000000]                   	CALL	_memman_init
   146 0000013A 68 0009E000                     	PUSH	647168
   147 0000013F 68 00001000                     	PUSH	4096
   148 00000144 68 003C0000                     	PUSH	3932160
   149 00000149 E8 [00000000]                   	CALL	_memman_free
   150 0000014E 8B 85 FFFFFDF8                  	MOV	EAX,DWORD [-520+EBP]
   151 00000154 83 C4 24                        	ADD	ESP,36
   152 00000157 2D 00400000                     	SUB	EAX,4194304
   153 0000015C 50                              	PUSH	EAX
   154 0000015D 68 00400000                     	PUSH	4194304
   155 00000162 68 003C0000                     	PUSH	3932160
   156 00000167 E8 [00000000]                   	CALL	_memman_free
   157 0000016C E8 [00000000]                   	CALL	_init_palette
   158 00000171 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   159 00000178 50                              	PUSH	EAX
   160 00000179 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   161 00000180 50                              	PUSH	EAX
   162 00000181 56                              	PUSH	ESI
   163 00000182 8D B5 FFFFFE14                  	LEA	ESI,DWORD [-492+EBP]
   164 00000188 68 003C0000                     	PUSH	3932160
   165 0000018D E8 [00000000]                   	CALL	_shtctl_init
   166 00000192 89 C3                           	MOV	EBX,EAX
   167 00000194 50                              	PUSH	EAX
   168 00000195 E8 [00000000]                   	CALL	_sheet_alloc
   169 0000019A 83 C4 20                        	ADD	ESP,32
   170 0000019D 53                              	PUSH	EBX
   171 0000019E 89 85 FFFFFDF4                  	MOV	DWORD [-524+EBP],EAX
   172 000001A4 E8 [00000000]                   	CALL	_sheet_alloc
   173 000001A9 53                              	PUSH	EBX
   174 000001AA 89 85 FFFFFDF0                  	MOV	DWORD [-528+EBP],EAX
   175 000001B0 E8 [00000000]                   	CALL	_sheet_alloc
   176 000001B5 0F BF 1D 00000FF6               	MOVSX	EBX,WORD [4086]
   177 000001BC 89 85 FFFFFDEC                  	MOV	DWORD [-532+EBP],EAX
   178 000001C2 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   179 000001C9 0F AF C3                        	IMUL	EAX,EBX
   180 000001CC 50                              	PUSH	EAX
   181 000001CD 68 003C0000                     	PUSH	3932160
   182 000001D2 E8 [00000000]                   	CALL	_memman_alloc_4k
   183 000001D7 68 00002A80                     	PUSH	10880
   184 000001DC 68 003C0000                     	PUSH	3932160
   185 000001E1 89 85 FFFFFDE8                  	MOV	DWORD [-536+EBP],EAX
   186 000001E7 E8 [00000000]                   	CALL	_memman_alloc_4k
   187 000001EC 6A FF                           	PUSH	-1
   188 000001EE 89 C3                           	MOV	EBX,EAX
   189 000001F0 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   190 000001F7 50                              	PUSH	EAX
   191 000001F8 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   192 000001FF 50                              	PUSH	EAX
   193 00000200 FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   194 00000206 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   195 0000020C E8 [00000000]                   	CALL	_sheet_setbuf
   196 00000211 83 C4 2C                        	ADD	ESP,44
   197 00000214 6A 63                           	PUSH	99
   198 00000216 6A 10                           	PUSH	16
   199 00000218 6A 10                           	PUSH	16
   200 0000021A 56                              	PUSH	ESI
   201 0000021B FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   202 00000221 E8 [00000000]                   	CALL	_sheet_setbuf
   203 00000226 6A FF                           	PUSH	-1
   204 00000228 6A 44                           	PUSH	68
   205 0000022A 68 000000A0                     	PUSH	160
   206 0000022F 53                              	PUSH	EBX
   207 00000230 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   208 00000236 E8 [00000000]                   	CALL	_sheet_setbuf
   209 0000023B 83 C4 28                        	ADD	ESP,40
   210 0000023E 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   211 00000245 50                              	PUSH	EAX
   212 00000246 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   213 0000024D 50                              	PUSH	EAX
   214 0000024E FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   215 00000254 E8 [00000000]                   	CALL	_init_screen
   216 00000259 6A 63                           	PUSH	99
   217 0000025B 56                              	PUSH	ESI
   218 0000025C E8 [00000000]                   	CALL	_init_mouse_cursor8
   219 00000261 68 [00000000]                   	PUSH	LC0
   220 00000266 6A 44                           	PUSH	68
   221 00000268 68 000000A0                     	PUSH	160
   222 0000026D 53                              	PUSH	EBX
   223 0000026E E8 00000410                     	CALL	_make_window
   224 00000273 83 C4 24                        	ADD	ESP,36
   225 00000276 68 [00000007]                   	PUSH	LC1
   226 0000027B 6A 1C                           	PUSH	28
   227 0000027D 6A 18                           	PUSH	24
   228 0000027F 6A 00                           	PUSH	0
   229 00000281 68 000000A0                     	PUSH	160
   230 00000286 53                              	PUSH	EBX
   231 00000287 E8 [00000000]                   	CALL	_putfonts8_asc
   232 0000028C 68 [00000012]                   	PUSH	LC2
   233 00000291 6A 2C                           	PUSH	44
   234 00000293 6A 18                           	PUSH	24
   235 00000295 6A 00                           	PUSH	0
   236 00000297 68 000000A0                     	PUSH	160
   237 0000029C 53                              	PUSH	EBX
   238 0000029D BB 00000002                     	MOV	EBX,2
   239 000002A2 E8 [00000000]                   	CALL	_putfonts8_asc
   240 000002A7 83 C4 30                        	ADD	ESP,48
   241 000002AA 6A 00                           	PUSH	0
   242 000002AC 6A 00                           	PUSH	0
   243 000002AE FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   244 000002B4 E8 [00000000]                   	CALL	_sheet_slide
   245 000002B9 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   246 000002C0 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   247 000002C3 89 C8                           	MOV	EAX,ECX
   248 000002C5 99                              	CDQ
   249 000002C6 F7 FB                           	IDIV	EBX
   250 000002C8 89 C7                           	MOV	EDI,EAX
   251 000002CA 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   252 000002D1 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   253 000002D4 89 C8                           	MOV	EAX,ECX
   254 000002D6 99                              	CDQ
   255 000002D7 F7 FB                           	IDIV	EBX
   256 000002D9 50                              	PUSH	EAX
   257 000002DA 89 C6                           	MOV	ESI,EAX
   258 000002DC 57                              	PUSH	EDI
   259 000002DD 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   260 000002E0 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   261 000002E6 E8 [00000000]                   	CALL	_sheet_slide
   262 000002EB 6A 48                           	PUSH	72
   263 000002ED 6A 50                           	PUSH	80
   264 000002EF FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   265 000002F5 E8 [00000000]                   	CALL	_sheet_slide
   266 000002FA 83 C4 24                        	ADD	ESP,36
   267 000002FD 6A 00                           	PUSH	0
   268 000002FF FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   269 00000305 E8 [00000000]                   	CALL	_sheet_updown
   270 0000030A 6A 01                           	PUSH	1
   271 0000030C FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   272 00000312 E8 [00000000]                   	CALL	_sheet_updown
   273 00000317 6A 02                           	PUSH	2
   274 00000319 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   275 0000031F E8 [00000000]                   	CALL	_sheet_updown
   276 00000324 56                              	PUSH	ESI
   277 00000325 57                              	PUSH	EDI
   278 00000326 68 [0000001B]                   	PUSH	LC3
   279 0000032B 53                              	PUSH	EBX
   280 0000032C E8 [00000000]                   	CALL	_sprintf
   281 00000331 83 C4 28                        	ADD	ESP,40
   282 00000334 53                              	PUSH	EBX
   283 00000335 6A 00                           	PUSH	0
   284 00000337 6A 00                           	PUSH	0
   285 00000339 6A 00                           	PUSH	0
   286 0000033B 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   287 00000342 50                              	PUSH	EAX
   288 00000343 FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   289 00000349 E8 [00000000]                   	CALL	_putfonts8_asc
   290 0000034E 68 003C0000                     	PUSH	3932160
   291 00000353 E8 [00000000]                   	CALL	_memman_total
   292 00000358 C1 AD FFFFFDF8 14               	SHR	DWORD [-520+EBP],20
   293 0000035F C1 E8 0A                        	SHR	EAX,10
   294 00000362 89 04 24                        	MOV	DWORD [ESP],EAX
   295 00000365 FF B5 FFFFFDF8                  	PUSH	DWORD [-520+EBP]
   296 0000036B 68 [00000026]                   	PUSH	LC4
   297 00000370 53                              	PUSH	EBX
   298 00000371 E8 [00000000]                   	CALL	_sprintf
   299 00000376 83 C4 28                        	ADD	ESP,40
   300 00000379 53                              	PUSH	EBX
   301 0000037A 6A 20                           	PUSH	32
   302 0000037C 6A 00                           	PUSH	0
   303 0000037E 6A 07                           	PUSH	7
   304 00000380 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   305 00000387 50                              	PUSH	EAX
   306 00000388 FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   307 0000038E E8 [00000000]                   	CALL	_putfonts8_asc
   308 00000393 6A 30                           	PUSH	48
   309 00000395 FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   310 0000039B 6A 00                           	PUSH	0
   311 0000039D 6A 00                           	PUSH	0
   312 0000039F FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   313 000003A5 E8 [00000000]                   	CALL	_sheet_refresh
   314 000003AA                                 L27:
   315 000003AA 83 C4 2C                        	ADD	ESP,44
   316 000003AD                                 L2:
   317 000003AD FF 85 FFFFFDFC                  	INC	DWORD [-516+EBP]
   318 000003B3 E8 [00000000]                   	CALL	_io_cli
   319 000003B8 68 [00000000]                   	PUSH	_keyfifo
   320 000003BD E8 [00000000]                   	CALL	_fifo8_status
   321 000003C2 68 [00000000]                   	PUSH	_mousefifo
   322 000003C7 89 C3                           	MOV	EBX,EAX
   323 000003C9 E8 [00000000]                   	CALL	_fifo8_status
   324 000003CE 68 [00000000]                   	PUSH	_timerfifo
   325 000003D3 01 C3                           	ADD	EBX,EAX
   326 000003D5 E8 [00000000]                   	CALL	_fifo8_status
   327 000003DA 83 C4 0C                        	ADD	ESP,12
   328 000003DD 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   329 000003E0 85 C0                           	TEST	EAX,EAX
   330 000003E2 0F 84 00000291                  	JE	L29
   331 000003E8 68 [00000000]                   	PUSH	_keyfifo
   332 000003ED E8 [00000000]                   	CALL	_fifo8_status
   333 000003F2 5B                              	POP	EBX
   334 000003F3 85 C0                           	TEST	EAX,EAX
   335 000003F5 0F 85 00000240                  	JNE	L30
   336 000003FB 68 [00000000]                   	PUSH	_mousefifo
   337 00000400 E8 [00000000]                   	CALL	_fifo8_status
   338 00000405 59                              	POP	ECX
   339 00000406 85 C0                           	TEST	EAX,EAX
   340 00000408 0F 85 00000137                  	JNE	L31
   341 0000040E 68 [00000000]                   	PUSH	_timerfifo
   342 00000413 E8 [00000000]                   	CALL	_fifo8_status
   343 00000418 5A                              	POP	EDX
   344 00000419 85 C0                           	TEST	EAX,EAX
   345 0000041B 74 90                           	JE	L2
   346 0000041D 68 [00000000]                   	PUSH	_timerfifo
   347 00000422 E8 [00000000]                   	CALL	_fifo8_get
   348 00000427 88 C3                           	MOV	BL,AL
   349 00000429 E8 [00000000]                   	CALL	_io_sti
   350 0000042E 58                              	POP	EAX
   351 0000042F 80 FB 0A                        	CMP	BL,10
   352 00000432 0F 84 000000BE                  	JE	L32
   353 00000438 80 FB 03                        	CMP	BL,3
   354 0000043B 74 7A                           	JE	L33
   355 0000043D 84 DB                           	TEST	BL,BL
   356 0000043F 74 58                           	JE	L24
   357 00000441 6A 00                           	PUSH	0
   358 00000443 68 [00000000]                   	PUSH	_timerfifo
   359 00000448 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   360 0000044E E8 [00000000]                   	CALL	_timer_init
   361 00000453 6A 6F                           	PUSH	111
   362 00000455 6A 0F                           	PUSH	15
   363 00000457 6A 60                           	PUSH	96
   364 00000459 6A 08                           	PUSH	8
   365 0000045B 6A 07                           	PUSH	7
   366 0000045D                                 L28:
   367 0000045D FF B5 FFFFFE08                  	PUSH	DWORD [-504+EBP]
   368 00000463 FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   369 00000469 E8 [00000000]                   	CALL	_boxfill8
   370 0000046E 83 C4 28                        	ADD	ESP,40
   371 00000471 6A 32                           	PUSH	50
   372 00000473 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   373 00000479 E8 [00000000]                   	CALL	_timer_settime
   374 0000047E 6A 70                           	PUSH	112
   375 00000480 6A 10                           	PUSH	16
   376 00000482 6A 60                           	PUSH	96
   377 00000484 6A 08                           	PUSH	8
   378 00000486 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   379 0000048C E8 [00000000]                   	CALL	_sheet_refresh
   380 00000491 83 C4 1C                        	ADD	ESP,28
   381 00000494 E9 FFFFFF14                     	JMP	L2
   382 00000499                                 L24:
   383 00000499 6A 01                           	PUSH	1
   384 0000049B 68 [00000000]                   	PUSH	_timerfifo
   385 000004A0 FF B5 FFFFFE00                  	PUSH	DWORD [-512+EBP]
   386 000004A6 E8 [00000000]                   	CALL	_timer_init
   387 000004AB 6A 6F                           	PUSH	111
   388 000004AD 6A 0F                           	PUSH	15
   389 000004AF 6A 60                           	PUSH	96
   390 000004B1 6A 08                           	PUSH	8
   391 000004B3 6A 0E                           	PUSH	14
   392 000004B5 EB A6                           	JMP	L28
   393 000004B7                                 L33:
   394 000004B7 6A 06                           	PUSH	6
   395 000004B9 68 [0000003E]                   	PUSH	LC10
   396 000004BE 6A 0E                           	PUSH	14
   397 000004C0 6A 07                           	PUSH	7
   398 000004C2 6A 50                           	PUSH	80
   399 000004C4 6A 00                           	PUSH	0
   400 000004C6 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   401 000004CC E8 [00000000]                   	CALL	_putfonts_asc_sht
   402 000004D1 6A 60                           	PUSH	96
   403 000004D3 6A 30                           	PUSH	48
   404 000004D5 C7 85 FFFFFDFC 00000000         	MOV	DWORD [-516+EBP],0
   405 000004DF 6A 50                           	PUSH	80
   406 000004E1                                 L26:
   407 000004E1 6A 00                           	PUSH	0
   408 000004E3 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   409 000004E9 E8 [00000000]                   	CALL	_sheet_refresh
   410 000004EE 83 C4 30                        	ADD	ESP,48
   411 000004F1 E9 FFFFFEB7                     	JMP	L2
   412 000004F6                                 L32:
   413 000004F6 6A 07                           	PUSH	7
   414 000004F8 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   415 000004FB 68 [00000045]                   	PUSH	LC8
   416 00000500 6A 0E                           	PUSH	14
   417 00000502 6A 07                           	PUSH	7
   418 00000504 6A 40                           	PUSH	64
   419 00000506 6A 00                           	PUSH	0
   420 00000508 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   421 0000050E E8 [00000000]                   	CALL	_putfonts_asc_sht
   422 00000513 FF B5 FFFFFDFC                  	PUSH	DWORD [-516+EBP]
   423 00000519 68 [0000004D]                   	PUSH	LC9
   424 0000051E 53                              	PUSH	EBX
   425 0000051F E8 [00000000]                   	CALL	_sprintf
   426 00000524 83 C4 28                        	ADD	ESP,40
   427 00000527 6A 0A                           	PUSH	10
   428 00000529 53                              	PUSH	EBX
   429 0000052A 6A 08                           	PUSH	8
   430 0000052C 6A 00                           	PUSH	0
   431 0000052E 6A 1C                           	PUSH	28
   432 00000530 6A 28                           	PUSH	40
   433 00000532 FF B5 FFFFFDEC                  	PUSH	DWORD [-532+EBP]
   434 00000538 E8 [00000000]                   	CALL	_putfonts_asc_sht
   435 0000053D 6A 50                           	PUSH	80
   436 0000053F 6A 38                           	PUSH	56
   437 00000541 6A 40                           	PUSH	64
   438 00000543 EB 9C                           	JMP	L26
   439 00000545                                 L31:
   440 00000545 68 [00000000]                   	PUSH	_mousefifo
   441 0000054A E8 [00000000]                   	CALL	_fifo8_get
   442 0000054F 88 C3                           	MOV	BL,AL
   443 00000551 E8 [00000000]                   	CALL	_io_sti
   444 00000556 0F B6 C3                        	MOVZX	EAX,BL
   445 00000559 50                              	PUSH	EAX
   446 0000055A 8D 85 FFFFFF14                  	LEA	EAX,DWORD [-236+EBP]
   447 00000560 50                              	PUSH	EAX
   448 00000561 E8 [00000000]                   	CALL	_mouse_decode
   449 00000566 83 C4 0C                        	ADD	ESP,12
   450 00000569 85 C0                           	TEST	EAX,EAX
   451 0000056B 0F 84 FFFFFE3C                  	JE	L2
   452 00000571 FF B5 FFFFFF1C                  	PUSH	DWORD [-228+EBP]
   453 00000577 FF B5 FFFFFF18                  	PUSH	DWORD [-232+EBP]
   454 0000057D 68 [00000053]                   	PUSH	LC6
   455 00000582 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   456 00000585 53                              	PUSH	EBX
   457 00000586 E8 [00000000]                   	CALL	_sprintf
   458 0000058B 83 C4 10                        	ADD	ESP,16
   459 0000058E 8B 85 FFFFFF20                  	MOV	EAX,DWORD [-224+EBP]
   460 00000594 A9 00000001                     	TEST	EAX,1
   461 00000599 74 04                           	JE	L11
   462 0000059B C6 45 C5 4C                     	MOV	BYTE [-59+EBP],76
   463 0000059F                                 L11:
   464 0000059F A9 00000002                     	TEST	EAX,2
   465 000005A4 74 04                           	JE	L12
   466 000005A6 C6 45 C7 52                     	MOV	BYTE [-57+EBP],82
   467 000005AA                                 L12:
   468 000005AA 83 E0 04                        	AND	EAX,4
   469 000005AD 74 04                           	JE	L13
   470 000005AF C6 45 C6 43                     	MOV	BYTE [-58+EBP],67
   471 000005B3                                 L13:
   472 000005B3 6A 0F                           	PUSH	15
   473 000005B5 53                              	PUSH	EBX
   474 000005B6 6A 0E                           	PUSH	14
   475 000005B8 6A 07                           	PUSH	7
   476 000005BA 6A 10                           	PUSH	16
   477 000005BC 6A 20                           	PUSH	32
   478 000005BE FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   479 000005C4 E8 [00000000]                   	CALL	_putfonts_asc_sht
   480 000005C9 83 C4 1C                        	ADD	ESP,28
   481 000005CC 03 B5 FFFFFF1C                  	ADD	ESI,DWORD [-228+EBP]
   482 000005D2 03 BD FFFFFF18                  	ADD	EDI,DWORD [-232+EBP]
   483 000005D8 78 5D                           	JS	L34
   484 000005DA                                 L14:
   485 000005DA 85 F6                           	TEST	ESI,ESI
   486 000005DC 78 55                           	JS	L35
   487 000005DE                                 L15:
   488 000005DE 8B 85 FFFFFE08                  	MOV	EAX,DWORD [-504+EBP]
   489 000005E4 48                              	DEC	EAX
   490 000005E5 39 C7                           	CMP	EDI,EAX
   491 000005E7 7E 02                           	JLE	L16
   492 000005E9 89 C7                           	MOV	EDI,EAX
   493 000005EB                                 L16:
   494 000005EB 8B 85 FFFFFE04                  	MOV	EAX,DWORD [-508+EBP]
   495 000005F1 48                              	DEC	EAX
   496 000005F2 39 C6                           	CMP	ESI,EAX
   497 000005F4 7E 02                           	JLE	L17
   498 000005F6 89 C6                           	MOV	ESI,EAX
   499 000005F8                                 L17:
   500 000005F8 56                              	PUSH	ESI
   501 000005F9 57                              	PUSH	EDI
   502 000005FA 68 [00000061]                   	PUSH	LC7
   503 000005FF 53                              	PUSH	EBX
   504 00000600 E8 [00000000]                   	CALL	_sprintf
   505 00000605 6A 0A                           	PUSH	10
   506 00000607 53                              	PUSH	EBX
   507 00000608 6A 0E                           	PUSH	14
   508 0000060A 6A 07                           	PUSH	7
   509 0000060C 6A 00                           	PUSH	0
   510 0000060E 6A 00                           	PUSH	0
   511 00000610 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   512 00000616 E8 [00000000]                   	CALL	_putfonts_asc_sht
   513 0000061B 83 C4 2C                        	ADD	ESP,44
   514 0000061E 56                              	PUSH	ESI
   515 0000061F 57                              	PUSH	EDI
   516 00000620 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   517 00000626 E8 [00000000]                   	CALL	_sheet_slide
   518 0000062B 83 C4 0C                        	ADD	ESP,12
   519 0000062E E9 FFFFFD7A                     	JMP	L2
   520 00000633                                 L35:
   521 00000633 31 F6                           	XOR	ESI,ESI
   522 00000635 EB A7                           	JMP	L15
   523 00000637                                 L34:
   524 00000637 31 FF                           	XOR	EDI,EDI
   525 00000639 EB 9F                           	JMP	L14
   526 0000063B                                 L30:
   527 0000063B 68 [00000000]                   	PUSH	_keyfifo
   528 00000640 E8 [00000000]                   	CALL	_fifo8_get
   529 00000645 88 C3                           	MOV	BL,AL
   530 00000647 E8 [00000000]                   	CALL	_io_sti
   531 0000064C 0F B6 C3                        	MOVZX	EAX,BL
   532 0000064F 50                              	PUSH	EAX
   533 00000650 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   534 00000653 68 [0000006B]                   	PUSH	LC5
   535 00000658 53                              	PUSH	EBX
   536 00000659 E8 [00000000]                   	CALL	_sprintf
   537 0000065E 6A 02                           	PUSH	2
   538 00000660 53                              	PUSH	EBX
   539 00000661 6A 0E                           	PUSH	14
   540 00000663 6A 07                           	PUSH	7
   541 00000665 6A 10                           	PUSH	16
   542 00000667 6A 00                           	PUSH	0
   543 00000669 FF B5 FFFFFDF4                  	PUSH	DWORD [-524+EBP]
   544 0000066F E8 [00000000]                   	CALL	_putfonts_asc_sht
   545 00000674 E9 FFFFFD31                     	JMP	L27
   546 00000679                                 L29:
   547 00000679 E8 [00000000]                   	CALL	_io_sti
   548 0000067E E9 FFFFFD2A                     	JMP	L2
   549                                          [SECTION .data]
   550 00000070                                 _closebtn.0:
   551 00000070 4F 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"OOOOOOOOOOOOOOO@"
       0000007A 4F 4F 4F 4F 4F 40 
   552 00000080 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000008A 51 51 51 51 24 40 
   553 00000090 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000009A 51 51 51 51 24 40 
   554 000000A0 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       000000AA 40 40 51 51 24 40 
   555 000000B0 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000BA 40 51 51 51 24 40 
   556 000000C0 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000CA 51 51 51 51 24 40 
   557 000000D0 4F 51 51 51 51 51 51 40 40 51   	DB	"OQQQQQQ@@QQQQQ$@"
       000000DA 51 51 51 51 24 40 
   558 000000E0 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000EA 51 51 51 51 24 40 
   559 000000F0 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000FA 40 51 51 51 24 40 
   560 00000100 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       0000010A 40 40 51 51 24 40 
   561 00000110 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000011A 51 51 51 51 24 40 
   562 00000120 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000012A 51 51 51 51 24 40 
   563 00000130 4F 24 24 24 24 24 24 24 24 24   	DB	"O$$$$$$$$$$$$$$@"
       0000013A 24 24 24 24 24 40 
   564 00000140 40 40 40 40 40 40 40 40 40 40   	DB	"@@@@@@@@@@@@@@@@"
       0000014A 40 40 40 40 40 40 
   565                                          [SECTION .text]
   566 00000683                                 	GLOBAL	_make_window
   567 00000683                                 _make_window:
   568 00000683 55                              	PUSH	EBP
   569 00000684 89 E5                           	MOV	EBP,ESP
   570 00000686 57                              	PUSH	EDI
   571 00000687 56                              	PUSH	ESI
   572 00000688 53                              	PUSH	EBX
   573 00000689 83 EC 14                        	SUB	ESP,20
   574 0000068C 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   575 0000068F 6A 00                           	PUSH	0
   576 00000691 8D 43 FF                        	LEA	EAX,DWORD [-1+EBX]
   577 00000694 8D 7B FE                        	LEA	EDI,DWORD [-2+EBX]
   578 00000697 50                              	PUSH	EAX
   579 00000698 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   580 0000069B 6A 00                           	PUSH	0
   581 0000069D 6A 00                           	PUSH	0
   582 0000069F 6A 08                           	PUSH	8
   583 000006A1 53                              	PUSH	EBX
   584 000006A2 FF 75 08                        	PUSH	DWORD [8+EBP]
   585 000006A5 E8 [00000000]                   	CALL	_boxfill8
   586 000006AA 6A 01                           	PUSH	1
   587 000006AC 57                              	PUSH	EDI
   588 000006AD 6A 01                           	PUSH	1
   589 000006AF 6A 01                           	PUSH	1
   590 000006B1 6A 07                           	PUSH	7
   591 000006B3 53                              	PUSH	EBX
   592 000006B4 FF 75 08                        	PUSH	DWORD [8+EBP]
   593 000006B7 E8 [00000000]                   	CALL	_boxfill8
   594 000006BC 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   595 000006BF 83 C4 38                        	ADD	ESP,56
   596 000006C2 4A                              	DEC	EDX
   597 000006C3 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   598 000006C6 52                              	PUSH	EDX
   599 000006C7 6A 00                           	PUSH	0
   600 000006C9 6A 00                           	PUSH	0
   601 000006CB 6A 00                           	PUSH	0
   602 000006CD 6A 08                           	PUSH	8
   603 000006CF 53                              	PUSH	EBX
   604 000006D0 FF 75 08                        	PUSH	DWORD [8+EBP]
   605 000006D3 E8 [00000000]                   	CALL	_boxfill8
   606 000006D8 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   607 000006DB 83 EE 02                        	SUB	ESI,2
   608 000006DE 56                              	PUSH	ESI
   609 000006DF 6A 01                           	PUSH	1
   610 000006E1 6A 01                           	PUSH	1
   611 000006E3 6A 01                           	PUSH	1
   612 000006E5 6A 07                           	PUSH	7
   613 000006E7 53                              	PUSH	EBX
   614 000006E8 FF 75 08                        	PUSH	DWORD [8+EBP]
   615 000006EB E8 [00000000]                   	CALL	_boxfill8
   616 000006F0 83 C4 38                        	ADD	ESP,56
   617 000006F3 56                              	PUSH	ESI
   618 000006F4 57                              	PUSH	EDI
   619 000006F5 6A 01                           	PUSH	1
   620 000006F7 57                              	PUSH	EDI
   621 000006F8 6A 0F                           	PUSH	15
   622 000006FA 53                              	PUSH	EBX
   623 000006FB FF 75 08                        	PUSH	DWORD [8+EBP]
   624 000006FE E8 [00000000]                   	CALL	_boxfill8
   625 00000703 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   626 00000706 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   627 00000709 6A 00                           	PUSH	0
   628 0000070B FF 75 EC                        	PUSH	DWORD [-20+EBP]
   629 0000070E 6A 00                           	PUSH	0
   630 00000710 53                              	PUSH	EBX
   631 00000711 FF 75 08                        	PUSH	DWORD [8+EBP]
   632 00000714 E8 [00000000]                   	CALL	_boxfill8
   633 00000719 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   634 0000071C 83 C4 38                        	ADD	ESP,56
   635 0000071F 83 E8 03                        	SUB	EAX,3
   636 00000722 50                              	PUSH	EAX
   637 00000723 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   638 00000726 50                              	PUSH	EAX
   639 00000727 6A 02                           	PUSH	2
   640 00000729 6A 02                           	PUSH	2
   641 0000072B 6A 08                           	PUSH	8
   642 0000072D 53                              	PUSH	EBX
   643 0000072E FF 75 08                        	PUSH	DWORD [8+EBP]
   644 00000731 E8 [00000000]                   	CALL	_boxfill8
   645 00000736 8D 43 FC                        	LEA	EAX,DWORD [-4+EBX]
   646 00000739 6A 14                           	PUSH	20
   647 0000073B 50                              	PUSH	EAX
   648 0000073C 6A 03                           	PUSH	3
   649 0000073E 6A 03                           	PUSH	3
   650 00000740 6A 0C                           	PUSH	12
   651 00000742 53                              	PUSH	EBX
   652 00000743 FF 75 08                        	PUSH	DWORD [8+EBP]
   653 00000746 E8 [00000000]                   	CALL	_boxfill8
   654 0000074B 83 C4 38                        	ADD	ESP,56
   655 0000074E 56                              	PUSH	ESI
   656 0000074F 57                              	PUSH	EDI
   657 00000750 56                              	PUSH	ESI
   658 00000751 6A 01                           	PUSH	1
   659 00000753 6A 0F                           	PUSH	15
   660 00000755 53                              	PUSH	EBX
   661 00000756 FF 75 08                        	PUSH	DWORD [8+EBP]
   662 00000759 E8 [00000000]                   	CALL	_boxfill8
   663 0000075E FF 75 E8                        	PUSH	DWORD [-24+EBP]
   664 00000761 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   665 00000764 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   666 00000767 6A 00                           	PUSH	0
   667 00000769 6A 00                           	PUSH	0
   668 0000076B 6B F3 05                        	IMUL	ESI,EBX,5
   669 0000076E 53                              	PUSH	EBX
   670 0000076F FF 75 08                        	PUSH	DWORD [8+EBP]
   671 00000772 E8 [00000000]                   	CALL	_boxfill8
   672 00000777 83 C4 38                        	ADD	ESP,56
   673 0000077A FF 75 14                        	PUSH	DWORD [20+EBP]
   674 0000077D 6A 04                           	PUSH	4
   675 0000077F 6A 18                           	PUSH	24
   676 00000781 6A 07                           	PUSH	7
   677 00000783 53                              	PUSH	EBX
   678 00000784 FF 75 08                        	PUSH	DWORD [8+EBP]
   679 00000787 E8 [00000000]                   	CALL	_putfonts8_asc
   680 0000078C 83 C4 18                        	ADD	ESP,24
   681 0000078F C7 45 F0 00000000               	MOV	DWORD [-16+EBP],0
   682 00000796 C7 45 E0 00000000               	MOV	DWORD [-32+EBP],0
   683 0000079D                                 L52:
   684 0000079D 8D 04 1E                        	LEA	EAX,DWORD [ESI+EBX*1]
   685 000007A0 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   686 000007A3 31 FF                           	XOR	EDI,EDI
   687 000007A5 8D 4C 02 EB                     	LEA	ECX,DWORD [-21+EDX+EAX*1]
   688 000007A9                                 L51:
   689 000007A9 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   690 000007AC 8A 94 07 [00000070]             	MOV	DL,BYTE [_closebtn.0+EDI+EAX*1]
   691 000007B3 80 FA 40                        	CMP	DL,64
   692 000007B6 74 33                           	JE	L57
   693 000007B8 80 FA 24                        	CMP	DL,36
   694 000007BB 74 2A                           	JE	L58
   695 000007BD 80 FA 51                        	CMP	DL,81
   696 000007C0 B2 08                           	MOV	DL,8
   697 000007C2 0F 95 C0                        	SETNE	AL
   698 000007C5 28 C2                           	SUB	DL,AL
   699 000007C7                                 L46:
   700 000007C7 47                              	INC	EDI
   701 000007C8 88 11                           	MOV	BYTE [ECX],DL
   702 000007CA 41                              	INC	ECX
   703 000007CB 83 FF 0F                        	CMP	EDI,15
   704 000007CE 7E D9                           	JLE	L51
   705 000007D0 FF 45 F0                        	INC	DWORD [-16+EBP]
   706 000007D3 01 DE                           	ADD	ESI,EBX
   707 000007D5 83 45 E0 10                     	ADD	DWORD [-32+EBP],16
   708 000007D9 83 7D F0 0D                     	CMP	DWORD [-16+EBP],13
   709 000007DD 7E BE                           	JLE	L52
   710 000007DF 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   711 000007E2 5B                              	POP	EBX
   712 000007E3 5E                              	POP	ESI
   713 000007E4 5F                              	POP	EDI
   714 000007E5 5D                              	POP	EBP
   715 000007E6 C3                              	RET
   716 000007E7                                 L58:
   717 000007E7 B2 0F                           	MOV	DL,15
   718 000007E9 EB DC                           	JMP	L46
   719 000007EB                                 L57:
   720 000007EB 31 D2                           	XOR	EDX,EDX
   721 000007ED EB D8                           	JMP	L46
