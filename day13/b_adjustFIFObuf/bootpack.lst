     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_init_pit
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_timerfifo
    15 00000000                                 	EXTERN	_timer_alloc
    16 00000000                                 	EXTERN	_timer_init
    17 00000000                                 	EXTERN	_timer_settime
    18 00000000                                 	EXTERN	_init_keyboard
    19 00000000                                 	EXTERN	_enable_mouse
    20 00000000                                 	EXTERN	_memtest
    21 00000000                                 	EXTERN	_memman_init
    22 00000000                                 	EXTERN	_memman_free
    23 00000000                                 	EXTERN	_init_palette
    24 00000000                                 	EXTERN	_shtctl_init
    25 00000000                                 	EXTERN	_sheet_alloc
    26 00000000                                 	EXTERN	_memman_alloc_4k
    27 00000000                                 	EXTERN	_sheet_setbuf
    28 00000000                                 	EXTERN	_init_screen
    29 00000000                                 	EXTERN	_init_mouse_cursor8
    30 00000000                                 	EXTERN	_putfonts8_asc
    31 00000000                                 	EXTERN	_sheet_slide
    32 00000000                                 	EXTERN	_sheet_updown
    33 00000000                                 	EXTERN	_sprintf
    34 00000000                                 	EXTERN	_memman_total
    35 00000000                                 	EXTERN	_sheet_refresh
    36 00000000                                 	EXTERN	_timerctl
    37 00000000                                 	EXTERN	_putfonts_asc_sht
    38 00000000                                 	EXTERN	_io_cli
    39 00000000                                 	EXTERN	_fifo8_status
    40 00000000                                 	EXTERN	_fifo8_get
    41 00000000                                 	EXTERN	_boxfill8
    42 00000000                                 	EXTERN	_mouse_decode
    43 00000000                                 [FILE "bootpack.c"]
    44                                          [SECTION .data]
    45 00000000                                 LC0:
    46 00000000 77 69 6E 64 6F 77 00            	DB	"window",0x00
    47 00000007                                 LC1:
    48 00000007 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       00000011 00 
    49 00000012                                 LC2:
    50 00000012 54 68 69 73 20 4F 53 21 00      	DB	"This OS!",0x00
    51 0000001B                                 LC3:
    52 0000001B 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       00000025 00 
    53 00000026                                 LC4:
    54 00000026 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB free : %dKB",0x00
       00000030 42 20 66 72 65 65 20 3A 20 25 
       0000003A 64 4B 42 00 
    55 0000003E                                 LC5:
    56 0000003E 25 30 31 30 64 00               	DB	"%010d",0x00
    57 00000044                                 LC10:
    58 00000044 33 5B 73 65 63 5D 00            	DB	"3[sec]",0x00
    59 0000004B                                 LC9:
    60 0000004B 31 30 5B 73 65 63 5D 00         	DB	"10[sec]",0x00
    61 00000053                                 LC7:
    62 00000053 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000005D 34 64 5D 00 
    63 00000061                                 LC8:
    64 00000061 28 25 33 64 2C 25 33 64 29 00   	DB	"(%3d,%3d)",0x00
    65 0000006B                                 LC6:
    66 0000006B 25 30 32 78 00                  	DB	"%02x",0x00
    67                                          [SECTION .text]
    68 00000000                                 	GLOBAL	_HariMain
    69 00000000                                 _HariMain:
    70 00000000 55                              	PUSH	EBP
    71 00000001 89 E5                           	MOV	EBP,ESP
    72 00000003 57                              	PUSH	EDI
    73 00000004 56                              	PUSH	ESI
    74 00000005 53                              	PUSH	EBX
    75 00000006 81 EC 0000022C                  	SUB	ESP,556
    76 0000000C 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    77 00000013 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    78 0000001A 89 95 FFFFFDEC                  	MOV	DWORD [-532+EBP],EDX
    79 00000020 89 85 FFFFFDF0                  	MOV	DWORD [-528+EBP],EAX
    80 00000026 8B 35 00000FF8                  	MOV	ESI,DWORD [4088]
    81 0000002C E8 [00000000]                   	CALL	_init_gdtidt
    82 00000031 E8 [00000000]                   	CALL	_init_pic
    83 00000036 E8 [00000000]                   	CALL	_io_sti
    84 0000003B 8D 45 A4                        	LEA	EAX,DWORD [-92+EBP]
    85 0000003E 50                              	PUSH	EAX
    86 0000003F 6A 20                           	PUSH	32
    87 00000041 68 [00000000]                   	PUSH	_keyfifo
    88 00000046 E8 [00000000]                   	CALL	_fifo8_init
    89 0000004B 8D 85 FFFFFF24                  	LEA	EAX,DWORD [-220+EBP]
    90 00000051 50                              	PUSH	EAX
    91 00000052 68 00000080                     	PUSH	128
    92 00000057 68 [00000000]                   	PUSH	_mousefifo
    93 0000005C E8 [00000000]                   	CALL	_fifo8_init
    94 00000061 E8 [00000000]                   	CALL	_init_pit
    95 00000066 68 000000F8                     	PUSH	248
    96 0000006B 6A 21                           	PUSH	33
    97 0000006D E8 [00000000]                   	CALL	_io_out8
    98 00000072 83 C4 20                        	ADD	ESP,32
    99 00000075 68 000000EF                     	PUSH	239
   100 0000007A 68 000000A1                     	PUSH	161
   101 0000007F E8 [00000000]                   	CALL	_io_out8
   102 00000084 8D 85 FFFFFF04                  	LEA	EAX,DWORD [-252+EBP]
   103 0000008A 50                              	PUSH	EAX
   104 0000008B 6A 18                           	PUSH	24
   105 0000008D 68 [00000000]                   	PUSH	_timerfifo
   106 00000092 E8 [00000000]                   	CALL	_fifo8_init
   107 00000097 E8 [00000000]                   	CALL	_timer_alloc
   108 0000009C 6A 0A                           	PUSH	10
   109 0000009E 68 [00000000]                   	PUSH	_timerfifo
   110 000000A3 89 C3                           	MOV	EBX,EAX
   111 000000A5 50                              	PUSH	EAX
   112 000000A6 E8 [00000000]                   	CALL	_timer_init
   113 000000AB 83 C4 20                        	ADD	ESP,32
   114 000000AE 68 000003E8                     	PUSH	1000
   115 000000B3 53                              	PUSH	EBX
   116 000000B4 E8 [00000000]                   	CALL	_timer_settime
   117 000000B9 E8 [00000000]                   	CALL	_timer_alloc
   118 000000BE 6A 03                           	PUSH	3
   119 000000C0 68 [00000000]                   	PUSH	_timerfifo
   120 000000C5 89 C3                           	MOV	EBX,EAX
   121 000000C7 50                              	PUSH	EAX
   122 000000C8 E8 [00000000]                   	CALL	_timer_init
   123 000000CD 68 0000012C                     	PUSH	300
   124 000000D2 53                              	PUSH	EBX
   125 000000D3 E8 [00000000]                   	CALL	_timer_settime
   126 000000D8 E8 [00000000]                   	CALL	_timer_alloc
   127 000000DD 6A 01                           	PUSH	1
   128 000000DF 68 [00000000]                   	PUSH	_timerfifo
   129 000000E4 50                              	PUSH	EAX
   130 000000E5 89 85 FFFFFDE8                  	MOV	DWORD [-536+EBP],EAX
   131 000000EB E8 [00000000]                   	CALL	_timer_init
   132 000000F0 83 C4 28                        	ADD	ESP,40
   133 000000F3 6A 32                           	PUSH	50
   134 000000F5 FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   135 000000FB E8 [00000000]                   	CALL	_timer_settime
   136 00000100 E8 [00000000]                   	CALL	_init_keyboard
   137 00000105 8D 85 FFFFFEF4                  	LEA	EAX,DWORD [-268+EBP]
   138 0000010B 50                              	PUSH	EAX
   139 0000010C E8 [00000000]                   	CALL	_enable_mouse
   140 00000111 68 BFFFFFFF                     	PUSH	-1073741825
   141 00000116 68 00400000                     	PUSH	4194304
   142 0000011B E8 [00000000]                   	CALL	_memtest
   143 00000120 68 003C0000                     	PUSH	3932160
   144 00000125 89 85 FFFFFDE0                  	MOV	DWORD [-544+EBP],EAX
   145 0000012B E8 [00000000]                   	CALL	_memman_init
   146 00000130 68 0009E000                     	PUSH	647168
   147 00000135 68 00001000                     	PUSH	4096
   148 0000013A 68 003C0000                     	PUSH	3932160
   149 0000013F E8 [00000000]                   	CALL	_memman_free
   150 00000144 8B 85 FFFFFDE0                  	MOV	EAX,DWORD [-544+EBP]
   151 0000014A 83 C4 24                        	ADD	ESP,36
   152 0000014D 2D 00400000                     	SUB	EAX,4194304
   153 00000152 50                              	PUSH	EAX
   154 00000153 68 00400000                     	PUSH	4194304
   155 00000158 68 003C0000                     	PUSH	3932160
   156 0000015D E8 [00000000]                   	CALL	_memman_free
   157 00000162 E8 [00000000]                   	CALL	_init_palette
   158 00000167 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   159 0000016E 50                              	PUSH	EAX
   160 0000016F 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   161 00000176 50                              	PUSH	EAX
   162 00000177 56                              	PUSH	ESI
   163 00000178 8D B5 FFFFFDF4                  	LEA	ESI,DWORD [-524+EBP]
   164 0000017E 68 003C0000                     	PUSH	3932160
   165 00000183 E8 [00000000]                   	CALL	_shtctl_init
   166 00000188 89 C3                           	MOV	EBX,EAX
   167 0000018A 50                              	PUSH	EAX
   168 0000018B E8 [00000000]                   	CALL	_sheet_alloc
   169 00000190 83 C4 20                        	ADD	ESP,32
   170 00000193 53                              	PUSH	EBX
   171 00000194 89 85 FFFFFDDC                  	MOV	DWORD [-548+EBP],EAX
   172 0000019A E8 [00000000]                   	CALL	_sheet_alloc
   173 0000019F 53                              	PUSH	EBX
   174 000001A0 89 85 FFFFFDD8                  	MOV	DWORD [-552+EBP],EAX
   175 000001A6 E8 [00000000]                   	CALL	_sheet_alloc
   176 000001AB 0F BF 1D 00000FF6               	MOVSX	EBX,WORD [4086]
   177 000001B2 89 85 FFFFFDD4                  	MOV	DWORD [-556+EBP],EAX
   178 000001B8 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   179 000001BF 0F AF C3                        	IMUL	EAX,EBX
   180 000001C2 50                              	PUSH	EAX
   181 000001C3 68 003C0000                     	PUSH	3932160
   182 000001C8 E8 [00000000]                   	CALL	_memman_alloc_4k
   183 000001CD 68 00002A80                     	PUSH	10880
   184 000001D2 68 003C0000                     	PUSH	3932160
   185 000001D7 89 85 FFFFFDD0                  	MOV	DWORD [-560+EBP],EAX
   186 000001DD E8 [00000000]                   	CALL	_memman_alloc_4k
   187 000001E2 6A FF                           	PUSH	-1
   188 000001E4 89 C3                           	MOV	EBX,EAX
   189 000001E6 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   190 000001ED 50                              	PUSH	EAX
   191 000001EE 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   192 000001F5 50                              	PUSH	EAX
   193 000001F6 FF B5 FFFFFDD0                  	PUSH	DWORD [-560+EBP]
   194 000001FC FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   195 00000202 E8 [00000000]                   	CALL	_sheet_setbuf
   196 00000207 83 C4 2C                        	ADD	ESP,44
   197 0000020A 6A 63                           	PUSH	99
   198 0000020C 6A 10                           	PUSH	16
   199 0000020E 6A 10                           	PUSH	16
   200 00000210 56                              	PUSH	ESI
   201 00000211 FF B5 FFFFFDD8                  	PUSH	DWORD [-552+EBP]
   202 00000217 E8 [00000000]                   	CALL	_sheet_setbuf
   203 0000021C 6A FF                           	PUSH	-1
   204 0000021E 6A 44                           	PUSH	68
   205 00000220 68 000000A0                     	PUSH	160
   206 00000225 53                              	PUSH	EBX
   207 00000226 FF B5 FFFFFDD4                  	PUSH	DWORD [-556+EBP]
   208 0000022C E8 [00000000]                   	CALL	_sheet_setbuf
   209 00000231 83 C4 28                        	ADD	ESP,40
   210 00000234 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   211 0000023B 50                              	PUSH	EAX
   212 0000023C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   213 00000243 50                              	PUSH	EAX
   214 00000244 FF B5 FFFFFDD0                  	PUSH	DWORD [-560+EBP]
   215 0000024A E8 [00000000]                   	CALL	_init_screen
   216 0000024F 6A 63                           	PUSH	99
   217 00000251 56                              	PUSH	ESI
   218 00000252 E8 [00000000]                   	CALL	_init_mouse_cursor8
   219 00000257 68 [00000000]                   	PUSH	LC0
   220 0000025C 6A 44                           	PUSH	68
   221 0000025E 68 000000A0                     	PUSH	160
   222 00000263 53                              	PUSH	EBX
   223 00000264 E8 00000400                     	CALL	_make_window
   224 00000269 83 C4 24                        	ADD	ESP,36
   225 0000026C 68 [00000007]                   	PUSH	LC1
   226 00000271 6A 1C                           	PUSH	28
   227 00000273 6A 18                           	PUSH	24
   228 00000275 6A 00                           	PUSH	0
   229 00000277 68 000000A0                     	PUSH	160
   230 0000027C 53                              	PUSH	EBX
   231 0000027D E8 [00000000]                   	CALL	_putfonts8_asc
   232 00000282 68 [00000012]                   	PUSH	LC2
   233 00000287 6A 2C                           	PUSH	44
   234 00000289 6A 18                           	PUSH	24
   235 0000028B 6A 00                           	PUSH	0
   236 0000028D 68 000000A0                     	PUSH	160
   237 00000292 53                              	PUSH	EBX
   238 00000293 BB 00000002                     	MOV	EBX,2
   239 00000298 E8 [00000000]                   	CALL	_putfonts8_asc
   240 0000029D 83 C4 30                        	ADD	ESP,48
   241 000002A0 6A 00                           	PUSH	0
   242 000002A2 6A 00                           	PUSH	0
   243 000002A4 FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   244 000002AA E8 [00000000]                   	CALL	_sheet_slide
   245 000002AF 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   246 000002B6 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   247 000002B9 89 C8                           	MOV	EAX,ECX
   248 000002BB 99                              	CDQ
   249 000002BC F7 FB                           	IDIV	EBX
   250 000002BE 89 85 FFFFFDE4                  	MOV	DWORD [-540+EBP],EAX
   251 000002C4 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   252 000002CB 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   253 000002CE 89 C8                           	MOV	EAX,ECX
   254 000002D0 99                              	CDQ
   255 000002D1 F7 FB                           	IDIV	EBX
   256 000002D3 50                              	PUSH	EAX
   257 000002D4 89 C7                           	MOV	EDI,EAX
   258 000002D6 FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
   259 000002DC FF B5 FFFFFDD8                  	PUSH	DWORD [-552+EBP]
   260 000002E2 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   261 000002E5 E8 [00000000]                   	CALL	_sheet_slide
   262 000002EA 6A 48                           	PUSH	72
   263 000002EC 6A 50                           	PUSH	80
   264 000002EE FF B5 FFFFFDD4                  	PUSH	DWORD [-556+EBP]
   265 000002F4 E8 [00000000]                   	CALL	_sheet_slide
   266 000002F9 83 C4 24                        	ADD	ESP,36
   267 000002FC 6A 00                           	PUSH	0
   268 000002FE FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   269 00000304 E8 [00000000]                   	CALL	_sheet_updown
   270 00000309 6A 01                           	PUSH	1
   271 0000030B FF B5 FFFFFDD4                  	PUSH	DWORD [-556+EBP]
   272 00000311 E8 [00000000]                   	CALL	_sheet_updown
   273 00000316 6A 02                           	PUSH	2
   274 00000318 FF B5 FFFFFDD8                  	PUSH	DWORD [-552+EBP]
   275 0000031E E8 [00000000]                   	CALL	_sheet_updown
   276 00000323 57                              	PUSH	EDI
   277 00000324 FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
   278 0000032A 68 [0000001B]                   	PUSH	LC3
   279 0000032F 53                              	PUSH	EBX
   280 00000330 E8 [00000000]                   	CALL	_sprintf
   281 00000335 83 C4 28                        	ADD	ESP,40
   282 00000338 53                              	PUSH	EBX
   283 00000339 6A 00                           	PUSH	0
   284 0000033B 6A 00                           	PUSH	0
   285 0000033D 6A 00                           	PUSH	0
   286 0000033F 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   287 00000346 50                              	PUSH	EAX
   288 00000347 FF B5 FFFFFDD0                  	PUSH	DWORD [-560+EBP]
   289 0000034D E8 [00000000]                   	CALL	_putfonts8_asc
   290 00000352 68 003C0000                     	PUSH	3932160
   291 00000357 E8 [00000000]                   	CALL	_memman_total
   292 0000035C C1 AD FFFFFDE0 14               	SHR	DWORD [-544+EBP],20
   293 00000363 C1 E8 0A                        	SHR	EAX,10
   294 00000366 89 04 24                        	MOV	DWORD [ESP],EAX
   295 00000369 FF B5 FFFFFDE0                  	PUSH	DWORD [-544+EBP]
   296 0000036F 68 [00000026]                   	PUSH	LC4
   297 00000374 53                              	PUSH	EBX
   298 00000375 E8 [00000000]                   	CALL	_sprintf
   299 0000037A 83 C4 28                        	ADD	ESP,40
   300 0000037D 53                              	PUSH	EBX
   301 0000037E 6A 20                           	PUSH	32
   302 00000380 6A 00                           	PUSH	0
   303 00000382 6A 07                           	PUSH	7
   304 00000384 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   305 0000038B 50                              	PUSH	EAX
   306 0000038C FF B5 FFFFFDD0                  	PUSH	DWORD [-560+EBP]
   307 00000392 E8 [00000000]                   	CALL	_putfonts8_asc
   308 00000397 6A 30                           	PUSH	48
   309 00000399 FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   310 0000039F 6A 00                           	PUSH	0
   311 000003A1 6A 00                           	PUSH	0
   312 000003A3 FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   313 000003A9 E8 [00000000]                   	CALL	_sheet_refresh
   314 000003AE                                 L27:
   315 000003AE 83 C4 2C                        	ADD	ESP,44
   316 000003B1                                 L2:
   317 000003B1 FF 35 [00000000]                	PUSH	DWORD [_timerctl]
   318 000003B7 68 [0000003E]                   	PUSH	LC5
   319 000003BC 8D 75 C4                        	LEA	ESI,DWORD [-60+EBP]
   320 000003BF 56                              	PUSH	ESI
   321 000003C0 E8 [00000000]                   	CALL	_sprintf
   322 000003C5 6A 0A                           	PUSH	10
   323 000003C7 56                              	PUSH	ESI
   324 000003C8 6A 00                           	PUSH	0
   325 000003CA 6A 08                           	PUSH	8
   326 000003CC 6A 1C                           	PUSH	28
   327 000003CE 6A 28                           	PUSH	40
   328 000003D0 FF B5 FFFFFDD4                  	PUSH	DWORD [-556+EBP]
   329 000003D6 E8 [00000000]                   	CALL	_putfonts_asc_sht
   330 000003DB 83 C4 28                        	ADD	ESP,40
   331 000003DE E8 [00000000]                   	CALL	_io_cli
   332 000003E3 68 [00000000]                   	PUSH	_keyfifo
   333 000003E8 E8 [00000000]                   	CALL	_fifo8_status
   334 000003ED 68 [00000000]                   	PUSH	_mousefifo
   335 000003F2 89 C3                           	MOV	EBX,EAX
   336 000003F4 E8 [00000000]                   	CALL	_fifo8_status
   337 000003F9 68 [00000000]                   	PUSH	_timerfifo
   338 000003FE 01 C3                           	ADD	EBX,EAX
   339 00000400 E8 [00000000]                   	CALL	_fifo8_status
   340 00000405 83 C4 0C                        	ADD	ESP,12
   341 00000408 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   342 0000040B 85 C0                           	TEST	EAX,EAX
   343 0000040D 0F 84 0000024C                  	JE	L30
   344 00000413 68 [00000000]                   	PUSH	_keyfifo
   345 00000418 E8 [00000000]                   	CALL	_fifo8_status
   346 0000041D 5B                              	POP	EBX
   347 0000041E 85 C0                           	TEST	EAX,EAX
   348 00000420 0F 85 000001FE                  	JNE	L31
   349 00000426 68 [00000000]                   	PUSH	_mousefifo
   350 0000042B E8 [00000000]                   	CALL	_fifo8_status
   351 00000430 59                              	POP	ECX
   352 00000431 85 C0                           	TEST	EAX,EAX
   353 00000433 0F 85 000000D8                  	JNE	L32
   354 00000439 68 [00000000]                   	PUSH	_timerfifo
   355 0000043E E8 [00000000]                   	CALL	_fifo8_status
   356 00000443 5A                              	POP	EDX
   357 00000444 85 C0                           	TEST	EAX,EAX
   358 00000446 0F 84 FFFFFF65                  	JE	L2
   359 0000044C 68 [00000000]                   	PUSH	_timerfifo
   360 00000451 E8 [00000000]                   	CALL	_fifo8_get
   361 00000456 88 C3                           	MOV	BL,AL
   362 00000458 E8 [00000000]                   	CALL	_io_sti
   363 0000045D 58                              	POP	EAX
   364 0000045E 80 FB 0A                        	CMP	BL,10
   365 00000461 0F 84 0000009B                  	JE	L33
   366 00000467 80 FB 03                        	CMP	BL,3
   367 0000046A 74 7A                           	JE	L34
   368 0000046C 84 DB                           	TEST	BL,BL
   369 0000046E 74 58                           	JE	L24
   370 00000470 6A 00                           	PUSH	0
   371 00000472 68 [00000000]                   	PUSH	_timerfifo
   372 00000477 FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   373 0000047D E8 [00000000]                   	CALL	_timer_init
   374 00000482 6A 6F                           	PUSH	111
   375 00000484 6A 0F                           	PUSH	15
   376 00000486 6A 60                           	PUSH	96
   377 00000488 6A 08                           	PUSH	8
   378 0000048A 6A 07                           	PUSH	7
   379 0000048C                                 L28:
   380 0000048C FF B5 FFFFFDF0                  	PUSH	DWORD [-528+EBP]
   381 00000492 FF B5 FFFFFDD0                  	PUSH	DWORD [-560+EBP]
   382 00000498 E8 [00000000]                   	CALL	_boxfill8
   383 0000049D 83 C4 28                        	ADD	ESP,40
   384 000004A0 6A 32                           	PUSH	50
   385 000004A2 FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   386 000004A8 E8 [00000000]                   	CALL	_timer_settime
   387 000004AD 6A 70                           	PUSH	112
   388 000004AF 6A 10                           	PUSH	16
   389 000004B1 6A 60                           	PUSH	96
   390 000004B3 6A 08                           	PUSH	8
   391 000004B5 FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   392 000004BB E8 [00000000]                   	CALL	_sheet_refresh
   393 000004C0                                 L26:
   394 000004C0 83 C4 1C                        	ADD	ESP,28
   395 000004C3 E9 FFFFFEE9                     	JMP	L2
   396 000004C8                                 L24:
   397 000004C8 6A 01                           	PUSH	1
   398 000004CA 68 [00000000]                   	PUSH	_timerfifo
   399 000004CF FF B5 FFFFFDE8                  	PUSH	DWORD [-536+EBP]
   400 000004D5 E8 [00000000]                   	CALL	_timer_init
   401 000004DA 6A 6F                           	PUSH	111
   402 000004DC 6A 0F                           	PUSH	15
   403 000004DE 6A 60                           	PUSH	96
   404 000004E0 6A 08                           	PUSH	8
   405 000004E2 6A 0E                           	PUSH	14
   406 000004E4 EB A6                           	JMP	L28
   407 000004E6                                 L34:
   408 000004E6 6A 06                           	PUSH	6
   409 000004E8 68 [00000044]                   	PUSH	LC10
   410 000004ED 6A 0E                           	PUSH	14
   411 000004EF 6A 07                           	PUSH	7
   412 000004F1 6A 50                           	PUSH	80
   413 000004F3                                 L29:
   414 000004F3 6A 00                           	PUSH	0
   415 000004F5 FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   416 000004FB E8 [00000000]                   	CALL	_putfonts_asc_sht
   417 00000500 EB BE                           	JMP	L26
   418 00000502                                 L33:
   419 00000502 6A 07                           	PUSH	7
   420 00000504 68 [0000004B]                   	PUSH	LC9
   421 00000509 6A 0E                           	PUSH	14
   422 0000050B 6A 07                           	PUSH	7
   423 0000050D 6A 40                           	PUSH	64
   424 0000050F EB E2                           	JMP	L29
   425 00000511                                 L32:
   426 00000511 68 [00000000]                   	PUSH	_mousefifo
   427 00000516 E8 [00000000]                   	CALL	_fifo8_get
   428 0000051B 88 C3                           	MOV	BL,AL
   429 0000051D E8 [00000000]                   	CALL	_io_sti
   430 00000522 0F B6 C3                        	MOVZX	EAX,BL
   431 00000525 50                              	PUSH	EAX
   432 00000526 8D 85 FFFFFEF4                  	LEA	EAX,DWORD [-268+EBP]
   433 0000052C 50                              	PUSH	EAX
   434 0000052D E8 [00000000]                   	CALL	_mouse_decode
   435 00000532 83 C4 0C                        	ADD	ESP,12
   436 00000535 85 C0                           	TEST	EAX,EAX
   437 00000537 0F 84 FFFFFE74                  	JE	L2
   438 0000053D FF B5 FFFFFEFC                  	PUSH	DWORD [-260+EBP]
   439 00000543 FF B5 FFFFFEF8                  	PUSH	DWORD [-264+EBP]
   440 00000549 68 [00000053]                   	PUSH	LC7
   441 0000054E 56                              	PUSH	ESI
   442 0000054F E8 [00000000]                   	CALL	_sprintf
   443 00000554 83 C4 10                        	ADD	ESP,16
   444 00000557 8B 85 FFFFFF00                  	MOV	EAX,DWORD [-256+EBP]
   445 0000055D A9 00000001                     	TEST	EAX,1
   446 00000562 74 04                           	JE	L11
   447 00000564 C6 45 C5 4C                     	MOV	BYTE [-59+EBP],76
   448 00000568                                 L11:
   449 00000568 A9 00000002                     	TEST	EAX,2
   450 0000056D 74 04                           	JE	L12
   451 0000056F C6 45 C7 52                     	MOV	BYTE [-57+EBP],82
   452 00000573                                 L12:
   453 00000573 83 E0 04                        	AND	EAX,4
   454 00000576 74 04                           	JE	L13
   455 00000578 C6 45 C6 43                     	MOV	BYTE [-58+EBP],67
   456 0000057C                                 L13:
   457 0000057C 6A 0F                           	PUSH	15
   458 0000057E 56                              	PUSH	ESI
   459 0000057F 6A 0E                           	PUSH	14
   460 00000581 6A 07                           	PUSH	7
   461 00000583 6A 10                           	PUSH	16
   462 00000585 6A 20                           	PUSH	32
   463 00000587 FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   464 0000058D E8 [00000000]                   	CALL	_putfonts_asc_sht
   465 00000592 8B 9D FFFFFEF8                  	MOV	EBX,DWORD [-264+EBP]
   466 00000598 03 BD FFFFFEFC                  	ADD	EDI,DWORD [-260+EBP]
   467 0000059E 83 C4 1C                        	ADD	ESP,28
   468 000005A1 01 9D FFFFFDE4                  	ADD	DWORD [-540+EBP],EBX
   469 000005A7 78 6F                           	JS	L35
   470 000005A9                                 L14:
   471 000005A9 85 FF                           	TEST	EDI,EDI
   472 000005AB 78 67                           	JS	L36
   473 000005AD                                 L15:
   474 000005AD 8B 85 FFFFFDF0                  	MOV	EAX,DWORD [-528+EBP]
   475 000005B3 48                              	DEC	EAX
   476 000005B4 39 85 FFFFFDE4                  	CMP	DWORD [-540+EBP],EAX
   477 000005BA 7E 06                           	JLE	L16
   478 000005BC 89 85 FFFFFDE4                  	MOV	DWORD [-540+EBP],EAX
   479 000005C2                                 L16:
   480 000005C2 8B 85 FFFFFDEC                  	MOV	EAX,DWORD [-532+EBP]
   481 000005C8 48                              	DEC	EAX
   482 000005C9 39 C7                           	CMP	EDI,EAX
   483 000005CB 7E 02                           	JLE	L17
   484 000005CD 89 C7                           	MOV	EDI,EAX
   485 000005CF                                 L17:
   486 000005CF 57                              	PUSH	EDI
   487 000005D0 FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
   488 000005D6 68 [00000061]                   	PUSH	LC8
   489 000005DB 56                              	PUSH	ESI
   490 000005DC E8 [00000000]                   	CALL	_sprintf
   491 000005E1 6A 0A                           	PUSH	10
   492 000005E3 56                              	PUSH	ESI
   493 000005E4 6A 0E                           	PUSH	14
   494 000005E6 6A 07                           	PUSH	7
   495 000005E8 6A 00                           	PUSH	0
   496 000005EA 6A 00                           	PUSH	0
   497 000005EC FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   498 000005F2 E8 [00000000]                   	CALL	_putfonts_asc_sht
   499 000005F7 83 C4 2C                        	ADD	ESP,44
   500 000005FA 57                              	PUSH	EDI
   501 000005FB FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
   502 00000601 FF B5 FFFFFDD8                  	PUSH	DWORD [-552+EBP]
   503 00000607 E8 [00000000]                   	CALL	_sheet_slide
   504 0000060C 83 C4 0C                        	ADD	ESP,12
   505 0000060F E9 FFFFFD9D                     	JMP	L2
   506 00000614                                 L36:
   507 00000614 31 FF                           	XOR	EDI,EDI
   508 00000616 EB 95                           	JMP	L15
   509 00000618                                 L35:
   510 00000618 C7 85 FFFFFDE4 00000000         	MOV	DWORD [-540+EBP],0
   511 00000622 EB 85                           	JMP	L14
   512 00000624                                 L31:
   513 00000624 68 [00000000]                   	PUSH	_keyfifo
   514 00000629 E8 [00000000]                   	CALL	_fifo8_get
   515 0000062E 88 C3                           	MOV	BL,AL
   516 00000630 E8 [00000000]                   	CALL	_io_sti
   517 00000635 0F B6 C3                        	MOVZX	EAX,BL
   518 00000638 50                              	PUSH	EAX
   519 00000639 68 [0000006B]                   	PUSH	LC6
   520 0000063E 56                              	PUSH	ESI
   521 0000063F E8 [00000000]                   	CALL	_sprintf
   522 00000644 6A 02                           	PUSH	2
   523 00000646 56                              	PUSH	ESI
   524 00000647 6A 0E                           	PUSH	14
   525 00000649 6A 07                           	PUSH	7
   526 0000064B 6A 10                           	PUSH	16
   527 0000064D 6A 00                           	PUSH	0
   528 0000064F FF B5 FFFFFDDC                  	PUSH	DWORD [-548+EBP]
   529 00000655 E8 [00000000]                   	CALL	_putfonts_asc_sht
   530 0000065A E9 FFFFFD4F                     	JMP	L27
   531 0000065F                                 L30:
   532 0000065F E8 [00000000]                   	CALL	_io_sti
   533 00000664 E9 FFFFFD48                     	JMP	L2
   534                                          [SECTION .data]
   535 00000070                                 _closebtn.0:
   536 00000070 4F 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"OOOOOOOOOOOOOOO@"
       0000007A 4F 4F 4F 4F 4F 40 
   537 00000080 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000008A 51 51 51 51 24 40 
   538 00000090 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000009A 51 51 51 51 24 40 
   539 000000A0 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       000000AA 40 40 51 51 24 40 
   540 000000B0 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000BA 40 51 51 51 24 40 
   541 000000C0 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000CA 51 51 51 51 24 40 
   542 000000D0 4F 51 51 51 51 51 51 40 40 51   	DB	"OQQQQQQ@@QQQQQ$@"
       000000DA 51 51 51 51 24 40 
   543 000000E0 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000EA 51 51 51 51 24 40 
   544 000000F0 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000FA 40 51 51 51 24 40 
   545 00000100 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       0000010A 40 40 51 51 24 40 
   546 00000110 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000011A 51 51 51 51 24 40 
   547 00000120 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000012A 51 51 51 51 24 40 
   548 00000130 4F 24 24 24 24 24 24 24 24 24   	DB	"O$$$$$$$$$$$$$$@"
       0000013A 24 24 24 24 24 40 
   549 00000140 40 40 40 40 40 40 40 40 40 40   	DB	"@@@@@@@@@@@@@@@@"
       0000014A 40 40 40 40 40 40 
   550                                          [SECTION .text]
   551 00000669                                 	GLOBAL	_make_window
   552 00000669                                 _make_window:
   553 00000669 55                              	PUSH	EBP
   554 0000066A 89 E5                           	MOV	EBP,ESP
   555 0000066C 57                              	PUSH	EDI
   556 0000066D 56                              	PUSH	ESI
   557 0000066E 53                              	PUSH	EBX
   558 0000066F 83 EC 14                        	SUB	ESP,20
   559 00000672 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   560 00000675 6A 00                           	PUSH	0
   561 00000677 8D 43 FF                        	LEA	EAX,DWORD [-1+EBX]
   562 0000067A 8D 7B FE                        	LEA	EDI,DWORD [-2+EBX]
   563 0000067D 50                              	PUSH	EAX
   564 0000067E 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   565 00000681 6A 00                           	PUSH	0
   566 00000683 6A 00                           	PUSH	0
   567 00000685 6A 08                           	PUSH	8
   568 00000687 53                              	PUSH	EBX
   569 00000688 FF 75 08                        	PUSH	DWORD [8+EBP]
   570 0000068B E8 [00000000]                   	CALL	_boxfill8
   571 00000690 6A 01                           	PUSH	1
   572 00000692 57                              	PUSH	EDI
   573 00000693 6A 01                           	PUSH	1
   574 00000695 6A 01                           	PUSH	1
   575 00000697 6A 07                           	PUSH	7
   576 00000699 53                              	PUSH	EBX
   577 0000069A FF 75 08                        	PUSH	DWORD [8+EBP]
   578 0000069D E8 [00000000]                   	CALL	_boxfill8
   579 000006A2 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   580 000006A5 83 C4 38                        	ADD	ESP,56
   581 000006A8 4A                              	DEC	EDX
   582 000006A9 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   583 000006AC 52                              	PUSH	EDX
   584 000006AD 6A 00                           	PUSH	0
   585 000006AF 6A 00                           	PUSH	0
   586 000006B1 6A 00                           	PUSH	0
   587 000006B3 6A 08                           	PUSH	8
   588 000006B5 53                              	PUSH	EBX
   589 000006B6 FF 75 08                        	PUSH	DWORD [8+EBP]
   590 000006B9 E8 [00000000]                   	CALL	_boxfill8
   591 000006BE 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   592 000006C1 83 EE 02                        	SUB	ESI,2
   593 000006C4 56                              	PUSH	ESI
   594 000006C5 6A 01                           	PUSH	1
   595 000006C7 6A 01                           	PUSH	1
   596 000006C9 6A 01                           	PUSH	1
   597 000006CB 6A 07                           	PUSH	7
   598 000006CD 53                              	PUSH	EBX
   599 000006CE FF 75 08                        	PUSH	DWORD [8+EBP]
   600 000006D1 E8 [00000000]                   	CALL	_boxfill8
   601 000006D6 83 C4 38                        	ADD	ESP,56
   602 000006D9 56                              	PUSH	ESI
   603 000006DA 57                              	PUSH	EDI
   604 000006DB 6A 01                           	PUSH	1
   605 000006DD 57                              	PUSH	EDI
   606 000006DE 6A 0F                           	PUSH	15
   607 000006E0 53                              	PUSH	EBX
   608 000006E1 FF 75 08                        	PUSH	DWORD [8+EBP]
   609 000006E4 E8 [00000000]                   	CALL	_boxfill8
   610 000006E9 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   611 000006EC FF 75 EC                        	PUSH	DWORD [-20+EBP]
   612 000006EF 6A 00                           	PUSH	0
   613 000006F1 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   614 000006F4 6A 00                           	PUSH	0
   615 000006F6 53                              	PUSH	EBX
   616 000006F7 FF 75 08                        	PUSH	DWORD [8+EBP]
   617 000006FA E8 [00000000]                   	CALL	_boxfill8
   618 000006FF 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   619 00000702 83 C4 38                        	ADD	ESP,56
   620 00000705 83 E8 03                        	SUB	EAX,3
   621 00000708 50                              	PUSH	EAX
   622 00000709 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   623 0000070C 50                              	PUSH	EAX
   624 0000070D 6A 02                           	PUSH	2
   625 0000070F 6A 02                           	PUSH	2
   626 00000711 6A 08                           	PUSH	8
   627 00000713 53                              	PUSH	EBX
   628 00000714 FF 75 08                        	PUSH	DWORD [8+EBP]
   629 00000717 E8 [00000000]                   	CALL	_boxfill8
   630 0000071C 8D 43 FC                        	LEA	EAX,DWORD [-4+EBX]
   631 0000071F 6A 14                           	PUSH	20
   632 00000721 50                              	PUSH	EAX
   633 00000722 6A 03                           	PUSH	3
   634 00000724 6A 03                           	PUSH	3
   635 00000726 6A 0C                           	PUSH	12
   636 00000728 53                              	PUSH	EBX
   637 00000729 FF 75 08                        	PUSH	DWORD [8+EBP]
   638 0000072C E8 [00000000]                   	CALL	_boxfill8
   639 00000731 83 C4 38                        	ADD	ESP,56
   640 00000734 56                              	PUSH	ESI
   641 00000735 57                              	PUSH	EDI
   642 00000736 56                              	PUSH	ESI
   643 00000737 6A 01                           	PUSH	1
   644 00000739 6A 0F                           	PUSH	15
   645 0000073B 53                              	PUSH	EBX
   646 0000073C FF 75 08                        	PUSH	DWORD [8+EBP]
   647 0000073F E8 [00000000]                   	CALL	_boxfill8
   648 00000744 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   649 00000747 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   650 0000074A FF 75 E8                        	PUSH	DWORD [-24+EBP]
   651 0000074D 6A 00                           	PUSH	0
   652 0000074F 6A 00                           	PUSH	0
   653 00000751 6B F3 05                        	IMUL	ESI,EBX,5
   654 00000754 53                              	PUSH	EBX
   655 00000755 FF 75 08                        	PUSH	DWORD [8+EBP]
   656 00000758 E8 [00000000]                   	CALL	_boxfill8
   657 0000075D 83 C4 38                        	ADD	ESP,56
   658 00000760 FF 75 14                        	PUSH	DWORD [20+EBP]
   659 00000763 6A 04                           	PUSH	4
   660 00000765 6A 18                           	PUSH	24
   661 00000767 6A 07                           	PUSH	7
   662 00000769 53                              	PUSH	EBX
   663 0000076A FF 75 08                        	PUSH	DWORD [8+EBP]
   664 0000076D E8 [00000000]                   	CALL	_putfonts8_asc
   665 00000772 83 C4 18                        	ADD	ESP,24
   666 00000775 C7 45 F0 00000000               	MOV	DWORD [-16+EBP],0
   667 0000077C C7 45 E0 00000000               	MOV	DWORD [-32+EBP],0
   668 00000783                                 L53:
   669 00000783 8D 04 1E                        	LEA	EAX,DWORD [ESI+EBX*1]
   670 00000786 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   671 00000789 31 FF                           	XOR	EDI,EDI
   672 0000078B 8D 4C 02 EB                     	LEA	ECX,DWORD [-21+EDX+EAX*1]
   673 0000078F                                 L52:
   674 0000078F 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   675 00000792 8A 94 07 [00000070]             	MOV	DL,BYTE [_closebtn.0+EDI+EAX*1]
   676 00000799 80 FA 40                        	CMP	DL,64
   677 0000079C 74 33                           	JE	L58
   678 0000079E 80 FA 24                        	CMP	DL,36
   679 000007A1 74 2A                           	JE	L59
   680 000007A3 80 FA 51                        	CMP	DL,81
   681 000007A6 B2 08                           	MOV	DL,8
   682 000007A8 0F 95 C0                        	SETNE	AL
   683 000007AB 28 C2                           	SUB	DL,AL
   684 000007AD                                 L47:
   685 000007AD 47                              	INC	EDI
   686 000007AE 88 11                           	MOV	BYTE [ECX],DL
   687 000007B0 41                              	INC	ECX
   688 000007B1 83 FF 0F                        	CMP	EDI,15
   689 000007B4 7E D9                           	JLE	L52
   690 000007B6 FF 45 F0                        	INC	DWORD [-16+EBP]
   691 000007B9 01 DE                           	ADD	ESI,EBX
   692 000007BB 83 45 E0 10                     	ADD	DWORD [-32+EBP],16
   693 000007BF 83 7D F0 0D                     	CMP	DWORD [-16+EBP],13
   694 000007C3 7E BE                           	JLE	L53
   695 000007C5 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   696 000007C8 5B                              	POP	EBX
   697 000007C9 5E                              	POP	ESI
   698 000007CA 5F                              	POP	EDI
   699 000007CB 5D                              	POP	EBP
   700 000007CC C3                              	RET
   701 000007CD                                 L59:
   702 000007CD B2 0F                           	MOV	DL,15
   703 000007CF EB DC                           	JMP	L47
   704 000007D1                                 L58:
   705 000007D1 31 D2                           	XOR	EDX,EDX
   706 000007D3 EB D8                           	JMP	L47
