     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_fifo32_init
    10 00000000                                 	EXTERN	_init_keyboard
    11 00000000                                 	EXTERN	_enable_mouse
    12 00000000                                 	EXTERN	_init_pit
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_timer_alloc
    15 00000000                                 	EXTERN	_timer_init
    16 00000000                                 	EXTERN	_timer_settime
    17 00000000                                 	EXTERN	_memtest
    18 00000000                                 	EXTERN	_memman_init
    19 00000000                                 	EXTERN	_memman_free
    20 00000000                                 	EXTERN	_init_palette
    21 00000000                                 	EXTERN	_shtctl_init
    22 00000000                                 	EXTERN	_sheet_alloc
    23 00000000                                 	EXTERN	_memman_alloc_4k
    24 00000000                                 	EXTERN	_sheet_setbuf
    25 00000000                                 	EXTERN	_init_screen
    26 00000000                                 	EXTERN	_init_mouse_cursor8
    27 00000000                                 	EXTERN	_putfonts8_asc
    28 00000000                                 	EXTERN	_sheet_slide
    29 00000000                                 	EXTERN	_sheet_updown
    30 00000000                                 	EXTERN	_sprintf
    31 00000000                                 	EXTERN	_memman_total
    32 00000000                                 	EXTERN	_sheet_refresh
    33 00000000                                 	EXTERN	_io_cli
    34 00000000                                 	EXTERN	_fifo32_status
    35 00000000                                 	EXTERN	_fifo32_get
    36 00000000                                 	EXTERN	_boxfill8
    37 00000000                                 	EXTERN	_putfonts_asc_sht
    38 00000000                                 [FILE "bootpack.c"]
    39                                          [SECTION .data]
    40 00000000                                 LC0:
    41 00000000 77 69 6E 64 6F 77 00            	DB	"window",0x00
    42 00000007                                 LC1:
    43 00000007 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       00000011 00 
    44 00000012                                 LC2:
    45 00000012 54 68 69 73 20 4F 53 21 00      	DB	"This OS!",0x00
    46 0000001B                                 LC3:
    47 0000001B 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       00000025 00 
    48 00000026                                 LC4:
    49 00000026 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB free : %dKB",0x00
       00000030 42 20 66 72 65 65 20 3A 20 25 
       0000003A 64 4B 42 00 
    50 0000003E                                 LC10:
    51 0000003E 33 5B 73 65 63 5D 00            	DB	"3[sec]",0x00
    52 00000045                                 LC8:
    53 00000045 31 30 5B 73 65 63 5D 00         	DB	"10[sec]",0x00
    54 0000004D                                 LC9:
    55 0000004D 25 30 31 30 64 00               	DB	"%010d",0x00
    56                                          [SECTION .text]
    57 00000000                                 	GLOBAL	_HariMain
    58 00000000                                 _HariMain:
    59 00000000 55                              	PUSH	EBP
    60 00000001 89 E5                           	MOV	EBP,ESP
    61 00000003 57                              	PUSH	EDI
    62 00000004 56                              	PUSH	ESI
    63 00000005 53                              	PUSH	EBX
    64 00000006 81 EC 000001DC                  	SUB	ESP,476
    65 0000000C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    66 00000013 89 85 FFFFFE30                  	MOV	DWORD [-464+EBP],EAX
    67 00000019 8B 35 00000FF8                  	MOV	ESI,DWORD [4088]
    68 0000001F C7 85 FFFFFE28 00000000         	MOV	DWORD [-472+EBP],0
    69 00000029 E8 [00000000]                   	CALL	_init_gdtidt
    70 0000002E E8 [00000000]                   	CALL	_init_pic
    71 00000033 E8 [00000000]                   	CALL	_io_sti
    72 00000038 8D 85 FFFFFF44                  	LEA	EAX,DWORD [-188+EBP]
    73 0000003E 50                              	PUSH	EAX
    74 0000003F 68 00000080                     	PUSH	128
    75 00000044 68 [00000140]                   	PUSH	_fifo
    76 00000049 E8 [00000000]                   	CALL	_fifo32_init
    77 0000004E 68 00000100                     	PUSH	256
    78 00000053 68 [00000140]                   	PUSH	_fifo
    79 00000058 E8 [00000000]                   	CALL	_init_keyboard
    80 0000005D 8D 85 FFFFFF34                  	LEA	EAX,DWORD [-204+EBP]
    81 00000063 50                              	PUSH	EAX
    82 00000064 68 00000200                     	PUSH	512
    83 00000069 68 [00000140]                   	PUSH	_fifo
    84 0000006E E8 [00000000]                   	CALL	_enable_mouse
    85 00000073 83 C4 20                        	ADD	ESP,32
    86 00000076 E8 [00000000]                   	CALL	_init_pit
    87 0000007B 68 000000F8                     	PUSH	248
    88 00000080 6A 21                           	PUSH	33
    89 00000082 E8 [00000000]                   	CALL	_io_out8
    90 00000087 68 000000EF                     	PUSH	239
    91 0000008C 68 000000A1                     	PUSH	161
    92 00000091 E8 [00000000]                   	CALL	_io_out8
    93 00000096 E8 [00000000]                   	CALL	_timer_alloc
    94 0000009B 6A 0A                           	PUSH	10
    95 0000009D 68 [00000140]                   	PUSH	_fifo
    96 000000A2 89 C3                           	MOV	EBX,EAX
    97 000000A4 50                              	PUSH	EAX
    98 000000A5 E8 [00000000]                   	CALL	_timer_init
    99 000000AA 68 000003E8                     	PUSH	1000
   100 000000AF 53                              	PUSH	EBX
   101 000000B0 E8 [00000000]                   	CALL	_timer_settime
   102 000000B5 83 C4 24                        	ADD	ESP,36
   103 000000B8 E8 [00000000]                   	CALL	_timer_alloc
   104 000000BD 6A 03                           	PUSH	3
   105 000000BF 89 C3                           	MOV	EBX,EAX
   106 000000C1 68 [00000140]                   	PUSH	_fifo
   107 000000C6 50                              	PUSH	EAX
   108 000000C7 E8 [00000000]                   	CALL	_timer_init
   109 000000CC 68 0000012C                     	PUSH	300
   110 000000D1 53                              	PUSH	EBX
   111 000000D2 E8 [00000000]                   	CALL	_timer_settime
   112 000000D7 E8 [00000000]                   	CALL	_timer_alloc
   113 000000DC 6A 01                           	PUSH	1
   114 000000DE 68 [00000140]                   	PUSH	_fifo
   115 000000E3 50                              	PUSH	EAX
   116 000000E4 89 85 FFFFFE2C                  	MOV	DWORD [-468+EBP],EAX
   117 000000EA E8 [00000000]                   	CALL	_timer_init
   118 000000EF 83 C4 20                        	ADD	ESP,32
   119 000000F2 6A 32                           	PUSH	50
   120 000000F4 FF B5 FFFFFE2C                  	PUSH	DWORD [-468+EBP]
   121 000000FA E8 [00000000]                   	CALL	_timer_settime
   122 000000FF 68 BFFFFFFF                     	PUSH	-1073741825
   123 00000104 68 00400000                     	PUSH	4194304
   124 00000109 E8 [00000000]                   	CALL	_memtest
   125 0000010E 68 003C0000                     	PUSH	3932160
   126 00000113 89 85 FFFFFE24                  	MOV	DWORD [-476+EBP],EAX
   127 00000119 E8 [00000000]                   	CALL	_memman_init
   128 0000011E 68 0009E000                     	PUSH	647168
   129 00000123 68 00001000                     	PUSH	4096
   130 00000128 68 003C0000                     	PUSH	3932160
   131 0000012D E8 [00000000]                   	CALL	_memman_free
   132 00000132 8B 85 FFFFFE24                  	MOV	EAX,DWORD [-476+EBP]
   133 00000138 83 C4 20                        	ADD	ESP,32
   134 0000013B 2D 00400000                     	SUB	EAX,4194304
   135 00000140 50                              	PUSH	EAX
   136 00000141 68 00400000                     	PUSH	4194304
   137 00000146 68 003C0000                     	PUSH	3932160
   138 0000014B E8 [00000000]                   	CALL	_memman_free
   139 00000150 E8 [00000000]                   	CALL	_init_palette
   140 00000155 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   141 0000015C 50                              	PUSH	EAX
   142 0000015D 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   143 00000164 50                              	PUSH	EAX
   144 00000165 56                              	PUSH	ESI
   145 00000166 8D B5 FFFFFE34                  	LEA	ESI,DWORD [-460+EBP]
   146 0000016C 68 003C0000                     	PUSH	3932160
   147 00000171 E8 [00000000]                   	CALL	_shtctl_init
   148 00000176 89 C3                           	MOV	EBX,EAX
   149 00000178 50                              	PUSH	EAX
   150 00000179 E8 [00000000]                   	CALL	_sheet_alloc
   151 0000017E 83 C4 20                        	ADD	ESP,32
   152 00000181 53                              	PUSH	EBX
   153 00000182 89 85 FFFFFE20                  	MOV	DWORD [-480+EBP],EAX
   154 00000188 E8 [00000000]                   	CALL	_sheet_alloc
   155 0000018D 53                              	PUSH	EBX
   156 0000018E 89 C7                           	MOV	EDI,EAX
   157 00000190 E8 [00000000]                   	CALL	_sheet_alloc
   158 00000195 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
   159 0000019C 89 85 FFFFFE1C                  	MOV	DWORD [-484+EBP],EAX
   160 000001A2 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   161 000001A9 0F AF C2                        	IMUL	EAX,EDX
   162 000001AC 50                              	PUSH	EAX
   163 000001AD 68 003C0000                     	PUSH	3932160
   164 000001B2 E8 [00000000]                   	CALL	_memman_alloc_4k
   165 000001B7 68 00002A80                     	PUSH	10880
   166 000001BC 68 003C0000                     	PUSH	3932160
   167 000001C1 89 85 FFFFFE18                  	MOV	DWORD [-488+EBP],EAX
   168 000001C7 E8 [00000000]                   	CALL	_memman_alloc_4k
   169 000001CC 6A FF                           	PUSH	-1
   170 000001CE 89 C3                           	MOV	EBX,EAX
   171 000001D0 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   172 000001D7 50                              	PUSH	EAX
   173 000001D8 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   174 000001DF 50                              	PUSH	EAX
   175 000001E0 FF B5 FFFFFE18                  	PUSH	DWORD [-488+EBP]
   176 000001E6 FF B5 FFFFFE20                  	PUSH	DWORD [-480+EBP]
   177 000001EC E8 [00000000]                   	CALL	_sheet_setbuf
   178 000001F1 83 C4 2C                        	ADD	ESP,44
   179 000001F4 6A 63                           	PUSH	99
   180 000001F6 6A 10                           	PUSH	16
   181 000001F8 6A 10                           	PUSH	16
   182 000001FA 56                              	PUSH	ESI
   183 000001FB 57                              	PUSH	EDI
   184 000001FC E8 [00000000]                   	CALL	_sheet_setbuf
   185 00000201 6A FF                           	PUSH	-1
   186 00000203 6A 44                           	PUSH	68
   187 00000205 68 000000A0                     	PUSH	160
   188 0000020A 53                              	PUSH	EBX
   189 0000020B FF B5 FFFFFE1C                  	PUSH	DWORD [-484+EBP]
   190 00000211 E8 [00000000]                   	CALL	_sheet_setbuf
   191 00000216 83 C4 28                        	ADD	ESP,40
   192 00000219 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   193 00000220 50                              	PUSH	EAX
   194 00000221 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   195 00000228 50                              	PUSH	EAX
   196 00000229 FF B5 FFFFFE18                  	PUSH	DWORD [-488+EBP]
   197 0000022F E8 [00000000]                   	CALL	_init_screen
   198 00000234 6A 63                           	PUSH	99
   199 00000236 56                              	PUSH	ESI
   200 00000237 E8 [00000000]                   	CALL	_init_mouse_cursor8
   201 0000023C 68 [00000000]                   	PUSH	LC0
   202 00000241 6A 44                           	PUSH	68
   203 00000243 68 000000A0                     	PUSH	160
   204 00000248 53                              	PUSH	EBX
   205 00000249 E8 00000269                     	CALL	_make_window
   206 0000024E 83 C4 24                        	ADD	ESP,36
   207 00000251 68 [00000007]                   	PUSH	LC1
   208 00000256 6A 1C                           	PUSH	28
   209 00000258 6A 18                           	PUSH	24
   210 0000025A 6A 00                           	PUSH	0
   211 0000025C 68 000000A0                     	PUSH	160
   212 00000261 53                              	PUSH	EBX
   213 00000262 E8 [00000000]                   	CALL	_putfonts8_asc
   214 00000267 68 [00000012]                   	PUSH	LC2
   215 0000026C 6A 2C                           	PUSH	44
   216 0000026E 6A 18                           	PUSH	24
   217 00000270 6A 00                           	PUSH	0
   218 00000272 68 000000A0                     	PUSH	160
   219 00000277 53                              	PUSH	EBX
   220 00000278 E8 [00000000]                   	CALL	_putfonts8_asc
   221 0000027D 83 C4 30                        	ADD	ESP,48
   222 00000280 6A 00                           	PUSH	0
   223 00000282 6A 00                           	PUSH	0
   224 00000284 FF B5 FFFFFE20                  	PUSH	DWORD [-480+EBP]
   225 0000028A E8 [00000000]                   	CALL	_sheet_slide
   226 0000028F B9 00000002                     	MOV	ECX,2
   227 00000294 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   228 0000029B 8D 50 F0                        	LEA	EDX,DWORD [-16+EAX]
   229 0000029E 89 D0                           	MOV	EAX,EDX
   230 000002A0 99                              	CDQ
   231 000002A1 F7 F9                           	IDIV	ECX
   232 000002A3 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
   233 000002AA 83 EA 2C                        	SUB	EDX,44
   234 000002AD 89 C6                           	MOV	ESI,EAX
   235 000002AF 89 D0                           	MOV	EAX,EDX
   236 000002B1 99                              	CDQ
   237 000002B2 F7 F9                           	IDIV	ECX
   238 000002B4 50                              	PUSH	EAX
   239 000002B5 89 C3                           	MOV	EBX,EAX
   240 000002B7 56                              	PUSH	ESI
   241 000002B8 57                              	PUSH	EDI
   242 000002B9 E8 [00000000]                   	CALL	_sheet_slide
   243 000002BE 6A 48                           	PUSH	72
   244 000002C0 6A 50                           	PUSH	80
   245 000002C2 FF B5 FFFFFE1C                  	PUSH	DWORD [-484+EBP]
   246 000002C8 E8 [00000000]                   	CALL	_sheet_slide
   247 000002CD 83 C4 24                        	ADD	ESP,36
   248 000002D0 6A 00                           	PUSH	0
   249 000002D2 FF B5 FFFFFE20                  	PUSH	DWORD [-480+EBP]
   250 000002D8 E8 [00000000]                   	CALL	_sheet_updown
   251 000002DD 6A 01                           	PUSH	1
   252 000002DF FF B5 FFFFFE1C                  	PUSH	DWORD [-484+EBP]
   253 000002E5 E8 [00000000]                   	CALL	_sheet_updown
   254 000002EA 6A 02                           	PUSH	2
   255 000002EC 57                              	PUSH	EDI
   256 000002ED E8 [00000000]                   	CALL	_sheet_updown
   257 000002F2 53                              	PUSH	EBX
   258 000002F3 56                              	PUSH	ESI
   259 000002F4 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   260 000002F7 68 [0000001B]                   	PUSH	LC3
   261 000002FC 53                              	PUSH	EBX
   262 000002FD E8 [00000000]                   	CALL	_sprintf
   263 00000302 83 C4 28                        	ADD	ESP,40
   264 00000305 53                              	PUSH	EBX
   265 00000306 6A 00                           	PUSH	0
   266 00000308 6A 00                           	PUSH	0
   267 0000030A 6A 00                           	PUSH	0
   268 0000030C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   269 00000313 50                              	PUSH	EAX
   270 00000314 FF B5 FFFFFE18                  	PUSH	DWORD [-488+EBP]
   271 0000031A E8 [00000000]                   	CALL	_putfonts8_asc
   272 0000031F 68 003C0000                     	PUSH	3932160
   273 00000324 E8 [00000000]                   	CALL	_memman_total
   274 00000329 C1 E8 0A                        	SHR	EAX,10
   275 0000032C C1 AD FFFFFE24 14               	SHR	DWORD [-476+EBP],20
   276 00000333 89 04 24                        	MOV	DWORD [ESP],EAX
   277 00000336 FF B5 FFFFFE24                  	PUSH	DWORD [-476+EBP]
   278 0000033C 68 [00000026]                   	PUSH	LC4
   279 00000341 53                              	PUSH	EBX
   280 00000342 E8 [00000000]                   	CALL	_sprintf
   281 00000347 83 C4 28                        	ADD	ESP,40
   282 0000034A 53                              	PUSH	EBX
   283 0000034B 6A 20                           	PUSH	32
   284 0000034D 6A 00                           	PUSH	0
   285 0000034F 6A 07                           	PUSH	7
   286 00000351 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   287 00000358 50                              	PUSH	EAX
   288 00000359 FF B5 FFFFFE18                  	PUSH	DWORD [-488+EBP]
   289 0000035F E8 [00000000]                   	CALL	_putfonts8_asc
   290 00000364 6A 30                           	PUSH	48
   291 00000366 FF B5 FFFFFE30                  	PUSH	DWORD [-464+EBP]
   292 0000036C 6A 00                           	PUSH	0
   293 0000036E 6A 00                           	PUSH	0
   294 00000370 FF B5 FFFFFE20                  	PUSH	DWORD [-480+EBP]
   295 00000376 E8 [00000000]                   	CALL	_sheet_refresh
   296 0000037B 83 C4 2C                        	ADD	ESP,44
   297 0000037E                                 L2:
   298 0000037E FF 85 FFFFFE28                  	INC	DWORD [-472+EBP]
   299 00000384 E8 [00000000]                   	CALL	_io_cli
   300 00000389 68 [00000140]                   	PUSH	_fifo
   301 0000038E E8 [00000000]                   	CALL	_fifo32_status
   302 00000393 5A                              	POP	EDX
   303 00000394 85 C0                           	TEST	EAX,EAX
   304 00000396 0F 84 00000111                  	JE	L28
   305 0000039C 68 [00000140]                   	PUSH	_fifo
   306 000003A1 E8 [00000000]                   	CALL	_fifo32_get
   307 000003A6 88 C3                           	MOV	BL,AL
   308 000003A8 E8 [00000000]                   	CALL	_io_sti
   309 000003AD 58                              	POP	EAX
   310 000003AE 80 FB 0A                        	CMP	BL,10
   311 000003B1 0F 84 000000AA                  	JE	L29
   312 000003B7 80 FB 03                        	CMP	BL,3
   313 000003BA 74 7F                           	JE	L30
   314 000003BC 80 FB 01                        	CMP	BL,1
   315 000003BF 74 5C                           	JE	L31
   316 000003C1 84 DB                           	TEST	BL,BL
   317 000003C3 75 B9                           	JNE	L2
   318 000003C5 6A 01                           	PUSH	1
   319 000003C7 68 [00000140]                   	PUSH	_fifo
   320 000003CC FF B5 FFFFFE2C                  	PUSH	DWORD [-468+EBP]
   321 000003D2 E8 [00000000]                   	CALL	_timer_init
   322 000003D7 6A 6F                           	PUSH	111
   323 000003D9 6A 0F                           	PUSH	15
   324 000003DB 6A 60                           	PUSH	96
   325 000003DD 6A 08                           	PUSH	8
   326 000003DF 6A 0E                           	PUSH	14
   327 000003E1                                 L26:
   328 000003E1 FF B5 FFFFFE30                  	PUSH	DWORD [-464+EBP]
   329 000003E7 FF B5 FFFFFE18                  	PUSH	DWORD [-488+EBP]
   330 000003ED E8 [00000000]                   	CALL	_boxfill8
   331 000003F2 83 C4 28                        	ADD	ESP,40
   332 000003F5 6A 32                           	PUSH	50
   333 000003F7 FF B5 FFFFFE2C                  	PUSH	DWORD [-468+EBP]
   334 000003FD E8 [00000000]                   	CALL	_timer_settime
   335 00000402 6A 70                           	PUSH	112
   336 00000404 6A 10                           	PUSH	16
   337 00000406 6A 60                           	PUSH	96
   338 00000408 6A 08                           	PUSH	8
   339 0000040A FF B5 FFFFFE20                  	PUSH	DWORD [-480+EBP]
   340 00000410 E8 [00000000]                   	CALL	_sheet_refresh
   341 00000415                                 L27:
   342 00000415 83 C4 1C                        	ADD	ESP,28
   343 00000418 E9 FFFFFF61                     	JMP	L2
   344 0000041D                                 L31:
   345 0000041D 6A 00                           	PUSH	0
   346 0000041F 68 [00000140]                   	PUSH	_fifo
   347 00000424 FF B5 FFFFFE2C                  	PUSH	DWORD [-468+EBP]
   348 0000042A E8 [00000000]                   	CALL	_timer_init
   349 0000042F 6A 6F                           	PUSH	111
   350 00000431 6A 0F                           	PUSH	15
   351 00000433 6A 60                           	PUSH	96
   352 00000435 6A 08                           	PUSH	8
   353 00000437 6A 07                           	PUSH	7
   354 00000439 EB A6                           	JMP	L26
   355 0000043B                                 L30:
   356 0000043B 6A 06                           	PUSH	6
   357 0000043D 68 [0000003E]                   	PUSH	LC10
   358 00000442 6A 0E                           	PUSH	14
   359 00000444 6A 07                           	PUSH	7
   360 00000446 6A 50                           	PUSH	80
   361 00000448 6A 00                           	PUSH	0
   362 0000044A FF B5 FFFFFE20                  	PUSH	DWORD [-480+EBP]
   363 00000450 E8 [00000000]                   	CALL	_putfonts_asc_sht
   364 00000455 C7 85 FFFFFE28 00000000         	MOV	DWORD [-472+EBP],0
   365 0000045F EB B4                           	JMP	L27
   366 00000461                                 L29:
   367 00000461 6A 07                           	PUSH	7
   368 00000463 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   369 00000466 68 [00000045]                   	PUSH	LC8
   370 0000046B 6A 0E                           	PUSH	14
   371 0000046D 6A 07                           	PUSH	7
   372 0000046F 6A 40                           	PUSH	64
   373 00000471 6A 00                           	PUSH	0
   374 00000473 FF B5 FFFFFE20                  	PUSH	DWORD [-480+EBP]
   375 00000479 E8 [00000000]                   	CALL	_putfonts_asc_sht
   376 0000047E FF B5 FFFFFE28                  	PUSH	DWORD [-472+EBP]
   377 00000484 68 [0000004D]                   	PUSH	LC9
   378 00000489 53                              	PUSH	EBX
   379 0000048A E8 [00000000]                   	CALL	_sprintf
   380 0000048F 83 C4 28                        	ADD	ESP,40
   381 00000492 6A 0A                           	PUSH	10
   382 00000494 53                              	PUSH	EBX
   383 00000495 6A 08                           	PUSH	8
   384 00000497 6A 00                           	PUSH	0
   385 00000499 6A 1C                           	PUSH	28
   386 0000049B 6A 28                           	PUSH	40
   387 0000049D FF B5 FFFFFE1C                  	PUSH	DWORD [-484+EBP]
   388 000004A3 E8 [00000000]                   	CALL	_putfonts_asc_sht
   389 000004A8 E9 FFFFFF68                     	JMP	L27
   390 000004AD                                 L28:
   391 000004AD E8 [00000000]                   	CALL	_io_sti
   392 000004B2 E9 FFFFFEC7                     	JMP	L2
   393                                          [SECTION .data]
   394 00000053                                 _closebtn.0:
   395 00000053 4F 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"OOOOOOOOOOOOOOO@"
       0000005D 4F 4F 4F 4F 4F 40 
   396 00000063 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000006D 51 51 51 51 24 40 
   397 00000073 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000007D 51 51 51 51 24 40 
   398 00000083 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       0000008D 40 40 51 51 24 40 
   399 00000093 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       0000009D 40 51 51 51 24 40 
   400 000000A3 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000AD 51 51 51 51 24 40 
   401 000000B3 4F 51 51 51 51 51 51 40 40 51   	DB	"OQQQQQQ@@QQQQQ$@"
       000000BD 51 51 51 51 24 40 
   402 000000C3 4F 51 51 51 51 51 40 40 40 40   	DB	"OQQQQQ@@@@QQQQ$@"
       000000CD 51 51 51 51 24 40 
   403 000000D3 4F 51 51 51 51 40 40 51 51 40   	DB	"OQQQQ@@QQ@@QQQ$@"
       000000DD 40 51 51 51 24 40 
   404 000000E3 4F 51 51 51 40 40 51 51 51 51   	DB	"OQQQ@@QQQQ@@QQ$@"
       000000ED 40 40 51 51 24 40 
   405 000000F3 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       000000FD 51 51 51 51 24 40 
   406 00000103 4F 51 51 51 51 51 51 51 51 51   	DB	"OQQQQQQQQQQQQQ$@"
       0000010D 51 51 51 51 24 40 
   407 00000113 4F 24 24 24 24 24 24 24 24 24   	DB	"O$$$$$$$$$$$$$$@"
       0000011D 24 24 24 24 24 40 
   408 00000123 40 40 40 40 40 40 40 40 40 40   	DB	"@@@@@@@@@@@@@@@@"
       0000012D 40 40 40 40 40 40 
   409                                          [SECTION .text]
   410 000004B7                                 	GLOBAL	_make_window
   411 000004B7                                 _make_window:
   412 000004B7 55                              	PUSH	EBP
   413 000004B8 89 E5                           	MOV	EBP,ESP
   414 000004BA 57                              	PUSH	EDI
   415 000004BB 56                              	PUSH	ESI
   416 000004BC 53                              	PUSH	EBX
   417 000004BD 83 EC 14                        	SUB	ESP,20
   418 000004C0 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   419 000004C3 6A 00                           	PUSH	0
   420 000004C5 8D 43 FF                        	LEA	EAX,DWORD [-1+EBX]
   421 000004C8 8D 7B FE                        	LEA	EDI,DWORD [-2+EBX]
   422 000004CB 50                              	PUSH	EAX
   423 000004CC 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   424 000004CF 6A 00                           	PUSH	0
   425 000004D1 6A 00                           	PUSH	0
   426 000004D3 6A 08                           	PUSH	8
   427 000004D5 53                              	PUSH	EBX
   428 000004D6 FF 75 08                        	PUSH	DWORD [8+EBP]
   429 000004D9 E8 [00000000]                   	CALL	_boxfill8
   430 000004DE 6A 01                           	PUSH	1
   431 000004E0 57                              	PUSH	EDI
   432 000004E1 6A 01                           	PUSH	1
   433 000004E3 6A 01                           	PUSH	1
   434 000004E5 6A 07                           	PUSH	7
   435 000004E7 53                              	PUSH	EBX
   436 000004E8 FF 75 08                        	PUSH	DWORD [8+EBP]
   437 000004EB E8 [00000000]                   	CALL	_boxfill8
   438 000004F0 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   439 000004F3 83 C4 38                        	ADD	ESP,56
   440 000004F6 4A                              	DEC	EDX
   441 000004F7 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   442 000004FA 52                              	PUSH	EDX
   443 000004FB 6A 00                           	PUSH	0
   444 000004FD 6A 00                           	PUSH	0
   445 000004FF 6A 00                           	PUSH	0
   446 00000501 6A 08                           	PUSH	8
   447 00000503 53                              	PUSH	EBX
   448 00000504 FF 75 08                        	PUSH	DWORD [8+EBP]
   449 00000507 E8 [00000000]                   	CALL	_boxfill8
   450 0000050C 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   451 0000050F 83 EE 02                        	SUB	ESI,2
   452 00000512 56                              	PUSH	ESI
   453 00000513 6A 01                           	PUSH	1
   454 00000515 6A 01                           	PUSH	1
   455 00000517 6A 01                           	PUSH	1
   456 00000519 6A 07                           	PUSH	7
   457 0000051B 53                              	PUSH	EBX
   458 0000051C FF 75 08                        	PUSH	DWORD [8+EBP]
   459 0000051F E8 [00000000]                   	CALL	_boxfill8
   460 00000524 83 C4 38                        	ADD	ESP,56
   461 00000527 56                              	PUSH	ESI
   462 00000528 57                              	PUSH	EDI
   463 00000529 6A 01                           	PUSH	1
   464 0000052B 57                              	PUSH	EDI
   465 0000052C 6A 0F                           	PUSH	15
   466 0000052E 53                              	PUSH	EBX
   467 0000052F FF 75 08                        	PUSH	DWORD [8+EBP]
   468 00000532 E8 [00000000]                   	CALL	_boxfill8
   469 00000537 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   470 0000053A FF 75 EC                        	PUSH	DWORD [-20+EBP]
   471 0000053D 6A 00                           	PUSH	0
   472 0000053F FF 75 EC                        	PUSH	DWORD [-20+EBP]
   473 00000542 6A 00                           	PUSH	0
   474 00000544 53                              	PUSH	EBX
   475 00000545 FF 75 08                        	PUSH	DWORD [8+EBP]
   476 00000548 E8 [00000000]                   	CALL	_boxfill8
   477 0000054D 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   478 00000550 83 C4 38                        	ADD	ESP,56
   479 00000553 83 E8 03                        	SUB	EAX,3
   480 00000556 50                              	PUSH	EAX
   481 00000557 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   482 0000055A 50                              	PUSH	EAX
   483 0000055B 6A 02                           	PUSH	2
   484 0000055D 6A 02                           	PUSH	2
   485 0000055F 6A 08                           	PUSH	8
   486 00000561 53                              	PUSH	EBX
   487 00000562 FF 75 08                        	PUSH	DWORD [8+EBP]
   488 00000565 E8 [00000000]                   	CALL	_boxfill8
   489 0000056A 8D 43 FC                        	LEA	EAX,DWORD [-4+EBX]
   490 0000056D 6A 14                           	PUSH	20
   491 0000056F 50                              	PUSH	EAX
   492 00000570 6A 03                           	PUSH	3
   493 00000572 6A 03                           	PUSH	3
   494 00000574 6A 0C                           	PUSH	12
   495 00000576 53                              	PUSH	EBX
   496 00000577 FF 75 08                        	PUSH	DWORD [8+EBP]
   497 0000057A E8 [00000000]                   	CALL	_boxfill8
   498 0000057F 83 C4 38                        	ADD	ESP,56
   499 00000582 56                              	PUSH	ESI
   500 00000583 57                              	PUSH	EDI
   501 00000584 56                              	PUSH	ESI
   502 00000585 6A 01                           	PUSH	1
   503 00000587 6A 0F                           	PUSH	15
   504 00000589 53                              	PUSH	EBX
   505 0000058A FF 75 08                        	PUSH	DWORD [8+EBP]
   506 0000058D E8 [00000000]                   	CALL	_boxfill8
   507 00000592 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   508 00000595 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   509 00000598 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   510 0000059B 6A 00                           	PUSH	0
   511 0000059D 6A 00                           	PUSH	0
   512 0000059F 6B F3 05                        	IMUL	ESI,EBX,5
   513 000005A2 53                              	PUSH	EBX
   514 000005A3 FF 75 08                        	PUSH	DWORD [8+EBP]
   515 000005A6 E8 [00000000]                   	CALL	_boxfill8
   516 000005AB 83 C4 38                        	ADD	ESP,56
   517 000005AE FF 75 14                        	PUSH	DWORD [20+EBP]
   518 000005B1 6A 04                           	PUSH	4
   519 000005B3 6A 18                           	PUSH	24
   520 000005B5 6A 07                           	PUSH	7
   521 000005B7 53                              	PUSH	EBX
   522 000005B8 FF 75 08                        	PUSH	DWORD [8+EBP]
   523 000005BB E8 [00000000]                   	CALL	_putfonts8_asc
   524 000005C0 83 C4 18                        	ADD	ESP,24
   525 000005C3 C7 45 F0 00000000               	MOV	DWORD [-16+EBP],0
   526 000005CA C7 45 E0 00000000               	MOV	DWORD [-32+EBP],0
   527 000005D1                                 L48:
   528 000005D1 8D 04 1E                        	LEA	EAX,DWORD [ESI+EBX*1]
   529 000005D4 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   530 000005D7 31 FF                           	XOR	EDI,EDI
   531 000005D9 8D 4C 02 EB                     	LEA	ECX,DWORD [-21+EDX+EAX*1]
   532 000005DD                                 L47:
   533 000005DD 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   534 000005E0 8A 94 07 [00000053]             	MOV	DL,BYTE [_closebtn.0+EDI+EAX*1]
   535 000005E7 80 FA 40                        	CMP	DL,64
   536 000005EA 74 33                           	JE	L53
   537 000005EC 80 FA 24                        	CMP	DL,36
   538 000005EF 74 2A                           	JE	L54
   539 000005F1 80 FA 51                        	CMP	DL,81
   540 000005F4 B2 08                           	MOV	DL,8
   541 000005F6 0F 95 C0                        	SETNE	AL
   542 000005F9 28 C2                           	SUB	DL,AL
   543 000005FB                                 L42:
   544 000005FB 47                              	INC	EDI
   545 000005FC 88 11                           	MOV	BYTE [ECX],DL
   546 000005FE 41                              	INC	ECX
   547 000005FF 83 FF 0F                        	CMP	EDI,15
   548 00000602 7E D9                           	JLE	L47
   549 00000604 FF 45 F0                        	INC	DWORD [-16+EBP]
   550 00000607 01 DE                           	ADD	ESI,EBX
   551 00000609 83 45 E0 10                     	ADD	DWORD [-32+EBP],16
   552 0000060D 83 7D F0 0D                     	CMP	DWORD [-16+EBP],13
   553 00000611 7E BE                           	JLE	L48
   554 00000613 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   555 00000616 5B                              	POP	EBX
   556 00000617 5E                              	POP	ESI
   557 00000618 5F                              	POP	EDI
   558 00000619 5D                              	POP	EBP
   559 0000061A C3                              	RET
   560 0000061B                                 L54:
   561 0000061B B2 0F                           	MOV	DL,15
   562 0000061D EB DC                           	JMP	L42
   563 0000061F                                 L53:
   564 0000061F 31 D2                           	XOR	EDX,EDX
   565 00000621 EB D8                           	JMP	L42
   566 00000623                                 	GLOBAL	_fifo
   567                                          [SECTION .data]
   568 00000133 00 00 00 00 00 00 00 00 00 00   	ALIGNB	16
       0000013D 00 00 00 
   569 00000140                                 _fifo:
   570 00000140 00 00 00 00 00 00 00 00 00 00   	RESB	24
       0000014A 00 00 00 00 00 00 00 00 00 00 
       00000154 00 00 00 00 
