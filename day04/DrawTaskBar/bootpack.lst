     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 0000027E                     	CALL	_init_palette
    18 00000008 6A 78                           	PUSH	120
    19 0000000A 6A 78                           	PUSH	120
    20 0000000C 6A 14                           	PUSH	20
    21 0000000E 6A 14                           	PUSH	20
    22 00000010 6A 07                           	PUSH	7
    23 00000012 68 00000140                     	PUSH	320
    24 00000017 68 000A0000                     	PUSH	655360
    25 0000001C E8 00000214                     	CALL	_boxfill8
    26 00000021 68 000000C8                     	PUSH	200
    27 00000026 68 000000AA                     	PUSH	170
    28 0000002B 6A 64                           	PUSH	100
    29 0000002D 6A 46                           	PUSH	70
    30 0000002F 6A 01                           	PUSH	1
    31 00000031 68 00000140                     	PUSH	320
    32 00000036 68 000A0000                     	PUSH	655360
    33 0000003B E8 000001F5                     	CALL	_boxfill8
    34 00000040 83 C4 38                        	ADD	ESP,56
    35 00000043 68 000000FA                     	PUSH	250
    36 00000048 68 000000DC                     	PUSH	220
    37 0000004D 68 00000096                     	PUSH	150
    38 00000052 6A 78                           	PUSH	120
    39 00000054 6A 0F                           	PUSH	15
    40 00000056 68 00000140                     	PUSH	320
    41 0000005B 68 000A0000                     	PUSH	655360
    42 00000060 E8 000001D0                     	CALL	_boxfill8
    43 00000065 68 000000AC                     	PUSH	172
    44 0000006A 68 0000013F                     	PUSH	319
    45 0000006F 68 000000AC                     	PUSH	172
    46 00000074 6A 00                           	PUSH	0
    47 00000076 6A 08                           	PUSH	8
    48 00000078 68 00000140                     	PUSH	320
    49 0000007D 68 000A0000                     	PUSH	655360
    50 00000082 E8 000001AE                     	CALL	_boxfill8
    51 00000087 83 C4 38                        	ADD	ESP,56
    52 0000008A 68 000000AD                     	PUSH	173
    53 0000008F 68 0000013F                     	PUSH	319
    54 00000094 68 000000AD                     	PUSH	173
    55 00000099 6A 00                           	PUSH	0
    56 0000009B 6A 07                           	PUSH	7
    57 0000009D 68 00000140                     	PUSH	320
    58 000000A2 68 000A0000                     	PUSH	655360
    59 000000A7 E8 00000189                     	CALL	_boxfill8
    60 000000AC 68 000000C7                     	PUSH	199
    61 000000B1 68 0000013F                     	PUSH	319
    62 000000B6 68 000000AE                     	PUSH	174
    63 000000BB 6A 00                           	PUSH	0
    64 000000BD 6A 08                           	PUSH	8
    65 000000BF 68 00000140                     	PUSH	320
    66 000000C4 68 000A0000                     	PUSH	655360
    67 000000C9 E8 00000167                     	CALL	_boxfill8
    68 000000CE 83 C4 38                        	ADD	ESP,56
    69 000000D1 68 000000B0                     	PUSH	176
    70 000000D6 6A 3B                           	PUSH	59
    71 000000D8 68 000000B0                     	PUSH	176
    72 000000DD 6A 03                           	PUSH	3
    73 000000DF 6A 07                           	PUSH	7
    74 000000E1 68 00000140                     	PUSH	320
    75 000000E6 68 000A0000                     	PUSH	655360
    76 000000EB E8 00000145                     	CALL	_boxfill8
    77 000000F0 68 000000C4                     	PUSH	196
    78 000000F5 6A 02                           	PUSH	2
    79 000000F7 68 000000B0                     	PUSH	176
    80 000000FC 6A 02                           	PUSH	2
    81 000000FE 6A 07                           	PUSH	7
    82 00000100 68 00000140                     	PUSH	320
    83 00000105 68 000A0000                     	PUSH	655360
    84 0000010A E8 00000126                     	CALL	_boxfill8
    85 0000010F 83 C4 38                        	ADD	ESP,56
    86 00000112 68 000000C4                     	PUSH	196
    87 00000117 6A 3B                           	PUSH	59
    88 00000119 68 000000C4                     	PUSH	196
    89 0000011E 6A 03                           	PUSH	3
    90 00000120 6A 0F                           	PUSH	15
    91 00000122 68 00000140                     	PUSH	320
    92 00000127 68 000A0000                     	PUSH	655360
    93 0000012C E8 00000104                     	CALL	_boxfill8
    94 00000131 68 000000C3                     	PUSH	195
    95 00000136 6A 3B                           	PUSH	59
    96 00000138 68 000000B1                     	PUSH	177
    97 0000013D 6A 3B                           	PUSH	59
    98 0000013F 6A 0F                           	PUSH	15
    99 00000141 68 00000140                     	PUSH	320
   100 00000146 68 000A0000                     	PUSH	655360
   101 0000014B E8 000000E5                     	CALL	_boxfill8
   102 00000150 83 C4 38                        	ADD	ESP,56
   103 00000153 68 000000C5                     	PUSH	197
   104 00000158 6A 3B                           	PUSH	59
   105 0000015A 68 000000C5                     	PUSH	197
   106 0000015F 6A 02                           	PUSH	2
   107 00000161 6A 00                           	PUSH	0
   108 00000163 68 00000140                     	PUSH	320
   109 00000168 68 000A0000                     	PUSH	655360
   110 0000016D E8 000000C3                     	CALL	_boxfill8
   111 00000172 68 000000C5                     	PUSH	197
   112 00000177 6A 3C                           	PUSH	60
   113 00000179 68 000000B0                     	PUSH	176
   114 0000017E 6A 3C                           	PUSH	60
   115 00000180 6A 00                           	PUSH	0
   116 00000182 68 00000140                     	PUSH	320
   117 00000187 68 000A0000                     	PUSH	655360
   118 0000018C E8 000000A4                     	CALL	_boxfill8
   119 00000191 83 C4 38                        	ADD	ESP,56
   120 00000194 68 000000B0                     	PUSH	176
   121 00000199 68 0000013C                     	PUSH	316
   122 0000019E 68 000000B0                     	PUSH	176
   123 000001A3 68 00000111                     	PUSH	273
   124 000001A8 6A 0F                           	PUSH	15
   125 000001AA 68 00000140                     	PUSH	320
   126 000001AF 68 000A0000                     	PUSH	655360
   127 000001B4 E8 0000007C                     	CALL	_boxfill8
   128 000001B9 68 000000C5                     	PUSH	197
   129 000001BE 68 00000111                     	PUSH	273
   130 000001C3 68 000000B1                     	PUSH	177
   131 000001C8 68 00000111                     	PUSH	273
   132 000001CD 6A 0F                           	PUSH	15
   133 000001CF 68 00000140                     	PUSH	320
   134 000001D4 68 000A0000                     	PUSH	655360
   135 000001D9 E8 00000057                     	CALL	_boxfill8
   136 000001DE 83 C4 38                        	ADD	ESP,56
   137 000001E1 68 000000C5                     	PUSH	197
   138 000001E6 68 0000013C                     	PUSH	316
   139 000001EB 68 000000C5                     	PUSH	197
   140 000001F0 68 00000111                     	PUSH	273
   141 000001F5 6A 07                           	PUSH	7
   142 000001F7 68 00000140                     	PUSH	320
   143 000001FC 68 000A0000                     	PUSH	655360
   144 00000201 E8 0000002F                     	CALL	_boxfill8
   145 00000206 68 000000C5                     	PUSH	197
   146 0000020B 68 0000013D                     	PUSH	317
   147 00000210 68 000000B0                     	PUSH	176
   148 00000215 68 0000013D                     	PUSH	317
   149 0000021A 6A 07                           	PUSH	7
   150 0000021C 68 00000140                     	PUSH	320
   151 00000221 68 000A0000                     	PUSH	655360
   152 00000226 E8 0000000A                     	CALL	_boxfill8
   153 0000022B 83 C4 38                        	ADD	ESP,56
   154 0000022E                                 L2:
   155 0000022E E8 [00000000]                   	CALL	_io_hlt
   156 00000233 EB F9                           	JMP	L2
   157 00000235                                 	GLOBAL	_boxfill8
   158 00000235                                 _boxfill8:
   159 00000235 55                              	PUSH	EBP
   160 00000236 89 E5                           	MOV	EBP,ESP
   161 00000238 57                              	PUSH	EDI
   162 00000239 56                              	PUSH	ESI
   163 0000023A 53                              	PUSH	EBX
   164 0000023B 51                              	PUSH	ECX
   165 0000023C 51                              	PUSH	ECX
   166 0000023D 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   167 00000240 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   168 00000243 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   169 00000246 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   170 00000249 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   171 0000024C 7F 31                           	JG	L17
   172 0000024E 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   173 00000251 0F AF D9                        	IMUL	EBX,ECX
   174 00000254                                 L15:
   175 00000254 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   176 00000257 39 FA                           	CMP	EDX,EDI
   177 00000259 7F 1B                           	JG	L19
   178 0000025B 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   179 0000025E 01 DE                           	ADD	ESI,EBX
   180 00000260 01 D6                           	ADD	ESI,EDX
   181 00000262 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   182 00000265                                 L14:
   183 00000265 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   184 00000268 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   185 0000026B 42                              	INC	EDX
   186 0000026C 88 06                           	MOV	BYTE [ESI],AL
   187 0000026E 46                              	INC	ESI
   188 0000026F 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   189 00000272 39 FA                           	CMP	EDX,EDI
   190 00000274 7E EF                           	JLE	L14
   191 00000276                                 L19:
   192 00000276 41                              	INC	ECX
   193 00000277 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   194 0000027A 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   195 0000027D 7E D5                           	JLE	L15
   196 0000027F                                 L17:
   197 0000027F 58                              	POP	EAX
   198 00000280 5A                              	POP	EDX
   199 00000281 5B                              	POP	EBX
   200 00000282 5E                              	POP	ESI
   201 00000283 5F                              	POP	EDI
   202 00000284 5D                              	POP	EBP
   203 00000285 C3                              	RET
   204                                          [SECTION .data]
   205 00000000                                 _table_rgb.0:
   206 00000000 00                              	DB	0
   207 00000001 00                              	DB	0
   208 00000002 00                              	DB	0
   209 00000003 FF                              	DB	-1
   210 00000004 00                              	DB	0
   211 00000005 00                              	DB	0
   212 00000006 00                              	DB	0
   213 00000007 FF                              	DB	-1
   214 00000008 00                              	DB	0
   215 00000009 FF                              	DB	-1
   216 0000000A FF                              	DB	-1
   217 0000000B 00                              	DB	0
   218 0000000C 00                              	DB	0
   219 0000000D 00                              	DB	0
   220 0000000E FF                              	DB	-1
   221 0000000F FF                              	DB	-1
   222 00000010 00                              	DB	0
   223 00000011 FF                              	DB	-1
   224 00000012 00                              	DB	0
   225 00000013 FF                              	DB	-1
   226 00000014 FF                              	DB	-1
   227 00000015 FF                              	DB	-1
   228 00000016 FF                              	DB	-1
   229 00000017 FF                              	DB	-1
   230 00000018 C6                              	DB	-58
   231 00000019 C6                              	DB	-58
   232 0000001A C6                              	DB	-58
   233 0000001B 84                              	DB	-124
   234 0000001C 00                              	DB	0
   235 0000001D 00                              	DB	0
   236 0000001E 00                              	DB	0
   237 0000001F 84                              	DB	-124
   238 00000020 00                              	DB	0
   239 00000021 84                              	DB	-124
   240 00000022 84                              	DB	-124
   241 00000023 00                              	DB	0
   242 00000024 00                              	DB	0
   243 00000025 00                              	DB	0
   244 00000026 84                              	DB	-124
   245 00000027 84                              	DB	-124
   246 00000028 00                              	DB	0
   247 00000029 84                              	DB	-124
   248 0000002A 00                              	DB	0
   249 0000002B 84                              	DB	-124
   250 0000002C 84                              	DB	-124
   251 0000002D 84                              	DB	-124
   252 0000002E 84                              	DB	-124
   253 0000002F 84                              	DB	-124
   254                                          [SECTION .text]
   255 00000286                                 	GLOBAL	_init_palette
   256 00000286                                 _init_palette:
   257 00000286 55                              	PUSH	EBP
   258 00000287 89 E5                           	MOV	EBP,ESP
   259 00000289 68 [00000000]                   	PUSH	_table_rgb.0
   260 0000028E 6A 0F                           	PUSH	15
   261 00000290 6A 00                           	PUSH	0
   262 00000292 E8 00000002                     	CALL	_set_palette
   263 00000297 C9                              	LEAVE
   264 00000298 C3                              	RET
   265 00000299                                 	GLOBAL	_set_palette
   266 00000299                                 _set_palette:
   267 00000299 55                              	PUSH	EBP
   268 0000029A 89 E5                           	MOV	EBP,ESP
   269 0000029C 57                              	PUSH	EDI
   270 0000029D 56                              	PUSH	ESI
   271 0000029E 53                              	PUSH	EBX
   272 0000029F 51                              	PUSH	ECX
   273 000002A0 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   274 000002A3 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   275 000002A6 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   276 000002A9 E8 [00000000]                   	CALL	_io_load_eflags
   277 000002AE 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   278 000002B1 E8 [00000000]                   	CALL	_io_cli
   279 000002B6 53                              	PUSH	EBX
   280 000002B7 68 000003C8                     	PUSH	968
   281 000002BC E8 [00000000]                   	CALL	_io_out8
   282 000002C1 39 FB                           	CMP	EBX,EDI
   283 000002C3 58                              	POP	EAX
   284 000002C4 5A                              	POP	EDX
   285 000002C5 7E 12                           	JLE	L26
   286 000002C7                                 L28:
   287 000002C7 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   288 000002CA 89 45 08                        	MOV	DWORD [8+EBP],EAX
   289 000002CD 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   290 000002D0 5B                              	POP	EBX
   291 000002D1 5E                              	POP	ESI
   292 000002D2 5F                              	POP	EDI
   293 000002D3 5D                              	POP	EBP
   294 000002D4 E9 [00000000]                   	JMP	_io_store_eflags
   295 000002D9                                 L26:
   296 000002D9 8A 06                           	MOV	AL,BYTE [ESI]
   297 000002DB 43                              	INC	EBX
   298 000002DC C0 E8 02                        	SHR	AL,2
   299 000002DF 0F B6 C0                        	MOVZX	EAX,AL
   300 000002E2 50                              	PUSH	EAX
   301 000002E3 68 000003C9                     	PUSH	969
   302 000002E8 E8 [00000000]                   	CALL	_io_out8
   303 000002ED 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   304 000002F0 C0 E8 02                        	SHR	AL,2
   305 000002F3 0F B6 C0                        	MOVZX	EAX,AL
   306 000002F6 50                              	PUSH	EAX
   307 000002F7 68 000003C9                     	PUSH	969
   308 000002FC E8 [00000000]                   	CALL	_io_out8
   309 00000301 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   310 00000304 C0 E8 02                        	SHR	AL,2
   311 00000307 83 C6 03                        	ADD	ESI,3
   312 0000030A 0F B6 C0                        	MOVZX	EAX,AL
   313 0000030D 50                              	PUSH	EAX
   314 0000030E 68 000003C9                     	PUSH	969
   315 00000313 E8 [00000000]                   	CALL	_io_out8
   316 00000318 83 C4 18                        	ADD	ESP,24
   317 0000031B 39 FB                           	CMP	EBX,EDI
   318 0000031D 7E BA                           	JLE	L26
   319 0000031F EB A6                           	JMP	L28
